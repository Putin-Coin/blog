<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><link rel=subresource src=//use.typekit.net/ayq0lpd.js><link rel=subresource src=//www.google-analytics.com/analytics.js><title>Dynamic Selectors &mdash; Philip Walton</title><!--[if lt IE 9]><script src="/assets/javascript/html5shiv.js"></script><![endif]--><script async id=typekit src=//use.typekit.net/ayq0lpd.js></script><meta name=description content="When creating a new CSS library or framework, developers typically take one of two approaches with"><meta name=viewport content="width=device-width,initial-scale=1"><link href=/assets/css/style.css rel=stylesheet><link href=http://feeds.feedburner.com/philipwalton rel=alternate title="Philip Walton" type=application/atom+xml></head><body class=Site><div class=Site-header><header class=Header><a class=Header-info href="/" title=Home><h1 class=Header-title>Philip Walton</h1><p class=Header-tagline>Engineer at Google</p></a> <a class=Header-photo href="/" title=Home></a><div class=Header-social><nav class=SocialNav><a class="SocialNav-icon SocialNav-icon--twitter" data-alt=Twitter href=https://twitter.com/philwalton title="Follow me on Twitter"><svg viewbox="0 0 32 32"><use xlink:href=#icon-twitter></use></svg></a> <a class="SocialNav-icon SocialNav-icon--github" data-alt=Github href=http://github.com/philipwalton title="View my Github profile"><svg viewbox="0 0 32 32"><use xlink:href=#icon-github></use></svg></a> <a class="SocialNav-icon SocialNav-icon--rss" data-alt=RSS href=http://feeds.feedburner.com/philipwalton title="Subscribe to my RSS feed"><svg viewbox="0 0 32 32"><use xlink:href=#icon-rss></use></svg></a></nav></div><div class=Header-nav><nav class=MainNav><a href="/" title=Home>Home</a> <a href="/articles/" title=Articles>Articles</a> <a href="/about/" title=About>About</a></nav></div></header></div><div class=Site-contentContainer><main class=Site-content><article role=article class=hentry><header class=ContentHeader><h1 class="ContentHeader-title entry-title">Dynamic Selectors</h1><time class="ContentHeader-date published" datetime=2013-02-20T14:22:24-08:00>February 20, 2013</time></header><div class=entry-content><p>When creating a new CSS library or framework, developers typically take one of two approaches with component naming: the <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> approach or the <a href="http://jqueryui.com/">jQueryUI</a> approach.</p><p>Bootstrap tries to be as simple and basic as possible, calling a component exactly what it is. If something is a tooltip, why not use the class selector <code>.tooltip</code> to define how it looks? This approach keeps things simple, clean, and easy to remember, but it has one big disadvantage. If you’re trying to incorporate Bootstrap into an existing project, the chances are pretty high it will conflict with your existing selectors.</p><p>jQueryUI, on the other hand, takes the opposite approach. They prefix every class name with the string <code>ui-</code> greatly reducing the possibility of conflict, but at the cost of being more verbose.</p><p>Choosing between these two paths isn’t always easy. Namespacing might be better for compatibility, but what should your prefix be? A longer, more unique prefix will lead to fewer conflicts at the cost of a lot more typing. But if you pick a simple prefix, another library might already be using it. And many of the short and sweet prefixes are already taken (like <code>ui-</code> by jQuery and <code>x-</code> by <a href=http://www.sencha.com/products/extjs>ExtJS</a>).</p><p>What if there were a third option? One with all the benefits of clean and simple names like Bootstrap, but without any of the possible conflicts?</p><p>With the help of a CSS preprocessor like <a href="http://sass-lang.com/">Sass</a>, this <em>is</em> possible.</p><h2 id=define-selectors-with-a-variable>Define Selectors with a Variable</h2><p>Imagine I have a website that’s been around for a while and already defines styles for <code>.tooltip</code> and <code>.alert</code>. Then I decide I want to start using Bootstrap, but I don’t have the time to convert all of my legacy code to the Bootstrap format.</p><p>Given the current state of Bootstrap, I’m pretty much out of luck.</p><p>But what if there were a way to tell Bootstrap that I wanted to use its <code>.alert</code> component, but call it something else, perhaps <code>.notice</code>. With dynamic selectors, you can do exactly that.</p><p>Selectors don’t have to be static. If you build your components with a predictable naming convention, it becomes easy to abstract that name into a variable.</p><p>The convention I use is to give each component a name and add that name to the root element of the component. Each sub-element of the component that needs styling defines a class with the component name as a prefix.</p><p>Here’s a basic example of a messagebox component taken from an imaginary library called Flux:</p><pre class=highlight><code class=xml><span class=comment>&lt;!-- the markup for the messagebox component --&gt;</span>
<span class=tag>&lt;<span class=title>div</span> <span class=attribute>class</span>=<span class=value>"messagebox"</span>&gt;</span>
  <span class=tag>&lt;<span class=title>h1</span> <span class=attribute>class</span>=<span class=value>"messagebox-title"</span>&gt;</span>...<span class=tag>&lt;/<span class=title>h1</span>&gt;</span>
  <span class=tag>&lt;<span class=title>p</span> <span class=attribute>class</span>=<span class=value>"messagebox-body"</span>&gt;</span>...<span class=tag>&lt;/<span class=title>p</span>&gt;</span>
<span class=tag>&lt;/<span class=title>div</span>&gt;</span></code></pre><pre class=highlight><code class=css><span class=comment>/* and the corresponding styles */</span>
<span class=class>.messagebox</span> <span class=rules>{ <span class=rule>}</span></span>
<span class=class>.messagebox-title</span> <span class=rules>{ <span class=rule>}</span></span>
<span class=class>.messagebox-body</span> <span class=rules>{ <span class=rule>}</span></span></code></pre><p>A predictable convention like this allows you to easily replace the static names in the selector with a Sass variable like so:</p><pre class=highlight><code class=scss>$flux-messagebox-name<span class=value>: <span class=string>"messagebox"</span> !default;</span>

.#{$flux-messagebox-name} { }
.#{$flux-messagebox-name}-<span class=tag>title</span> { }
.#{$flux-messagebox-name}-<span class=tag>body</span> { }</code></pre><p>This technique has all the pros of a clean naming system like Bootstrap with almost none of the potential conflicts. If a project wants to include the messagebox styles above, but its CSS already has <code>.messagebox</code> defined, there’s no problem. All they’d have to do is assign the <code>$flux-messagebox-name</code> variable to something else before including the messagebox’s Sass file, and the conflict is solved.</p><pre class=highlight><code class=scss><span class=comment>/* first override the messagebox's class name */</span>
$flux-messagebox-name<span class=value>: <span class=string>"some-other-name"</span>;</span>

<span class=comment>/* then import flux normally */</span>
<span class=at_rule>@<span class=keyword>import</span> <span class=string>"flux"</span>;</span></code></pre><p>Note: I’m prefixing the class name variables with the <code>flux</code> namespace for an extra level of protection since Sass variables live in the global scope. Doing this isn’t 100% necessary, but I recommend it.</p><h2 id=javascript-plugins>JavaScript Plugins</h2><p>Most component libraries come with a least some JavaScript that dynamically creates its own markup. If these components offer Sass variables for dynamic selectors, they’ll also need to offer JavaScript variables to change the class names there as well.</p><p>Since components typically expose a defaults object, the class name variable could be a property on that object, allowing users of the library to change it globally in one place.</p><p>For example, if messagebox is a jQuery plugin, you might use code like this to dynamically change the class name:</p><pre class=highlight><code class=javascript>$.fn.messagebox.defaults.className = <span class=string>"some-other-name"</span>;</code></pre><h2 id=what-about-static-markup->What about static markup?</h2><p>At this point I’m sure some readers are wondering whether I’ve overlooked half the problem. Dynamically building selectors is one thing, but what if the old class name is in hundreds of places in the HTML, how do you deal with that?</p><p>The truth is I don’t think that situation would be very common. The typical use case for dynamic selectors is when you want to start using a third party library, haven’t written any code for it yet, and realize there would be conflicts. In this use case, you’re picking a class name that <em>isn’t</em> in the HTML precisely to avoid conflict.</p><p>The only time I could see dynamic selectors leading to a lot of find-and-replace in the HTML is if you change your mind and suddenly decide you want to name your classes something else, in which case it’s not really the library author’s fault. Also, if you’re repeating a lot of the same markup for each component and you think it’s likely you’ll change your mind later, this is a perfect place to abstract that markup into templates, partials, or helpers.</p><h2 id=summary>Summary</h2><p>All component libraries that use preprocessors should offer the option of dynamic selectors. It allows for a short and simple name for the majority of users and only requires extra effort for the ones who need it. It doesn’t impose a verbose prefix on anyone and keeps the barrier to entry low. Those who want to make changes can dive into the Sass file, and those who just want to use it out of the box can simply grab the compiled CSS. Everybody wins.</p><p>I’d love to see libraries like Bootstrap adopt this approach. Bootstrap already uses a jQuery-like <code>noConflict()</code> method in each of its JavaScript plugins. Dynamic selectors wouldn’t be much harder and would go a long way to increase its compatibility.</p><p>I believe that website authors should be able to write their markup however they want. They should be able to choose whatever names they want without the fear that someday those names will conflict with a third party library. It should be the responsibility of library and framework authors to make their code as compatible as possible.</p></div><footer class=entry-unrelated><div class=Share><span class=Share-figure><svg viewbox="0 0 39 32"><use xlink:href=#icon-twitter-bird></use></svg></span><p class=Share-pitch>If you liked this article and think others should read it, please <a data-social-network=Twitter data-social-action=tweet href="http://twitter.com/intent/tweet?text=Dynamic%20Selectors&amp;url=http%3A%2F%2Fphilipwalton.com%2Farticles%2Fdynamic-selectors%2F&amp;via=philwalton">share it on Twitter</a>.</p></div></footer></article></main></div><svg display=none><defs><path id=icon-twitter-bird d="M34.7 5c1.7-1 2.8-2.5 3.4-4.4-1.6 0.9-3.3 1.6-5 2-1.6-1.7-3.6-2.6-5.8-2.6-2.2 0-4.2 0.7-5.7 2.3-1.6 1.6-2.3 3.4-2.3 5.8 0 0.6 0.1 1.2 0.2 1.8-6.9-0.4-12.6-3.2-16.9-8.5-0.7 1.2-1.1 2.7-1.1 4.1 0 3 1.2 5.2 3.6 6.8-1.2 0-2.5-0.4-3.6-1v0.1c0 2 0.6 3.7 1.8 5.2 1.2 1.5 2.7 2.5 4.6 2.8-0.6 0.1-1.2 0.2-2.1 0.2-0.4 0-0.9 0-1.5-0.1 0.5 1.5 1.4 2.8 2.8 3.8 1.4 1 3 1.5 4.7 1.6-3.1 2.5-6.4 3.7-10 3.7-0.5 0-1.1 0-2-0.1 3.7 2.2 7.8 3.4 12.4 3.4 3.6 0 6.8-0.7 9.8-2.1 3-1.4 5.4-3.2 7.3-5.4 1.8-2.2 3.3-4.7 4.3-7.4s1.6-5.4 1.6-8.1v-1c1.4-1 2.7-2.5 3.9-4.2-1.6 0.6-3.2 1.1-4.7 1.2z"></path><path id=icon-rss d="M16 0q6.6 0 11.3 4.7t4.7 11.3q0 6.6-4.7 11.3t-11.3 4.7-11.3-4.7-4.7-11.3 4.7-11.3 11.3-4.7zM10.7 24q1.1 0 1.9-0.8t0.8-1.9-0.8-1.9-1.9-0.8-1.9 0.8-0.8 1.9 0.8 1.9 1.9 0.8zM16.7 24h3.3q0-5-3.5-8.5t-8.5-3.5v3.3q3.6 0 6.1 2.5t2.5 6.1zM22.7 24h3.3q0-3.7-1.4-7t-3.8-5.7-5.7-3.8-7-1.4v3.3q6.1 0 10.4 4.3t4.3 10.4z"></path><path id=icon-twitter d="M16 0q6.6 0 11.3 4.7t4.7 11.3-4.7 11.3-11.3 4.7-11.3-4.7-4.7-11.3 4.7-11.3 11.3-4.7zM25.7 12.5q1.2-0.9 2.3-2.3-1.3 0.6-2.6 0.7 1.4-0.8 2-2.5-1.4 0.8-2.9 1.1-1.3-1.4-3.3-1.4-1.9 0-3.2 1.3t-1.3 3.2q0 0.6 0.1 1-5.7-0.3-9.4-4.8-0.6 1.1-0.6 2.3 0 2.4 2 3.8-1 0-2-0.6v0q0 1.6 1 2.9t2.6 1.6q-0.5 0.1-1.2 0.1-0.3 0-0.9-0.1 0.4 1.4 1.6 2.2t2.6 0.9q-2.6 2.1-5.6 2.1-0.4 0-1.1-0.1 3.1 2 7 2 3 0 5.5-1.2t4.1-3.1 2.4-4.1 0.9-4.6v-0.6z"></path><path id=icon-github d="M16 0q6.59 0 11.3 4.7t4.7 11.3q0 5.52-3.39 9.85t-8.61 5.67v-4.18q0-2.89-1.67-4.18 3.37-0.52 5.52-2.41t2.15-4.74q0-2.52-1.85-4.59 0.67-3.07-0.15-4.74-2.04 0.19-4.63 1.78-1.78-0.44-3.37-0.44t-3.37 0.44q-2.59-1.59-4.63-1.78-0.85 1.78-0.15 4.74-1.85 2.07-1.85 4.59 0 2.85 2.15 4.74t5.52 2.41q-0.85 0.63-1.3 1.82-0.67 0-1.37-0.13t-1.28-0.35-1.11-0.5-0.96-0.56-0.72-0.52-0.48-0.39l-0.15-0.15q-0.26-0.26-0.52-0.07-0.3 0.19-0.22 0.52 0.7 1.37 1.19 2 1.93 2.48 5.26 3.48v3.22q-5.22-1.33-8.61-5.67t-3.39-9.85q0-6.63 4.68-11.31t11.32-4.68z"></path></defs></svg><script>!function(t,e,n){ga=function(){ga.q.push(arguments)},ga.q=[],ga.l=1*new Date,ga("create","UA-21292978-1","auto"),t.onerror=function(t,e,n){var r=t+" (line: "+n+", url: "+e+")";ga("send","exception",{exDescription:r,exFatal:!1})},ga("send","pageview"),function r(t,e,n){function i(a,s){if(!e[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=e[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,r,t,e,n)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e){e.exports=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}},{}],2:[function(r,i){function o(t){var e=t.title||t.innerText;return e?e+" — Philip Walton":null}function a(t){var e=this.nextPage.path;if(d[e])return t();var n=/(\w+)\.html$/,r=n.test(e)?e.replace(n,"_$1.html"):e+"_index.html",i=new XMLHttpRequest;i.open("GET",r),i.onload=function(){i.status>=200&&i.status<400?(d[e]=i.responseText,t()):t(new Error("("+i.status+") "+i.response))},i.onerror=function(){t(new Error("Error making request to:"+r))},i.send()}function s(){var t=d[this.nextPage.path];l.innerHTML=t}function c(){var n=this.nextPage.hash;if(n)var r=e.getElementById(n.slice(1));var i=r?r.offsetTop:0;t.scrollTo(0,i)}function u(){ga("set",{location:this.nextPage.href,title:this.nextPage.title}),ga("send","pageview")}function h(t){var e=this.nextPage.href;ga("send","exception",{exDescription:t.stack||t.message,exFatal:!1,hitCallback:function(){n.href=e}})}var l,f=r("./link-clicked"),p=r("./history2"),g=r("./parse-url"),d={};i.exports={init:function(){if(t.history&&t.history.pushState){l=e.querySelector("main"),d[n.pathname]=l.innerHTML;var r=(new p).use(a).use(s).use(c).use(u)["catch"](h);f(function(t){if(!t.metaKey&&!t.ctrlKey){var e=g(n.href),i=g(this.href);i.href==e.href&&t.preventDefault(),i.origin==e.origin&&i.path!=e.path&&(t.preventDefault(),r.add(i.href,o(this)))}})}}}},{"./history2":3,"./link-clicked":4,"./parse-url":7}],3:[function(n,r){function i(){t.history.state?this.currentPage=t.history.state:(this.currentPage=o(t.location.href),this.currentPage.title=e.title,history.replaceState(this.currentPage,this.currentPage.title,this.currentPage.href)),this._queue=[],t.addEventListener("popstate",function(e){var n=e.state,r=n&&n.title;this.add(t.location.href,r,n,e)}.bind(this))}var o=n("./parse-url");i.prototype.add=function(t,e,n,r){t!=this.currentPage.href&&(this.nextPage=o(t),this.nextPage.title=e,this.nextPage.state=n,this.nextPage.path!=this.currentPage.path&&this._processQueue(r))},i.prototype.use=function(t){return this._queue.push(t),this},i.prototype["catch"]=function(t){return this._onError=t,this},i.prototype._onError=function(t){console.error(t.stack)},i.prototype._onComplete=function(t){t&&"popstate"==t.type||history.pushState(this.nextPage,this.nextPage.title,this.nextPage.href),this.nextPage.title&&(e.title=this.nextPage.title),this.currentPage=this.nextPage,this.nextPage=null},i.prototype._processQueue=function(t){var e=this,n=0;!function r(){function i(t){t?e._onError(t):r()}var o=e._queue[n++],a=o&&!o.length;if(!o)return e._onComplete(t);try{o.apply(e,a?[]:[i])}catch(s){return e._onError(s)}a&&r()}()},r.exports=i},{"./parse-url":7}],4:[function(n,r){function i(t){return t.nodeName&&"a"==t.nodeName.toLowerCase()&&t.href}function o(t){if(i(t))return t;for(;t.parentNode&&1==t.parentNode.nodeType;){if(i(t))return t;t=t.parentNode}}var a=n("./add-listener");r.exports=function(n){a(e,"click",function(e){var r=e||t.event,i=r.target||r.srcElement,a=o(i);a&&n.call(a,r)})}},{"./add-listener":1}],5:[function(n){var r=n("./supports"),i=n("./outbound-links"),o=n("./social-interactions"),a=n("./content-loader");r.flexbox()||(e.documentElement.className+=" is-legacy"),t.Typekit?Typekit.load():e.getElementById("typekit").onload=function(){Typekit.load()},i.track(),o.track(),a.init()},{"./content-loader":2,"./outbound-links":6,"./social-interactions":8,"./supports":9}],6:[function(t,e){function r(t){var e=i(t.href),r=i(n.href);return e.origin!=r.origin}var i=t("./parse-url"),o=t("./link-clicked");e.exports={track:function(){o(function(){r(this)&&(this.target="_blank",ga("send","event","Outbound Link","click",this.href))})}}},{"./link-clicked":4,"./parse-url":7}],7:[function(t,n){var r=e.createElement("a"),i={};n.exports=function(t){if(i[t])return i[t];r.href=t;var e=t.indexOf(r.host)<0?r.host.replace(":80",""):r.host,n=r.origin?r.origin:r.protocol+"//"+r.host,o="/"==r.pathname.charAt(0)?r.pathname:"/"+r.pathname;return i[t]={hash:r.hash,host:e,hostname:r.hostname,href:r.href,origin:n,path:o+r.search,pathname:o,protocol:r.protocol,search:r.search}}},{}],8:[function(t,e){var r=t("./link-clicked");e.exports={track:function(){r(function(){var t=this.getAttribute("data-social-network");if(t){var e=this.getAttribute("data-social-action"),r=n.href;this.target="_blank",ga("send","social",t,e,r)}})}}},{"./link-clicked":4}],9:[function(t,n){var r={},i=e.body.style;n.exports={flexbox:function(){return r.flexbox||(r.flexbox="flexBasis"in i||"msFlexAlign"in i||"webkitBoxDirection"in i)}}},{}]},{},[5])}(window,document,location);</script><script async id=analytics src=//www.google-analytics.com/analytics.js></script></body></html>