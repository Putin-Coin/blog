<article role=article class=hentry><header class=ContentHeader><h1 class="ContentHeader-title entry-title">Normalizing Cross-browser Flexbox Issues</h1><time class="ContentHeader-date published" datetime=2014-12-14T13:38:45-08:00>December 14, 2014</time></header><div class=entry-content><p>A little over a year ago when I was building my <a href="http://philipwalton.github.io/solved-by-flexbox/">Solved by Flexbox</a> demo site, I discovered and reported an <a href=https://connect.microsoft.com/IE/feedback/details/802625/min-height-and-flexbox-flex-direction-column-dont-work-together-in-ie-10-11-preview>Internet Explorer bug</a> that prevented my <a href="http://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/">sticky footer</a> example from working properly. Since a sticky footer layout is a perfect candidate for progressive enhancement (i.e. the content is still accessible even if the footer isn’t sticking) I didn’t worry too much about it. The demo worked in all browsers except Internet Explorer 10 and 11, and I was okay with that.</p><p>Over the past year I’ve become more familiar with the nuances of the <a href=http://dev.w3.org/csswg/css-flexbox/#layout-algorithm>flex layout algorithm</a> and the <a href=http://dev.w3.org/csswg/css-flexbox/#flexibility>flexibility</a> properties, I’ve discovered that there is more than one way to stick a footer with flexbox.</p><p>The obvious (and arguably the cleanest) method is the one I originally used, but since that approach is currently plagued by bugs, and the alternative works in every browser that supports <em>any</em> version of flexbox, the choice is pretty clear.</p><p>The rest of this article will walk you through how to build a cross-browser sticky footer layout with flexbox. It will cover some of the strategies I’ve used to avoid implementation bugs as well as offer some tips to ensure the code you use is future-proof.</p><h2 id=there-s-more-than-one-way-to-stick-a-footer>There’s more than one way to stick a footer</h2><p>The traditional sticky footer layout includes a header, footer, and content area, each of unknown height. If the content area is sparse, the footer sticks to the bottom of the screen. If the content area is verbose and extends beyond the bottom of the the screen, the footer scrolls with the content as normal.</p><p>To put this another way, the content area needs to always be <em>at least</em> the height of the screen so that the footer is always at the bottom.</p><p>When using phrases like <em>at least</em> when referring to height, the obvious CSS property to reach for is <code>min-height</code>. And that’s the property used in almost every sticky footer technique I’ve seen to date.</p><p>In general usage, the reason <code>min-height</code> is preferable to <code>height</code> is because you want the content to be able to grow if needed. When using just <code>height</code> you either get overflow or scrollbars, both of which are usually undesirable.</p><p>However, when we’re talking about the main page layout, getting a vertical scroll bar when the content overflows the height of the viewport is exactly what we want! This approach was never possible with traditional block layouts because if you set <code>height:100%</code> on the main content area, and its content overflowed, the overflowing content would not push the footer down&mdash;it would overlap it.</p><h3 id=enter-the-flexibility-properties>Enter, the flexibility properties</h3><p>With flexbox, we have new flexibility properties (<code>flex-grow</code>, <code>flex-shrink</code>, and <code>flex-basis</code>) that work in conjuction with the traditional length properties.</p><p>Most people are familiar with <code>flex-grow</code> as it’s used most often (it’s often just writen as <code>flex</code> but I’ll get to why that can be dangerous later). If you have an element that naturally takes up 100 pixels of space, and there’s 200 pixels of extra space next to to, using <code>flex-grow:1</code> will actually change the length of the rendered element.</p><p>If you’ve used flexbox before, this is probably not new to you. What may be new, however, is using <code>flex-shrink:0</code> (it’s default value is <code>1</code>) as a means of pushing subsequent down.</p><p>When you set an element’s flex shrink factor</p><p>I originally tried to see if I could get it working just using <code>height</code> (since that was always the solution for IE6 which never supported <code>min-height</code>), and that did kind of work in IE, but it then broke the other browsers, and since conditional comments no longer work in the newer versions of IE, I just moved on.</p><p>What I didn’t realize was that just using <code>height</code> <em>does</em> work, I just had the wrong property combinations.</p><h2 id=what-i-didn-t-know-about-the-flex-shorthand>What I didn’t know about the flex shorthand</h2><p><code>flex:1</code> is deceptively simple. It sounds like it means that if there is extra room to grow inside this container, then do so. But is also means that if something needs to shrink inside this container, so that too.</p><p><code>flex:1</code> is equivalent to the following:</p><pre class=hljs><code class=css><span class=hljs-tag>flex-grow</span>: 1;
<span class=hljs-tag>flex-shrink</span>: 1;
<span class=hljs-tag>flex-basis</span>: 0%;</code></pre><p>In other words, the reason I couldn’t get the sticky footer example to work with <code>height:100vh</code> is because I was unknowingly telling my content area to shrink when there wasn’t enough room. If I changed the content area’s <code>flex</code> value to <code>1 0 0%</code> or <code>1 0 auto</code>, everything just worked fine.</p><p>Setting an explicit height on elements in CSS is usually a bad idea because of overflow issues and unintentional scroll bars, but in this case we’re overflowing the body, so getting a scroll bar to appear is exactly what we want.</p><p>3 IE Problems:</p><p>1) min-height issue (bug, no real workaround) 2) Unless flex-basis with flex shorthand: <code>flex: 1 0 0</code> is broken 3) The default flex value for IE appears to be <code>none</code> instead of <code>initial</code> so shinking doesn’t happen.</p><p><a href=https://github.com/Modernizr/Modernizr/issues/1301#issuecomment-46339336>https://github.com/Modernizr/Modernizr/issues/1301#issuecomment-46339336</a></p></div><footer class=entry-unrelated><div class=Share><span class=Share-figure><svg viewbox="0 0 39 32"><use xlink:href=#icon-twitter-bird></use></svg></span><p class=Share-pitch>If you liked this article and think others should read it, please <a data-social-network=Twitter data-social-action=tweet href="http://twitter.com/intent/tweet?text=Normalizing%20Cross-browser%20Flexbox%20Issues&amp;url=http%3A%2F%2Fphilipwalton.com%2Farticles%2Fnormalizing-cross-browser-flexbox-issues%2F&amp;via=philwalton">share it on Twitter</a>.</p></div></footer></article>