<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<link rel="subresource" src="//use.typekit.net/ayq0lpd.js"/>
<link rel="subresource" src="//www.google-analytics.com/analytics.js"/>

<title>The Future of OOCSS: A Proposal &mdash; Philip Walton</title>

<!--[if lt IE 9]><script src="/assets/javascript/html5shiv.js"></script><![endif]-->

<!-- Put typekit in the head for the fastest possible download. -->
<script src="//use.typekit.net/ayq0lpd.js"></script>

<script>
ga = function() { ga.q.push(arguments); };
ga.q = []; ga.l = 1 * new Date();

// Create the GA tracker before doing any logging.
ga('create', 'UA-21292978-1', 'auto');



  // In non-production mode, simply log GA hits to the console.
  ga(function(tracker) {
    tracker.set('sendHitTask', function() {
      // Throw to stop subsequent tasks.
      throw 'Abort tracking in non-production environments.'
    });
  });



// Initialize typekit and track how frequently it fails.
try {
  Typekit.load();
}
catch(err) {
  ga('send', 'exception', {
    exDescription: err.stack || err.message,
    exFatal: false
  });
}


// Track uncaught errors via Google Analytics.
window.onerror = function(message, url, line, col) {
  var desc = message + ' (line: ' + line + ', url: ' + url + ', col: '
      + col + ')';
  ga('send', 'exception', {
    exDescription: 'window.onerror: ' + desc,
    exFatal: false
  });
};


// Note, tasks must be set before sending the first hit
ga('send', 'pageview');
</script>


<link href="/assets/css/style.css" rel="stylesheet">
<link href="http://feeds.feedburner.com/philipwalton" rel="alternate" title="Philip Walton" type="application/atom+xml">

<meta name="description" content="In CSS we often code the same visual components over and over again &amp;mdash; even within">
<meta name="viewport" content="width=device-width, initial-scale=1">

<svg display="none">
  <defs>
    <path id="icon-twitter-bird" d="M34.7 5c1.7-1 2.8-2.5 3.4-4.4-1.6 0.9-3.3 1.6-5 2-1.6-1.7-3.6-2.6-5.8-2.6-2.2 0-4.2 0.7-5.7 2.3-1.6 1.6-2.3 3.4-2.3 5.8 0 0.6 0.1 1.2 0.2 1.8-6.9-0.4-12.6-3.2-16.9-8.5-0.7 1.2-1.1 2.7-1.1 4.1 0 3 1.2 5.2 3.6 6.8-1.2 0-2.5-0.4-3.6-1v0.1c0 2 0.6 3.7 1.8 5.2 1.2 1.5 2.7 2.5 4.6 2.8-0.6 0.1-1.2 0.2-2.1 0.2-0.4 0-0.9 0-1.5-0.1 0.5 1.5 1.4 2.8 2.8 3.8 1.4 1 3 1.5 4.7 1.6-3.1 2.5-6.4 3.7-10 3.7-0.5 0-1.1 0-2-0.1 3.7 2.2 7.8 3.4 12.4 3.4 3.6 0 6.8-0.7 9.8-2.1 3-1.4 5.4-3.2 7.3-5.4 1.8-2.2 3.3-4.7 4.3-7.4s1.6-5.4 1.6-8.1v-1c1.4-1 2.7-2.5 3.9-4.2-1.6 0.6-3.2 1.1-4.7 1.2z"></path>
    <path id="icon-rss" d="M16 0q6.6 0 11.3 4.7t4.7 11.3q0 6.6-4.7 11.3t-11.3 4.7-11.3-4.7-4.7-11.3 4.7-11.3 11.3-4.7zM10.7 24q1.1 0 1.9-0.8t0.8-1.9-0.8-1.9-1.9-0.8-1.9 0.8-0.8 1.9 0.8 1.9 1.9 0.8zM16.7 24h3.3q0-5-3.5-8.5t-8.5-3.5v3.3q3.6 0 6.1 2.5t2.5 6.1zM22.7 24h3.3q0-3.7-1.4-7t-3.8-5.7-5.7-3.8-7-1.4v3.3q6.1 0 10.4 4.3t4.3 10.4z"></path>
    <path id="icon-twitter" d="M16 0q6.6 0 11.3 4.7t4.7 11.3-4.7 11.3-11.3 4.7-11.3-4.7-4.7-11.3 4.7-11.3 11.3-4.7zM25.7 12.5q1.2-0.9 2.3-2.3-1.3 0.6-2.6 0.7 1.4-0.8 2-2.5-1.4 0.8-2.9 1.1-1.3-1.4-3.3-1.4-1.9 0-3.2 1.3t-1.3 3.2q0 0.6 0.1 1-5.7-0.3-9.4-4.8-0.6 1.1-0.6 2.3 0 2.4 2 3.8-1 0-2-0.6v0q0 1.6 1 2.9t2.6 1.6q-0.5 0.1-1.2 0.1-0.3 0-0.9-0.1 0.4 1.4 1.6 2.2t2.6 0.9q-2.6 2.1-5.6 2.1-0.4 0-1.1-0.1 3.1 2 7 2 3 0 5.5-1.2t4.1-3.1 2.4-4.1 0.9-4.6v-0.6z"></path>
    <path id="icon-github" d="M16 0q6.59 0 11.3 4.7t4.7 11.3q0 5.52-3.39 9.85t-8.61 5.67v-4.18q0-2.89-1.67-4.18 3.37-0.52 5.52-2.41t2.15-4.74q0-2.52-1.85-4.59 0.67-3.07-0.15-4.74-2.04 0.19-4.63 1.78-1.78-0.44-3.37-0.44t-3.37 0.44q-2.59-1.59-4.63-1.78-0.85 1.78-0.15 4.74-1.85 2.07-1.85 4.59 0 2.85 2.15 4.74t5.52 2.41q-0.85 0.63-1.3 1.82-0.67 0-1.37-0.13t-1.28-0.35-1.11-0.5-0.96-0.56-0.72-0.52-0.48-0.39l-0.15-0.15q-0.26-0.26-0.52-0.07-0.3 0.19-0.22 0.52 0.7 1.37 1.19 2 1.93 2.48 5.26 3.48v3.22q-5.22-1.33-8.61-5.67t-3.39-9.85q0-6.63 4.68-11.31t11.32-4.68z"></path>
  </defs>
</svg>


  </head>
  <body class="Site">

    <div class="Site-header">
      <header class="Header">
        <a class="Header-info" href="/" title="Home">
          <h1 class="Header-title">Philip Walton</h1>
          <p class="Header-tagline">Engineer at Google</p>
        </a>
        <a class="Header-photo" href="/" title="Home"></a>
        <div class="Header-social">
          <nav class="SocialNav">
  <a class="SocialNav-icon SocialNav-icon--twitter"
     href="https://twitter.com/philwalton"
     title="Twitter">
    <svg viewBox="0 0 32 32">
      <use xlink:href="#icon-twitter"></use>
    </svg>
  </a>
  <a class="SocialNav-icon SocialNav-icon--github"
     href="https://github.com/philipwalton"
     title="Github">
    <svg viewBox="0 0 32 32">
      <use xlink:href="#icon-github"></use>
    </svg>
  </a>
  <a class="SocialNav-icon SocialNav-icon--rss"
     href="http://feeds.feedburner.com/philipwalton"
     title="RSS">
    <svg viewBox="0 0 32 32">
      <use xlink:href="#icon-rss"></use>
    </svg>
  </a>
</nav>
        </div>
        <div class="Header-nav">
          <nav class="MainNav">
  <a href="/" title="Home">Home</a>
  <a href="/articles/" title="Articles">Articles</a>
  <a href="/about/" title="About">About</a>
</nav>
        </div>
      </header>
    </div>

    <div class="Site-contentContainer">
      <main class="Site-content">
        
<article role="article" class="hentry">

  <header class="ContentHeader">
    <h1 class="ContentHeader-title entry-title">The Future of OOCSS: A Proposal</h1>
    <time class="ContentHeader-date published"
        datetime="2013-01-17T11:02:16-08:00">
      January 17, 2013
    </time>
  </header>

  <div class="entry-content">
    <p>In CSS we often code the same visual components over and over again &mdash; even within the same project. It’s embarrassing how many separate times in my career I’ve coded a two-column layout, or tabbed navigation, or a dropdown menu, or a popup (and the list goes on).</p>
<p>To deal with this problem <a href="http://stubbornella.org">Nicole Sullivan</a> created the <a href="https://github.com/stubbornella/oocss/wiki">Object Oriented CSS</a> (OOCSS) project. She suggests that instead of defining entire components in a single selector, developers should identify the visual patterns that appear over and over again and break them down into their reusable parts, defining each part as a separate class. Those classes can then be used and reused together in the HTML to build a variety of complex UI components.</p>
<p>OOCSS has been implemented on many large projects and is widely accepted as a sound approach to building websites. Yet, it always seems to be under attack from developers who don’t want a lot of classes in their HTML. To them it’s ugly and unmanageable.</p>
<p>If you’ve read anything I’ve written about OOCSS, you probably know where I stand on this issue, but where I stand isn’t important. Instead I want to acknowledge that both sides of the debate have valid concerns, and hopefully we can find a way to address those concerns instead of just taking sides.</p>
<p>What if CSS had object oriented functionality built in? What if there were a way to create a rich hierarchy of inherited CSS components that didn’t require listing each class in the HTML every single time?</p>
<p>There have been <a href="http://ianstormtaylor.com/oocss-plus-sass-is-the-best-way-to-css/">attempts to do this</a> with preprocessors, but I think we need to think bigger. Preprocessors can’t solve all the problems, and CSS should definitely be able to do this on its own.</p>
<p>Luckily with the recent speed of browser development, my wish might actually be possible.</p>
<h2 id="where-preprocessors-fall-short">Where Preprocessors Fall Short</h2>
<p>Sass’s <code>@extend</code> feature is often suggested as a solution to the OOCSS debate. With <code>@extend</code> you can define a simple selector and then within another selector declare that you’re extending it. Here’s an example:</p>
<pre class="highlight"><code class="scss"><span class="class">.button</span> {
  <span class="attribute">background-color</span><span class="value">: gray;</span>
  <span class="attribute">border</span><span class="value">: thin solid black;</span>
}
<span class="class">.button-primary</span> {
  <em><span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .button</span>;</span></em>
  <span class="attribute">background-color</span><span class="value">: blue;</span>
}</code></pre><p>That Sass compiles into the following CSS:</p>
<pre class="highlight"><code class="css"><span class="class">.button</span>, <span class="class">.button-primary</span> <span class="rules">{
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> gray</span></span>;
  <span class="rule"><span class="attribute">border</span>:<span class="value"> thin solid black</span></span>;
<span class="rule">}</span></span>
<span class="class">.button-primary</span> <span class="rules">{
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;
<span class="rule">}</span></span></code></pre><p>In classical object-oriented programming, when one class extends another, the extending class inherits all of the properties and methods of the base class.</p>
<p>If you look at the compiled CSS, you can see that Sass tries to accomplish this by adding <code>.button-primary</code> to the <code>.button</code> definition. In fact, Sass will look through the entire stylesheet and every selector that mentions <code>.button</code> will get <code>.button-primary</code> appended to the end, making sure it gets those properties as well.</p>
<p>In traditional OOCSS you put your base classes directly in the HTML, but with <code>@extend</code> you don’t have to. Sass makes sure that <code>.button-primary</code> gets all of the properties defined on <code>.button</code> so including the class <code>button</code> in the markup is unnecessary.</p>
<p>Hurray! Everyone’s happy, right?</p>
<p>While this is a very powerful tool and a great timesaver, it’s not the answer. There are several ways this solution falls short.</p>
<h3 id="it-doesn-t-work-inside-media-queries">It Doesn’t Work Inside Media Queries</h3>
<p>“Why doesn’t <code>@extend</code> work inside of media queries?” is probably the most common complaint I hear about Sass’s <code>@extend</code> feature.</p>
<p>The answer is pretty simple. It would be far too complicated to account for all possible situations. Consider the following example:</p>
<pre class="highlight"><code class="scss"><span class="at_rule">@<span class="keyword">media</span> (min-width:<span class="preprocessor"> 10em</span>) {</span>
  <span class="class">.button</span> {
    <span class="attribute">background-color</span><span class="value">: gray;</span>
    <span class="attribute">border</span><span class="value">: thin solid black;</span>
  }
}

<span class="at_rule">@<span class="keyword">media</span> (max-width:<span class="preprocessor"> 20em</span>) {</span>
  <span class="class">.button-primary</span> {
    <span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .button</span>;</span>
    <span class="attribute">background-color</span><span class="value">: blue;</span>
  }
}</code></pre><p>The <code>.button</code> selector above is defined to look a certain way, but only when the page is wider than <code>10em</code>. At the same time, <code>.button-primary</code> is defined to look a certain way, but only when the page is narrower than <code>20em</code>. If <code>.button-primary</code> is expected to inherit the properties of <code>.button</code>, it should only do so when the page is between 10 and 20 ems wide. In order for Sass to implement this, it would have to parse the two media queries and create a brand new one that combined the two cases.</p>
<p>Sometimes this is possible, but often it’s not. And even in cases when it could be done, it would be extremely complicated and error prone.</p>
<h3 id="you-lose-the-inheritance-chain">You Lose the Inheritance Chain</h3>
<p>When you don’t put a component’s base class in the markup, you have no way of knowing what a particular class or element <em>is</em>. In traditional OOP, you can inspect an object to determine what classes it inherits from, but that’s not possible here.</p>
<p>Imagine you’ve created many different types of widgets that all <code>@extend</code> the <code>.widget</code> base class. Then, as a result of some user interaction, you need to temporarily disable all of them via JavaScript. If the <code>widget</code> class isn’t in the HTML it’s going to be very difficult!</p>
<pre class="highlight"><code class="javascript"><span class="comment">// This won't work!</span>
document.querySelectorAll(<span class="string">".widget"</span>)</code></pre><p>Any native class inheritance in CSS must allow for dynamic inspection of the inheritance chain. Obviously a CSS preprocessor can’t solve this problem.</p>
<h3 id="it-can-t-account-for-specificity">It Can’t Account for Specificity</h3>
<p>Sass does its best to make all occurrences of a base class include the extending selector, but it’s not magic: it can’t account for developer error. Ultimately, Sass produces raw CSS, so the rules that govern CSS also apply to Sass.</p>
<p>Consider what happens when a selector tries to extend a selector with a higher specificity:</p>
<pre class="highlight"><code class="scss"><span class="comment">/* The Sass */</span>
<span class="class">.button</span> {
  <span class="attribute">border</span><span class="value">: thin solid black;</span>
  <span class="attribute">background-color</span><span class="value">: gray;</span>
}
<span class="tag">a</span> {
  <span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .button</span>;</span>
  <span class="attribute">background-color</span><span class="value">: blue;</span>
}</code></pre><pre class="highlight"><code class="css"><span class="comment">/* The CSS */</span>
<span class="class">.button</span>, <span class="tag">a</span> <span class="rules">{
  <span class="rule"><span class="attribute">border</span>:<span class="value"> thin solid black</span></span>;
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> gray</span></span>;
<span class="rule">}</span></span>
<span class="tag">a</span> <span class="rules">{
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;
<span class="rule">}</span></span></code></pre><p>The above code tries to turn all links into buttons but with a background color of <code>blue</code>. However, this won’t work. The selector <code>.button</code> has a higher specificity than the selector <code>a</code> and even though Sass will properly append <code>a</code> to all <code>.button</code> declarations, the normal CSS cascade will prevent this from working like you’d expect.</p>
<p>Any native inheritance in CSS must account for specificity.</p>
<h3 id="it-can-t-account-for-source-order">It Can’t Account for Source Order</h3>
<p>Similar to the example above, the following code is valid Sass, but it won’t work as expected:</p>
<pre class="highlight"><code class="scss"><span class="comment">/* The Sass */</span>
<span class="class">.button-extended</span> {
  <span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .button</span>;</span>
  <span class="attribute">background-color</span><span class="value">: blue
}
.button {
  border: <span class="number">1</span>px solid black;</span>
  <span class="attribute">background-color</span><span class="value">: gray;</span>
}</code></pre><pre class="highlight"><code class="css"><span class="comment">/* The CSS */</span>
<span class="class">.button-extended</span> <span class="rules">{
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> blue</span></span>;
<span class="rule">}</span></span>
<span class="class">.button</span>, <span class="class">.button-extended</span> <span class="rules">{
  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1</span>px solid black</span></span>;
  <span class="rule"><span class="attribute">background-color</span>:<span class="value"> gray</span></span>;
<span class="rule">}</span></span></code></pre><p>Source order also matters in CSS, so if you <code>@extend</code> components before you define them, you’ll end up overriding yourself. The cascade strikes again!</p>
<p>Any native inheritance in CSS must account for source order.</p>
<h3 id="it-doesn-t-handle-descendants-or-nested-elements-well">It Doesn’t Handle Descendants or Nested Elements Well</h3>
<p>Consider again the <code>.button</code> class. This time we want to extend it so that when it’s inside modal dialogs it’s a nice glossy button. To do so we use <a href="http://modernizr.com">Modernizr</a> to feature detect box shadow support. The selector looks like this:</p>
<pre class="highlight"><code class="scss"><span class="class">.button</span> { }
<span class="class">.boxshadow</span> <span class="class">.modal</span> <span class="class">.button-fancy</span> {
  <span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .button</span>;</span>
  <span class="comment">/* more styles here */</span>
}</code></pre><p>Then, later in the stylesheet we decide that we want to make <code>.button</code> instances look different when they’re in the footer, so we add this line:</p>
<pre class="highlight"><code class="css"><span class="id">#footer</span> <span class="class">.button</span> <span class="rules">{ <span class="rule">}</span></span></code></pre><p>Now, Sass is very confused. Since there are any number of ways all of this could occur, it must include selector combinations for all of them. To the developer, it’s obvious that the Modernizr class <code>.boxshadow</code> should always be first in the selector sequence. It’s also obvious that a button that’s inside a modal dialog will never also be in the footer, but Sass can’t know that. It must account for all the possibilities:</p>
<pre class="highlight"><code class="css"><span class="id">#footer</span> <span class="class">.boxshadow</span> <span class="class">.modal</span> <span class="class">.button-fancy</span>,
<span class="class">.boxshadow</span> <span class="id">#footer</span> <span class="class">.modal</span> <span class="class">.button-fancy</span>,
<span class="class">.boxshadow</span> <span class="class">.modal</span> <span class="id">#footer</span> <span class="class">.button-fancy</span> <span class="rules">{ <span class="rule">}</span></span></code></pre><p>And that’s just two selectors. Obviously, things become quite a bit more complicated as the numbers get higher.</p>
<p>The same is true when the class you extend can be nested inside itself. In OOCSS, the classic example of this is <a href="http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/">the media object</a> which can be nested multiple levels deep without breaking.</p>
<p>Nestable components aren’t an uncommon requirement in CSS, but when you try to <code>@extend</code> components that you’re also nesting in selectors, you get some pretty ugly generated CSS. Consider the following:</p>
<pre class="highlight"><code class="scss"><span class="comment">/* The Sass */</span>
<span class="class">.media</span> {
  <span class="comment">/* media styles */</span>
}
<span class="class">.media</span> <span class="class">.media</span> <span class="class">.media</span> {
  <span class="comment">/* styles when nested */</span>
}
<span class="id">#submit</span> {
  <span class="at_rule">@<span class="keyword">extend</span><span class="preprocessor"> .media</span>;</span>
  <span class="comment">/* #submit styles */</span>
}</code></pre><pre class="highlight"><code class="css"><span class="comment">/* The CSS */</span>
<span class="class">.media</span>, <span class="id">#submit</span> <span class="rules">{
  <span class="comment">/* media styles */</span>
<span class="rule">}</span></span>
<span class="class">.media</span> <span class="class">.media</span> <span class="class">.media</span>,
<span class="id">#submit</span> <span class="class">.media</span> <span class="class">.media</span>,
<span class="class">.media</span> <span class="id">#submit</span> <span class="class">.media</span>,
<span class="id">#submit</span> <span class="id">#submit</span> <span class="class">.media</span>,
<span class="class">.media</span> <span class="class">.media</span> <span class="id">#submit</span>,
<span class="id">#submit</span> <span class="class">.media</span> <span class="id">#submit</span>,
<span class="class">.media</span> <span class="id">#submit</span> <span class="id">#submit</span>,
<span class="id">#submit</span> <span class="id">#submit</span> <span class="id">#submit</span> <span class="rules">{
  <span class="comment">/* styles when nested */</span>
<span class="rule">}</span></span>
<span class="id">#submit</span> <span class="rules">{
  <span class="comment">/* #submit styles */</span>
<span class="rule">}</span></span></code></pre><p>Again, the problem is that Sass must account for every possible permutation of these elements in the HTML.</p>
<p>A native solution to class inheritance wouldn’t have this problem because it wouldn’t have to generate CSS selectors at compile time; rather, the browser would do the matching at runtime.</p>
<h2 id="the-proposal">The Proposal</h2>
<p>CSS should have its own way to define class inheritance. It should be simple and declarative, and as simply CSS, it would be natively supported by the browser and therefore accessible to JavaScript APIs.</p>
<p>Any native solution should meet some minimum requirements, and I think the above list of <code>@extend</code>‘s shortcomings is a good place to start.</p>
<ul>
<li>It should work no matter where it’s defined (including media queries)</li>
<li>It should expose the inheritance chain to JavaScript APIs</li>
<li>It should not be affected by specificity or source order</li>
<li>It should easily handle descendants, nested elements, and other complex selectors</li>
<li>It should allow for multiple levels of inheritance</li>
</ul>
<p>My proposal for native OOCSS introduces two new features: a new kind of simple selector and a new <code>@</code> rule.</p>
<p>The new simple selector would be called the “abstract class selector”. It would be a class name prepended with a percent sign (<code>%</code>) similar to Sass’s placeholder syntax. The abstract class selector would match any element that inherits or extends from it. The new <code>@</code> rule would be used to declare the inheritance. Here is an example:</p>
<pre class="highlight"><code>%button {
  background-color: gray;
  border: thin solid black;
}
.button-primary {
  background-color: blue;
}

@extend .button &lt; %button;
@extend .button-primary &lt; %button;</code></pre><p>This code defines how any class that extends from button would look. It then declares that the class selectors <code>.button</code> and <code>.button-primary</code> both inherit from <code>%button</code>.</p>
<h3 id="using-abstract-class-selectors">Using Abstract Class Selectors</h3>
<p>Since an abstract class selector would be just another simple selector, it could be used in any way a simple selector can be used today. You could apply pseudo classes to it, have it nested between other selectors, or put it in media queries.</p>
<p>All of the following would be valid uses of the abstract class selector:</p>
<pre class="highlight"><code>%foo { }
%foo %bar { }
%baz:first-of-type { }
#sidebar %foo { }
a:not(%button) { }
@media (max-width: 30em) {
  %foo { }
}</code></pre><h3 id="the-inheritance-chain">The Inheritance Chain</h3>
<p>How you write the markup would remain unchanged. You wouldn’t put an abstract class on an HTML element because JavaScript APIs could leverage the abstract class selector. Here’s an example:</p>
<pre class="highlight"><code class="xml"><span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"button"</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
<span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"#"</span> <span class="attribute">class</span>=<span class="value">"button-primary"</span>&gt;</span>No, Click Me<span class="tag">&lt;/<span class="title">a</span>&gt;</span></code></pre><p>These elements could be targeted via JavaScript like so:</p>
<pre class="highlight"><code class="javascript"><span class="comment">// Matches both elements above</span>
document.querySelectorAll(<span class="string">"%button"</span>);</code></pre><p>There could also be additional methods added to the DOM API to make determining inheritance easier. Here are a few suggestions, but I’d anticipate many more:</p>
<pre class="highlight"><code class="javascript"><span class="comment">// we currently get the class list this way</span>
element.classList;

<span class="comment">// we could get the inheritance chain this way</span>
element.abstractClassList;

<span class="comment">// And we could detect type like so</span>
element.matchesSelector(<span class="string">"%base-class"</span>);</code></pre><h3 id="the-specificity-value-of-an-abstract-class-selector">The Specificity Value of an Abstract Class Selector</h3>
<p>The abstract class selector would have a specificity less than a class selector but greater than a type selector (a single tag). This would allow for all normally defined class selectors to override all abstract class selectors, which solves both the source order and specificity issues at the same time.</p>
<p>All other rules of specificity would apply normally, including the use of <code>!important</code> to override a property value in a class selector the same way a class selector can currently override a property value in an id selector.</p>
<h3 id="multiple-levels-of-inheritance">Multiple Levels of Inheritance</h3>
<p>Abstract class selectors should be able to extend other abstract class selectors as well. This could allow for a very rich component hierarchy:</p>
<pre class="highlight"><code>@extend %widget &lt; %base-widget;
@extend .my-widget &lt; %widget;</code></pre><p>For <code>@extend</code> declarations, the object on the left can be either a class selector or an abstract class selector, but the object on the right must be an abstract class selector. Non-abstract classes should never be able to extend other non-abstract classes or we’d end up with the same problems we already have with specificity and source order in Sass.</p>
<h2 id="a-simple-example-building-a-grid">A Simple Example: Building a Grid</h2>
<p>To demonstrate how abstract class selectors could be used in a real project, let’s build a simple grid system. Grid systems are quite useful but often come under fire for the presentational nature of their class names. With the help of abstract class selectors, this problem can be solved.</p>
<p>Here is the CSS for the skeleton grid system:</p>
<pre class="highlight"><code>/* define a clearfix abstract class */
%clearfix {
  /* clearfix implementation */
}

/* grid rows extend clearfix so their cells are contained */
@extend %grid-row &lt; %clearfix;
%grid-row {
  margin-left: -2em; /* contain leftmost gutter */
}

/* base grid-cell abstract class */
%grid-cell {
  float: left;
  margin-left: 2em; /* gutter */
}

@extend %grid-cell-1-2 &lt; %grid-cell;
%grid-cell-1-2 {
  width: calc(50% - 2em);
}

@extend %grid-cell-1-3 &lt; %grid-cell;
%grid-cell-1-3 {
  width: calc(33.333% - 2em);
}

@extend %grid-cell-1-4 &lt; %grid-cell;
%grid-cell-1-4 {
  width: calc(25% - 2em);
}</code></pre><p>Now that we have our base grid system, we can extend from it to build a basic site layout. Let’s build a site with a header, footer, and content area with three columns, the center column being half the width and the left and right columns each being a quarter.</p>
<pre class="highlight"><code class="xml"><span class="tag">&lt;<span class="title">header</span>&gt;</span>...<span class="tag">&lt;/<span class="title">header</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"main"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">nav</span> <span class="attribute">class</span>=<span class="value">"menu"</span>&gt;</span>...<span class="tag">&lt;/<span class="title">nav</span>&gt;</span>
  <span class="tag">&lt;<span class="title">article</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span>...<span class="tag">&lt;/<span class="title">article</span>&gt;</span>
  <span class="tag">&lt;<span class="title">aside</span> <span class="attribute">class</span>=<span class="value">"promotional"</span>&gt;</span>...<span class="tag">&lt;/<span class="title">aside</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="title">footer</span>&gt;</span></code></pre><p>We can easily use our base grid to style the above markup by simply extending a few of the abstract classes.</p>
<pre class="highlight"><code>@extend .main &lt; %grid-row;
@extend .menu &lt; %grid-col-1-4;
@extend .content &lt; %grid-col-1-2;
@extend .promotional &lt; %grid-col-1-4;

.menu {
  /* menu styles */
}
.content {
  /* content styles */
}
.promotional {
  /* promotional styles */
}</code></pre><p>If we want our grid system to be responsive, we can use a media query to make each cell full width when the screen is smaller than <code>30em</code>. Notice that we’re only modifying the abstract class selectors in this media query (which the <code>.menu</code>, <code>.content</code>, and <code>.promotional</code> class selectors will automatically inherit).</p>
<pre class="highlight"><code>@media (max-width: 30em) {
  %grid-row {
    margin-left: 0;
  }
  %grid-cell {
    float: none;
    width: auto;
    margin-left: 0;
  }
}</code></pre><p>Lastly, if we wanted to make the columns sortable with some jQuery plugin, we could easily target them the same way in JavaScript:</p>
<pre class="highlight"><code class="javascript"><span class="comment">// select all elements that inherit from %grid-cell</span>
$(<span class="string">"%grid-cell"</span>).sortable();</code></pre><h2 id="summary">Summary</h2>
<p>Hopefully this article has helped show just how powerful native class inheritance in CSS could be. Obviously, this is just my opinion and one possible implementation. I’m very interested to hear feedback from others who have also struggled with these problems.</p>
<p>I think we as a community should be pushing the boundaries of our core technologies. Tools help bridge the gaps, but native support is the future.</p>
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://github.com/stubbornella/oocss/wiki">OOCSS</a></li>
<li><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend">Sass’s @extend feature</a></li>
<li><a href="http://www.w3.org/TR/CSS21/cascade.html#specificity">CSS Specificity</a></li>
</ul>

  </div>

  <footer class="entry-unrelated">

    <div class="Share">
      <span class="Share-figure">
        <svg viewBox="0 0 39 32">
          <use xlink:href="#icon-twitter-bird"></use>
        </svg>
      </span>
      <p class="Share-pitch">
        If you liked this article and think others should read it, please
        <a data-social-network="Twitter"
           data-social-action="tweet"
           href="http://twitter.com/intent/tweet?text=The%20Future%20of%20OOCSS%3A%20A%20Proposal&amp;url=http%3A%2F%2Fphilipwalton.com%2Farticles%2Fthe-future-of-oocss-a-proposal%2F&amp;via=philwalton">share it on Twitter</a>.
      </p>
    </div>

  </footer>

</article>

      </main>
    </div>

    <script>
(function(window, document, location) {
  (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = function(element, event, fn) {
  if (element.addEventListener) {
    element.addEventListener(event, fn, false);
  }
  else {
    element.attachEvent('on' + event, fn);
  }
};

},{}],2:[function(require,module,exports){
/* global ga */

var linkClicked = require('./link-clicked');
var History2 = require('./history2');
var parseUrl = require('./parse-url');

// Cache the container element to avoid multiple lookups.
var container;

// Store the result of page content requests to avoid multiple
// lookups when navigation to a previously seen page.
var pageCache = {};


function getTitle(a) {
  var title = a.title || a.innerText;
  return title ? title + ' \u2014 Philip Walton' : null;
}


function loadPageContent(done) {
  var path = this.nextPage.path;

  if (pageCache[path]) return done();

  var basename = /(\w+)\.html$/;
  var url = basename.test(path) ?
      path.replace(basename, '_$1.html') : path + '_index.html';

  var xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 400) {
      pageCache[path] = xhr.responseText;
      done();
    }
    else {
      done(new Error('(' + xhr.status + ') ' + xhr.response));
    }
  };
  xhr.onerror = function() {
    done(new Error('Error making request to:' + url));
  };
  xhr.send();
}


function showPageContent() {
  var content = pageCache[this.nextPage.path];
  container.innerHTML = content;
}


function setScroll() {
  var hash = this.nextPage.hash;
  if (hash) {
    var target = document.getElementById(hash.slice(1));
  }
  var scrollPos = target ? target.offsetTop : 0;

  // TODO: There's a weird chrome bug were sometime this function
  // doesn't do anything if Chrome has already visited this page and
  // thinks it has a scroll position in mind. Just chrome, weird...
  window.scrollTo(0, scrollPos);
}


function trackPage() {
  ga('set', {
    location: this.nextPage.href,
    title: this.nextPage.title
  });
  ga('send', 'pageview');

}


function trackError(error) {
  var url = this.nextPage.href;
  ga('send', 'exception', {
    exDescription: error.stack || error.message,
    exFatal: false,
    hitCallback: function() {
      // If there's an error, attempt to manually navigation to the
      // page. If that fails Github pages will show the actual 404 page.
      location.href = url;
    }
  });
}


module.exports = {

  init: function() {

    // Only load external content via AJAX if the browser support pushState.
    if (!(window.history && window.history.pushState)) return;

    // Add the current page to the cache.
    container = document.querySelector('main');
    pageCache[location.pathname] = container.innerHTML;


    var history2 = new History2()
        .use(loadPageContent)
        .use(showPageContent)
        .use(setScroll)
        .use(trackPage)
        ['catch'](trackError);

    linkClicked(function(event) {

      // Don't attempt to AJAX in content if the link was click
      // while the command (meta) or control key was pressed.
      if (event.metaKey || event.ctrlKey) return;

      var page = parseUrl(location.href);
      var link = parseUrl(this.href);

      // Don't do anything when clicking on links to the current URL.
      if (link.href == page.href) event.preventDefault();

      // If the clicked link is on the same site but has a different path,
      // prevent the browser from navigating there and load the page via ajax.
      if ((link.origin == page.origin) && (link.path != page.path)) {
        event.preventDefault();
        history2.add(link.href, getTitle(this));
      }
    });
  }
};

},{"./history2":3,"./link-clicked":4,"./parse-url":7}],3:[function(require,module,exports){
var parseUrl = require('./parse-url');

function History2() {

  // Store the current url information.
  this.currentPage = parseUrl(window.location.href);
  this.currentPage.title = document.title;

  // Add history state initially so the first `popstate` event contains data.
  history.replaceState(
      this.currentPage,
      this.currentPage.title,
      this.currentPage.href);

  this._queue = [];

  // Listen for popstate changes and log them.
  window.addEventListener('popstate', function(event) {
    var state = event.state;
    var title = state && state.title;
    this.add(window.location.href, title, state, event);
  }.bind(this));
}


History2.prototype.add = function(url, title, state, event) {

  // Ignore urls pointing to the current address
  if (url == this.currentPage.href) return;

  this.nextPage = parseUrl(url);
  this.nextPage.title = title;
  this.nextPage.state = state;

  this._processQueue(event);
};


/**
 * Register a plugin with the History2 instance.
 * @param {Function(History2, done)} - A plugin that runs some task and
 *     informs the next plugin in the queue when it's done.
 */
History2.prototype.use = function(plugin) {
  this._queue.push(plugin);

  return this;
};

/**
 * Register a handler to catch any errors.
 * Note: In ES3 reserved words like "catch" couldn't be used as property names:
 * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names
 * @param {Function(Error)} - The function to handle the error.
 */
History2.prototype['catch'] = function(onError) {
  this._onError = onError;

  return this;
};


History2.prototype._onError = function(error) {
  // Left blank so calling `_onError` never fails.
  console.error(error.stack);
};


History2.prototype._onComplete = function(event) {

  // Popstate triggered navigation is already handled by the browser,
  // so we only add to the history in non-popstate cases.
  if (!(event && event.type == 'popstate')) {
    history.pushState(
        this.nextPage,
        this.nextPage.title,
        this.nextPage.href);
  }

  if (this.nextPage.title) document.title = this.nextPage.title;

  // Update the last url to the current url
  this.currentPage = this.nextPage;
  this.nextPage = null;
};


History2.prototype._processQueue = function(event) {
  var self = this;
  var i = 0;

  (function next() {

    var plugin = self._queue[i++];
    var isSync = plugin && !plugin.length;

    if (!plugin) return self._onComplete(event);

    // The callback for async plugins.
    function done(error) {
      if (error) {
        self._onError(error);
      }
      else {
        next();
      }
    }

    try {
      plugin.apply(self, isSync ? [] : [done]);
    }
    catch(error) {
      return self._onError(error);
    }

    // Sync plugins are done by now and can immediately process
    // the next item in the queue.
    if (isSync) next();

  }());
};


module.exports = History2;

},{"./parse-url":7}],4:[function(require,module,exports){
var addListener = require('./add-listener');

function isLink(el) {
  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;
}

function getLinkAncestor(el) {
  if (isLink(el)) return el;
  while (el.parentNode && el.parentNode.nodeType == 1) {
    if (isLink(el)) return el;
    el = el.parentNode;
  }
}

module.exports = function(fn) {
  addListener(document, 'click', function(event) {
    var e = event || window.event;
    var target = e.target || e.srcElement;
    var link = getLinkAncestor(target);
    if (link) {
      fn.call(link, e);
    }
  });
};

},{"./add-listener":1}],5:[function(require,module,exports){
var supports = require('./supports');
var outboundLinks = require('./outbound-links');
var socialInteractions = require('./social-interactions');
var contentLoader = require('./content-loader');


// Add an `is-legacy` class on browsers that don't supports flexbox.
if (!supports.flexbox()) {
  document.documentElement.className += ' is-legacy';
}


// Track when the user clicks a link to an external site.
outboundLinks.track();


// Track when the user clicks a social link.
socialInteractions.track();


// Load links via AJAX instead of full page loads in browsers with pushState.
contentLoader.init();

},{"./content-loader":2,"./outbound-links":6,"./social-interactions":8,"./supports":9}],6:[function(require,module,exports){
/* global ga */

var parseUrl = require('./parse-url');
var linkClicked = require('./link-clicked');

function isExternalLink(link) {
  var url = parseUrl(link.href);
  var loc = parseUrl(location.href);
  return url.origin != loc.origin;
}

module.exports = {
  track: function() {
    linkClicked(function() {
      if (isExternalLink(this)) {

        // Opening links in an external tabs allows the ga beacon to send.
        // When following links directly, sometimes they don't make it.
        this.target = '_blank';

        ga('send', 'event', 'Outbound Link', 'click', this.href);
      }
    });

  }
};


},{"./link-clicked":4,"./parse-url":7}],7:[function(require,module,exports){
var a = document.createElement('a');
var cache = {};

/**
 * Parse the given url and return the properties returned
 * by the `Location` object.
 * @param {string} url - The url to parse.
 * @return {Object} An object with the same keys as `window.location`.
 */
module.exports = function(url) {

  if (cache[url]) return cache[url];

  var httpPort = /:80$/;
  var httpsPort = /:443/;

  a.href = url;

  // Sometimes IE will return no port or just a colon, especially for things
  // like relative port URLs (e.g. "//google.com").
  var protocol = !a.protocol || ':' == a.protocol ?
      location.protocol : a.protocol;

  // Don't include default ports.
  var port = (a.port == '80' || a.port == '443') ? '' : a.port;

  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even
  // when no port is specified in the URL.
  // http://bit.ly/1rQNoMg
  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');

  // Not all browser support `origin` so we have to build it.
  var origin = a.origin ? a.origin : protocol + '//' + host;

  // Sometimes IE doesn't include the leading slash for pathname.
  // http://bit.ly/1rQNoMg
  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;

  return cache[url] = {
    hash: a.hash,
    host: host,
    hostname: a.hostname,
    href: a.href,
    origin: origin,
    path: pathname + a.search,
    pathname: pathname,
    port: port,
    protocol: protocol,
    search: a.search
  };
};

},{}],8:[function(require,module,exports){
/* global ga */

var linkClicked = require('./link-clicked');

module.exports = {
  track: function() {
    linkClicked(function() {
      var socialNetwork = this.getAttribute('data-social-network');
      if (socialNetwork) {
        var socialAction = this.getAttribute('data-social-action');
        var socialTarget = location.href;

        // Opening links in an external tabs allows the ga beacon to send.
        // When following links directly, sometimes they don't make it.
        this.target = '_blank';

        ga('send', 'social', socialNetwork, socialAction, socialTarget);
      }
    });
  }
};

},{"./link-clicked":4}],9:[function(require,module,exports){
var supports = {};
var style = document.body.style;

module.exports = {
  flexbox: function() {
    return supports.flexbox || (supports.flexbox = ('flexBasis' in style ||
        'msFlexAlign' in style || 'webkitBoxDirection' in style));
  }
};

},{}]},{},[5]);

}(window, document, location));
</script>

<!-- Load GA after the `window.ga` is initialized or you'll get errors. -->


  <script async src="//www.google-analytics.com/analytics_debug.js"></script>



  </body>
</html>
