!function t(e,i,n){function r(a,s){if(!i[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){"use strict";t("autotrack/lib/plugins/media-query-tracker"),t("autotrack/lib/plugins/outbound-link-tracker"),t("autotrack/lib/plugins/page-visibility-tracker"),t("autotrack/lib/plugins/social-tracker")},{"autotrack/lib/plugins/media-query-tracker":7,"autotrack/lib/plugins/outbound-link-tracker":8,"autotrack/lib/plugins/page-visibility-tracker":9,"autotrack/lib/plugins/social-tracker":10}],2:[function(t,e,i){"use strict";function n(t){var e=t.title||t.innerText;return e?e+" â€” Philip Walton":null}function r(t){var e=this.nextPage.path;if(v[e])return t();var i=/(\w+)\.html$/,n=i.test(e)?e.replace(i,"_$1.html"):e+"_index.html",r=new XMLHttpRequest;r.open("GET",n),r.onload=function(){r.status>=200&&r.status<400?(v[e]=r.responseText,t()):t(new Error("("+r.status+") "+r.response))},r.onerror=function(){t(new Error("Error making request to:"+n))},r.send()}function o(){var t=v[this.nextPage.path];u.innerHTML=t}function a(){f.close()}function s(){var t=this.nextPage.hash;if(t)var e=document.getElementById(t.slice(1));var i=e?e.offsetTop:0;window.scrollTo(0,i)}function c(){ga("send","pageview",{dimension4:"urlChangeTracker"})}function l(t){ga("send","exception",{exDescription:t.stack||t.message})}var u,d=t("dom-utils/lib/delegate"),h=t("dom-utils/lib/parse-url"),p=t("./history2"),f=t("./drawer"),v={};e.exports={init:function(){if(window.history&&window.history.pushState){u=document.querySelector("main"),v[location.pathname]=u.innerHTML;var t=(new p).use(r).use(o).use(a).use(s).use(c)["catch"](l);d(document,"click","a[href]",function(e){if(!(e.metaKey||e.ctrlKey||e.which>1)){var i=h(location.href),r=h(this.href);r.href==i.href&&e.preventDefault(),r.origin==i.origin&&r.path!=i.path&&(e.preventDefault(),t.add(r.href,n(this)))}})}}}},{"./drawer":3,"./history2":4,"dom-utils/lib/delegate":18,"dom-utils/lib/parse-url":21}],3:[function(t,e,i){"use strict";function n(t,e){var i=t.className;return i?void(i.indexOf(e)>-1||(t.className=i+" "+e)):void(t.className=e)}function r(t,e){var i=t.className;if(!(i.indexOf(e)<0)){for(var n=i.split(/\s/),r=[],o=0,a=n.length;a>o;o++)e!=n[o]&&r.push(n[o]);r.length?t.className=r.join(" "):t.removeAttribute("class")}}function o(t){t.preventDefault(),d?c():s()}function a(t){d&&!l(t.target,"#drawer-container",!0)&&c()}function s(){d=!0,n(document.documentElement,"is-drawerOpen")}function c(){d=!1,r(document.documentElement,"is-drawerOpen")}var l=t("dom-utils/lib/closest"),u=(document.getElementById("drawer-container"),document.getElementById("drawer-toggle")),d=!1;e.exports={init:function(){u.addEventListener("click",o),u.addEventListener("touchend",o),document.addEventListener("click",a),document.addEventListener("touchend",a)},open:s,close:c}},{"dom-utils/lib/closest":17}],4:[function(t,e,i){"use strict";function n(){this.currentPage=r(window.location.href),this.currentPage.title=document.title,history.replaceState(this.currentPage,this.currentPage.title,this.currentPage.href),this._queue=[];var t=this;window.addEventListener("popstate",function(e){var i=e.state,n=i&&i.title;t.add(window.location.href,n,i,e)})}var r=t("dom-utils/lib/parse-url");n.prototype.add=function(t,e,i,n){t!=this.currentPage.href&&(this.nextPage=r(t),this.nextPage.title=e,this.nextPage.state=i,this._processQueue(n))},n.prototype.use=function(t){return this._queue.push(t),this},n.prototype["catch"]=function(t){return this._onError=t,this},n.prototype._onError=function(t){console.error(t.stack)},n.prototype._onComplete=function(t){this.nextPage.title&&(document.title=this.nextPage.title),t&&"popstate"==t.type||history.pushState(this.nextPage,this.nextPage.title,this.nextPage.href),this.currentPage=this.nextPage,this.nextPage=null},n.prototype._processQueue=function(t){var e=this,i=0;!function n(){function r(t){t?e._onError(t):n()}var o=e._queue[i++],a=o&&!o.length;if(!o)return e._onComplete(t);try{o.apply(e,a?[]:[r])}catch(s){return e._onError(s)}a&&n()}()},e.exports=n},{"dom-utils/lib/parse-url":21}],5:[function(t,e,i){"use strict";t("./analytics"),t("./content-loader").init(),t("./drawer").init()},{"./analytics":1,"./content-loader":2,"./drawer":3}],6:[function(t,e,i){e.exports={DEV_ID:"i5iSjo"}},{}],7:[function(t,e,i){function n(t,e){window.matchMedia&&(this.opts=a(e,{mediaQueryDefinitions:!1,mediaQueryChangeTemplate:this.changeTemplate,mediaQueryChangeTimeout:1e3}),s(this.opts.mediaQueryDefinitions)&&(this.opts.mediaQueryDefinitions=c(this.opts.mediaQueryDefinitions),this.tracker=t,this.changeListeners=[],this.processMediaQueries()))}function r(t){return d[t]?d[t]:(d[t]=window.matchMedia(t),d[t])}var o=t("debounce"),a=t("../utilities").defaults,s=t("../utilities").isObject,c=t("../utilities").toArray,l=t("../provide"),u="(not set)",d={};n.prototype.processMediaQueries=function(){this.opts.mediaQueryDefinitions.forEach(function(t){if(!t.dimensionIndex)throw new Error("Media query definitions must have a name.");if(!t.dimensionIndex)throw new Error("Media query definitions must have a dimension index.");var e=this.getMatchName(t);this.tracker.set("dimension"+t.dimensionIndex,e),this.addChangeListeners(t)}.bind(this))},n.prototype.getMatchName=function(t){var e;return t.items.forEach(function(t){r(t.media).matches&&(e=t)}),e?e.name:u},n.prototype.addChangeListeners=function(t){t.items.forEach(function(e){var i=r(e.media),n=o(function(){this.handleChanges(t)}.bind(this),this.opts.mediaQueryChangeTimeout);i.addListener(n),this.changeListeners.push({mql:i,fn:n})}.bind(this))},n.prototype.handleChanges=function(t){var e=this.getMatchName(t),i=this.tracker.get("dimension"+t.dimensionIndex);e!==i&&(this.tracker.set("dimension"+t.dimensionIndex,e),this.tracker.send("event",t.name,"change",this.opts.mediaQueryChangeTemplate(i,e)))},n.prototype.remove=function(){for(var t,e=0;t=this.changeListeners[e];e++)t.mql.removeListener(t.fn);this.changeListeners=null,this.tracker=null,this.opts=null},n.prototype.changeTemplate=function(t,e){return t+" => "+e},l("mediaQueryTracker",n)},{"../provide":11,"../utilities":12,debounce:15}],8:[function(t,e,i){function n(t,e){window.addEventListener&&(this.opts=r(e,{shouldTrackOutboundLink:this.shouldTrackOutboundLink}),this.tracker=t,this.delegate=o(document,"a","click",this.handleLinkClicks.bind(this)))}var r=t("../utilities").defaults,o=t("delegate"),a=t("../provide");n.prototype.handleLinkClicks=function(t){var e=t.delegateTarget;this.opts.shouldTrackOutboundLink(e)&&(navigator.sendBeacon||(e.target="_blank"),this.tracker.send("event","Outbound Link","click",e.href,{transport:"beacon"}))},n.prototype.shouldTrackOutboundLink=function(t){return t.hostname!=location.hostname},n.prototype.remove=function(){this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null},a("outboundLinkTracker",n)},{"../provide":11,"../utilities":12,delegate:16}],9:[function(t,e,i){function n(t,e){window.addEventListener&&(this.opts=r(e,{sessionTimeout:s,virtualPageviewFields:{}}),this.tracker=t,this.handleVisibilityStateChange=this.handleVisibilityStateChange.bind(this),this.overrideTrackerSendMethod(),this.overrideTrackerSendHitTask(),document.addEventListener("visibilitychange",this.handleVisibilityStateChange))}var r=t("../utilities").defaults,o=t("../utilities").isObject,a=t("../provide"),s=30;n.prototype.handleVisibilityStateChange=function(){var t=document.visibilityState;if(this.sessionHasTimedOut()){if("hidden"==t)return;"visible"==t&&this.tracker.send("pageview",this.opts.virtualPageviewFields)}else this.tracker.send("event",{eventCategory:"Page Visibility",eventAction:"change",eventLabel:document.visibilityState,transport:"beacon"})},n.prototype.sessionHasTimedOut=function(){var t=(new Date-this.lastHitTime)/6e4;return this.opts.sessionTimeout<t},n.prototype.overrideTrackerSendMethod=function(){this.originalTrackerSendMethod=this.tracker.send,this.tracker.send=function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=o(e)?e.hitType:e,n="pageview"==i;!n&&this.sessionHasTimedOut()&&this.originalTrackerSendMethod.call(this.tracker,"pageview",this.opts.virtualPageviewFields),this.originalTrackerSendMethod.apply(this.tracker,t)}.bind(this)},n.prototype.overrideTrackerSendHitTask=function(){this.originalTrackerSendHitTask=this.tracker.get("sendHitTask"),this.lastHitTime=+new Date,this.tracker.set("sendHitTask",function(t){this.originalTrackerSendHitTask(t),this.lastHitTime=+new Date}.bind(this))},n.prototype.remove=function(){this.tracker.set("sendHitTask",this.originalTrackerSendHitTask),this.tracker.send=this.originalTrackerSendMethod,document.removeEventListener("visibilitychange",this.handleVisibilityStateChange),this.tracker=null,this.opts=null,this.originalTrackerSendHitTask=null,this.originalTrackerSendMethod=null,this.handleVisibilityStateChange=null,this.lastHitTime=null},a("pageVisibilityTracker",n)},{"../provide":11,"../utilities":12}],10:[function(t,e,i){function n(t,e){if(window.addEventListener){this.opts=r(e,{attributePrefix:"data-"}),this.tracker=t;var i=this.opts.attributePrefix,n="["+i+"social-network]["+i+"social-action]["+i+"social-target]";this.handleSocialClicks=this.handleSocialClicks.bind(this),this.addWidgetListeners=this.addWidgetListeners.bind(this),this.addTwitterEventHandlers=this.addTwitterEventHandlers.bind(this),this.handleTweetEvents=this.handleTweetEvents.bind(this),this.handleFollowEvents=this.handleFollowEvents.bind(this),this.handleLikeEvents=this.handleLikeEvents.bind(this),this.handleUnlikeEvents=this.handleUnlikeEvents.bind(this),this.delegate=o(document,n,"click",this.handleSocialClicks),"complete"!=document.readyState?window.addEventListener("load",this.addWidgetListeners):this.addWidgetListeners()}}var r=t("../utilities").defaults,o=t("delegate"),a=t("../provide");n.prototype.addWidgetListeners=function(){window.FB&&this.addFacebookEventHandlers(),window.twttr&&this.addTwitterEventHandlers()},n.prototype.handleSocialClicks=function(t){var e=t.delegateTarget,i=this.opts.attributePrefix;this.tracker.send("social",{socialNetwork:e.getAttribute(i+"social-network"),socialAction:e.getAttribute(i+"social-action"),socialTarget:e.getAttribute(i+"social-target")})},n.prototype.addTwitterEventHandlers=function(){try{twttr.ready(function(){twttr.events.bind("tweet",this.handleTweetEvents),twttr.events.bind("follow",this.handleFollowEvents)}.bind(this))}catch(t){}},n.prototype.removeTwitterEventHandlers=function(){try{twttr.ready(function(){twttr.events.unbind("tweet",this.handleTweetEvents),twttr.events.unbind("follow",this.handleFollowEvents)}.bind(this))}catch(t){}},n.prototype.addFacebookEventHandlers=function(){try{FB.Event.subscribe("edge.create",this.handleLikeEvents),FB.Event.subscribe("edge.remove",this.handleUnlikeEvents)}catch(t){}},n.prototype.removeFacebookEventHandlers=function(){try{FB.Event.unsubscribe("edge.create",this.handleLikeEvents),FB.Event.unsubscribe("edge.remove",this.handleUnlikeEvents)}catch(t){}},n.prototype.handleTweetEvents=function(t){if("tweet"==t.region){var e=t.data.url||t.target.getAttribute("data-url")||location.href;this.tracker.send("social","Twitter","tweet",e)}},n.prototype.handleFollowEvents=function(t){if("follow"==t.region){var e=t.data.screen_name||t.target.getAttribute("data-screen-name");this.tracker.send("social","Twitter","follow",e)}},n.prototype.handleLikeEvents=function(t){this.tracker.send("social","Facebook","like",t)},n.prototype.handleUnlikeEvents=function(t){this.tracker.send("social","Facebook","unlike",t)},n.prototype.remove=function(){window.removeEventListener("load",this.addWidgetListeners),this.removeFacebookEventHandlers(),this.removeTwitterEventHandlers(),this.delegate.destroy(),this.delegate=null,this.tracker=null,this.opts=null,this.handleSocialClicks=null,this.addWidgetListeners=null,this.addTwitterEventHandlers=null,this.handleTweetEvents=null,this.handleFollowEvents=null,this.handleLikeEvents=null,this.handleUnlikeEvents=null},a("socialTracker",n)},{"../provide":11,"../utilities":12,delegate:16}],11:[function(t,e,i){var n=t("./constants"),r=t("./utilities");(window.gaDevIds=window.gaDevIds||[]).push(n.DEV_ID),e.exports=function(t,e){var i=window.GoogleAnalyticsObject||"ga";window[i]=window[i]||function(){(window[i].q=window[i].q||[]).push(arguments)},window[i]("provide",t,e),window.gaplugins=window.gaplugins||{},window.gaplugins[r.capitalize(t)]=e}},{"./constants":6,"./utilities":12}],12:[function(t,e,i){var n={withTimeout:function(t,e){var i=!1;return setTimeout(t,e||2e3),function(){i||(i=!0,t())}},defaults:function(t,e){var i={};"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});for(var n in e)e.hasOwnProperty(n)&&(i[n]=t.hasOwnProperty(n)?t[n]:e[n]);return i},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},isObject:function(t){return"object"==typeof t&&null!==t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},toArray:function(t){return n.isArray(t)?t:[t]}};e.exports=n},{}],13:[function(t,e,i){var n=t("matches-selector");e.exports=function(t,e,i){for(var r=i?t:t.parentNode;r&&r!==document;){if(n(r,e))return r;r=r.parentNode}}},{"matches-selector":22}],14:[function(t,e,i){function n(){return(new Date).getTime()}e.exports=Date.now||n},{}],15:[function(t,e,i){var n=t("date-now");e.exports=function(t,e,i){function r(){var u=n()-c;e>u&&u>0?o=setTimeout(r,e-u):(o=null,i||(l=t.apply(s,a),o||(s=a=null)))}var o,a,s,c,l;return null==e&&(e=100),function(){s=this,a=arguments,c=n();var u=i&&!o;return o||(o=setTimeout(r,e)),u&&(l=t.apply(s,a),s=a=null),l}}},{"date-now":14}],16:[function(t,e,i){function n(t,e,i,n,o){var a=r.apply(this,arguments);return t.addEventListener(i,a,o),{destroy:function(){t.removeEventListener(i,a,o)}}}function r(t,e,i,n){return function(i){i.delegateTarget=o(i.target,e,!0),i.delegateTarget&&n.call(t,i)}}var o=t("closest");e.exports=n},{closest:13}],17:[function(t,e,i){var n=t("./matches"),r=t("./parents");e.exports=function(t,e,i){for(var o,a=(i?[t]:[]).concat(r(t)),s=0;o=a[s];s++)if(n(o,e))return o}},{"./matches":19,"./parents":20}],18:[function(t,e,i){var n=t("./closest"),r=t("./matches");e.exports=function(t,e,i,o,a){a=a||{};var s=function(t){if(a.deep&&"function"==typeof t.deepPath)for(var e,s=t.deepPath(),c=0;e=s[c];c++)1==e.nodeType&&r(e,i)&&(l=e);else var l=n(t.target,i,!0);l&&o.call(l,t,l)};return t.addEventListener(e,s,a.useCapture),{destroy:function(){t.removeEventListener(e,s,a.useCapture)}}}},{"./closest":17,"./matches":19}],19:[function(t,e,i){function n(t,e){if("string"!=typeof e)return!1;if(o)return o.call(t,e);for(var i,n=t.parentNode.querySelectorAll(e),r=0;i=n[r];r++)if(i==t)return!0;return!1}var r=Element.prototype,o=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=function(t,e){if(!e)return!1;if("string"==typeof e||1==e.nodeType)return t==e||n(t,e);if("length"in e)for(var i,r=0;i=e[r];r++)if(t==i||n(t,i))return!0;return!1}},{}],20:[function(t,e,i){e.exports=function(t){for(var e=[];t&&t.parentNode&&1==t.parentNode.nodeType;)e.push(t=t.parentNode);return e}},{}],21:[function(t,e,i){var n="80",r="443",o=document.createElement("a"),a={};e.exports=function s(t){if(t=t&&"."!=t?t:location.href,a[t])return a[t];if(o.href=t,"."==t.charAt(0))return s(o.href);var e=o.protocol&&":"!=o.protocol?o.protocol:location.protocol,i=o.port==n||o.port==r?"":o.port;i="0"==i?"":i;var c=""==o.host?location.host:o.host,l=""==o.hostname?location.hostname:o.hostname;c=c.replace(":"+("http:"==e?n:r),"");var u=o.origin?o.origin:e+"//"+c,d="/"==o.pathname.charAt(0)?o.pathname:"/"+o.pathname;return a[t]={hash:o.hash,host:c,hostname:l,href:o.href,origin:u,pathname:d,port:i,protocol:e,search:o.search,fragment:o.hash.slice(1),path:d+o.search,query:o.search.slice(1)}}},{}],22:[function(t,e,i){function n(t,e){if(o)return o.call(t,e);for(var i=t.parentNode.querySelectorAll(e),n=0;n<i.length;++n)if(i[n]==t)return!0;return!1}var r=Element.prototype,o=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=n},{}]},{},[5]);
//# sourceMappingURL=main.js.map
