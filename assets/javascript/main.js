!function t(e,i,n){function r(o,s){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return r(i?i:t)},d,d.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){"use strict";e.exports=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}},{}],2:[function(t,e,i){"use strict";t("autotrack/lib/plugins/media-query-tracker"),t("autotrack/lib/plugins/outbound-link-tracker"),t("autotrack/lib/plugins/page-visibility-tracker"),t("autotrack/lib/plugins/social-tracker"),t("autotrack/lib/plugins/url-change-tracker")},{"autotrack/lib/plugins/media-query-tracker":10,"autotrack/lib/plugins/outbound-link-tracker":11,"autotrack/lib/plugins/page-visibility-tracker":12,"autotrack/lib/plugins/social-tracker":13,"autotrack/lib/plugins/url-change-tracker":14}],3:[function(t,e,i){"use strict";function n(t){var e=t.title||t.innerText;return e?e+" â€” Philip Walton":null}function r(t){var e=this.nextPage.path;if(f[e])return t();var i=/(\w+)\.html$/,n=i.test(e)?e.replace(i,"_$1.html"):e+"_index.html",r=new XMLHttpRequest;r.open("GET",n),r.onload=function(){r.status>=200&&r.status<400?(f[e]=r.responseText,t()):t(new Error("("+r.status+") "+r.response))},r.onerror=function(){t(new Error("Error making request to:"+n))},r.send()}function a(){var t=f[this.nextPage.path];u.innerHTML=t}function o(){h.close()}function s(){var t=this.nextPage.hash;if(t)var e=document.getElementById(t.slice(1));var i=e?e.offsetTop:0;window.scrollTo(0,i)}function c(t){ga("send","exception",{exDescription:t.stack||t.message}),ga("testing.send","exception",{exDescription:t.stack||t.message})}var u,d=t("./link-clicked"),l=t("./history2"),h=t("./drawer"),p=t("./parse-url"),f={};e.exports={init:function(){if(window.history&&window.history.pushState){u=document.querySelector("main"),f[location.pathname]=u.innerHTML;var t=(new l).use(r).use(a).use(o).use(s)["catch"](c);d(function(e){if(!(e.metaKey||e.ctrlKey||e.which>1)){var i=p(location.href),r=p(this.href);r.href==i.href&&e.preventDefault(),r.origin==i.origin&&r.path!=i.path&&(e.preventDefault(),t.add(r.href,n(this)))}})}}}},{"./drawer":4,"./history2":5,"./link-clicked":6,"./parse-url":8}],4:[function(t,e,i){"use strict";function n(t,e){var i=t.className;return i?void(i.indexOf(e)>-1||(t.className=i+" "+e)):void(t.className=e)}function r(t,e){var i=t.className;if(!(i.indexOf(e)<0)){for(var n=i.split(/\s/),r=[],a=0,o=n.length;o>a;a++)e!=n[a]&&r.push(n[a]);r.length?t.className=r.join(" "):t.removeAttribute("class")}}function a(t){t.preventDefault(),l?c():s()}function o(t){l&&!u(t.target,"#drawer-container",!0)&&c()}function s(){l=!0,n(document.documentElement,"is-drawerOpen")}function c(){l=!1,r(document.documentElement,"is-drawerOpen")}var u=t("closest"),d=(document.getElementById("drawer-container"),document.getElementById("drawer-toggle")),l=!1;e.exports={init:function(){d.addEventListener("click",a),d.addEventListener("touchend",a),document.addEventListener("click",o),document.addEventListener("touchend",o)},open:s,close:c}},{closest:17}],5:[function(t,e,i){"use strict";function n(){this.currentPage=r(window.location.href),this.currentPage.title=document.title,history.replaceState(this.currentPage,this.currentPage.title,this.currentPage.href),this._queue=[];var t=this;window.addEventListener("popstate",function(e){var i=e.state,n=i&&i.title;t.add(window.location.href,n,i,e)})}var r=t("./parse-url");n.prototype.add=function(t,e,i,n){t!=this.currentPage.href&&(this.nextPage=r(t),this.nextPage.title=e,this.nextPage.state=i,this._processQueue(n))},n.prototype.use=function(t){return this._queue.push(t),this},n.prototype["catch"]=function(t){return this._onError=t,this},n.prototype._onError=function(t){console.error(t.stack)},n.prototype._onComplete=function(t){this.nextPage.title&&(document.title=this.nextPage.title),t&&"popstate"==t.type||history.pushState(this.nextPage,this.nextPage.title,this.nextPage.href),this.currentPage=this.nextPage,this.nextPage=null},n.prototype._processQueue=function(t){var e=this,i=0;!function n(){function r(t){t?e._onError(t):n()}var a=e._queue[i++],o=a&&!a.length;if(!a)return e._onComplete(t);try{a.apply(e,o?[]:[r])}catch(s){return e._onError(s)}o&&n()}()},e.exports=n},{"./parse-url":8}],6:[function(t,e,i){"use strict";function n(t){return t.nodeName&&"a"==t.nodeName.toLowerCase()&&t.href}function r(t){if(n(t))return t;for(;t.parentNode&&1==t.parentNode.nodeType;){if(n(t))return t;t=t.parentNode}}var a=t("./add-listener");e.exports=function(t){a(document,"click",function(e){var i=e||window.event,n=i.target||i.srcElement,a=r(n);a&&t.call(a,i)})}},{"./add-listener":1}],7:[function(t,e,i){"use strict";t("./analytics");var n=t("./content-loader"),r=t("./drawer");n.init(),r.init()},{"./analytics":2,"./content-loader":3,"./drawer":4}],8:[function(t,e,i){"use strict";var n=document.createElement("a"),r={};e.exports=function(t){if(r[t])return r[t];var e=/:80$/,i=/:443/;n.href=t;var a=n.protocol&&":"!=n.protocol?n.protocol:location.protocol,o="80"==n.port||"443"==n.port?"":n.port,s=n.host.replace("http:"==a?e:i,""),c=n.origin?n.origin:a+"//"+s,u="/"==n.pathname.charAt(0)?n.pathname:"/"+n.pathname;return r[t]={hash:n.hash,host:s,hostname:n.hostname,href:n.href,origin:c,path:u+n.search,pathname:u,port:o,protocol:a,search:n.search}}},{}],9:[function(t,e,i){e.exports={DEV_ID:"i5iSjo"}},{}],10:[function(t,e,i){function n(t,e){window.gaplugins=window.gaplugins||{},gaplugins.MediaQueryTracker=n,window.matchMedia&&(this.opts=o(e,{mediaQueryDefinitions:!1,mediaQueryChangeTemplate:this.changeTemplate,mediaQueryChangeTimeout:1e3}),s(this.opts.mediaQueryDefinitions)&&(this.opts.mediaQueryDefinitions=c(this.opts.mediaQueryDefinitions),this.tracker=t,this.timeouts={},this.processMediaQueries()))}function r(t){return l[t]?l[t]:(l[t]=window.matchMedia(t),l[t])}var a=t("debounce"),o=t("../utilities").defaults,s=t("../utilities").isObject,c=t("../utilities").toArray,u=t("../provide"),d="(not set)",l={};n.prototype.processMediaQueries=function(){this.opts.mediaQueryDefinitions.forEach(function(t){if(!t.dimensionIndex)throw new Error("Media query definitions must have a name.");if(!t.dimensionIndex)throw new Error("Media query definitions must have a dimension index.");var e=this.getMatchName(t);this.tracker.set("dimension"+t.dimensionIndex,e),this.addChangeListeners(t)}.bind(this))},n.prototype.getMatchName=function(t){var e;return t.items.forEach(function(t){r(t.media).matches&&(e=t)}),e?e.name:d},n.prototype.addChangeListeners=function(t){t.items.forEach(function(e){var i=r(e.media);i.addListener(a(function(){this.handleChanges(t)}.bind(this),this.opts.mediaQueryChangeTimeout))}.bind(this))},n.prototype.handleChanges=function(t){var e=this.getMatchName(t),i=this.tracker.get("dimension"+t.dimensionIndex);e!==i&&(this.tracker.set("dimension"+t.dimensionIndex,e),this.tracker.send("event",t.name,"change",this.opts.mediaQueryChangeTemplate(i,e)))},n.prototype.changeTemplate=function(t,e){return t+" => "+e},u("mediaQueryTracker",n)},{"../provide":15,"../utilities":16,debounce:18}],11:[function(t,e,i){function n(t,e){window.gaplugins=window.gaplugins||{},gaplugins.OutboundLinkTracker=n,window.addEventListener&&(this.opts=r(e,{shouldTrackOutboundLink:this.shouldTrackOutboundLink}),this.tracker=t,a(document,"a","click",this.handleLinkClicks.bind(this)))}var r=t("../utilities").defaults,a=t("delegate"),o=t("../provide");n.prototype.handleLinkClicks=function(t){var e=t.delegateTarget;this.opts.shouldTrackOutboundLink(e)&&(navigator.sendBeacon||(e.target="_blank"),this.tracker.send("event","Outbound Link","click",e.href,{transport:"beacon"}))},n.prototype.shouldTrackOutboundLink=function(t){return t.hostname!=location.hostname},o("outboundLinkTracker",n)},{"../provide":15,"../utilities":16,delegate:20}],12:[function(t,e,i){function n(t,e){window.gaplugins=window.gaplugins||{},gaplugins.PageVisibilityTracker=n,window.addEventListener&&(this.opts=r(e,{sessionTimeout:s}),this.tracker=t,this.overrideTrackerSendMethod(),this.overrideTrackerSentHitTask(),document.addEventListener("visibilitychange",this.handleVisibilityStateChange.bind(this)))}var r=t("../utilities").defaults,a=t("../utilities").isObject,o=t("../provide"),s=30;n.prototype.handleVisibilityStateChange=function(){var t=document.visibilityState;if(this.sessionHasTimedOut()){if("hidden"==t)return;"visible"==t&&this.tracker.send("pageview")}else this.tracker.send("event",{eventCategory:"Page Visibility",eventAction:"change",eventLabel:document.visibilityState,transport:"beacon"})},n.prototype.sessionHasTimedOut=function(){var t=(new Date-this.lastHitTime_)/6e4;return this.opts.sessionTimeout<t},n.prototype.overrideTrackerSendMethod=function(){var t=this.tracker.send;this.tracker.send=function(){var e=Array.prototype.slice.call(arguments),i=e[0],n=a(i)?i.hitType:i,r="pageview"==n;!r&&this.sessionHasTimedOut()&&t.call(this.tracker,"pageview"),t.apply(this.tracker,e)}.bind(this)},n.prototype.overrideTrackerSentHitTask=function(){var t=this.tracker.get("sendHitTask");this.lastHitTime_=+new Date,this.tracker.set("sendHitTask",function(e){t(e),this.lastHitTime_=+new Date}.bind(this))},o("pageVisibilityTracker",n)},{"../provide":15,"../utilities":16}],13:[function(t,e,i){function n(t,e){if(window.gaplugins=window.gaplugins||{},gaplugins.SocialTracker=n,window.addEventListener){this.opts=r(e,{attributePrefix:"data-"}),this.tracker=t;var i=this.opts.attributePrefix,o="["+i+"social-network]["+i+"social-action]["+i+"social-target]";a(document,o,"click",this.handleSocialClicks.bind(this)),this.detectLibraryLoad("FB","facebook-jssdk",this.addFacebookEventHandlers.bind(this)),this.detectLibraryLoad("twttr","twitter-wjs",this.addTwitterEventHandlers.bind(this))}}var r=t("../utilities").defaults,a=t("delegate"),o=t("../provide");n.prototype.handleSocialClicks=function(t){var e=t.delegateTarget,i=this.opts.attributePrefix;this.tracker.send("social",{socialNetwork:e.getAttribute(i+"social-network"),socialAction:e.getAttribute(i+"social-action"),socialTarget:e.getAttribute(i+"social-target")})},n.prototype.detectLibraryLoad=function(t,e,i){if(window[t])i();else{var n=document.getElementById(e);n&&(n.onload=i)}},n.prototype.addTwitterEventHandlers=function(){try{twttr.ready(function(){twttr.events.bind("tweet",function(t){if("tweet"==t.region){var e=t.data.url||t.target.getAttribute("data-url")||location.href;this.tracker.send("social","Twitter","tweet",e)}}.bind(this)),twttr.events.bind("follow",function(t){if("follow"==t.region){var e=t.data.screen_name||t.target.getAttribute("data-screen-name");this.tracker.send("social","Twitter","follow",e)}}.bind(this))}.bind(this))}catch(t){}},n.prototype.addFacebookEventHandlers=function(){try{FB.Event.subscribe("edge.create",function(t){this.tracker.send("social","Facebook","like",t)}.bind(this)),FB.Event.subscribe("edge.remove",function(t){this.tracker.send("social","Facebook","unlike",t)}.bind(this))}catch(t){}},o("socialTracker",n)},{"../provide":15,"../utilities":16,delegate:20}],14:[function(t,e,i){function n(t,e){if(window.gaplugins=window.gaplugins||{},gaplugins.UrlChangeTracker=n,history.pushState&&window.addEventListener){this.opts=a(e,{shouldTrackUrlChange:this.shouldTrackUrlChange}),this.tracker=t,this.path=r();var i=history.pushState;history.pushState=function(t,e,n){o(t)&&e&&(t.title=e),i.call(history,t,e,n),this.updateTrackerData()}.bind(this);var s=history.replaceState;history.replaceState=function(t,e,i){o(t)&&e&&(t.title=e),s.call(history,t,e,i),this.updateTrackerData(!1)}.bind(this),window.addEventListener("popstate",this.updateTrackerData.bind(this))}}function r(){return location.pathname+location.search}var a=t("../utilities").defaults,o=t("../utilities").isObject,s=t("../provide");n.prototype.updateTrackerData=function(t){t=t===!1?!1:!0,setTimeout(function(){var e=this.path,i=r();e!=i&&this.opts.shouldTrackUrlChange.call(this,i,e)&&(this.path=i,this.tracker.set({page:i,title:o(history.state)&&history.state.title||document.title}),t&&this.tracker.send("pageview"))}.bind(this),0)},n.prototype.shouldTrackUrlChange=function(t,e){return!0},s("urlChangeTracker",n)},{"../provide":15,"../utilities":16}],15:[function(t,e,i){var n=t("./constants");(window.gaDevIds=window.gaDevIds||[]).push(n.DEV_ID),e.exports=function(t,e){var i=window,n=i.GoogleAnalyticsObject||"ga";i[n]=i[n]||function(){(i[n].q=i[n].q||[]).push(arguments)},i[n].l=i[n].l||+new Date,i[n]("provide",t,e)}},{"./constants":9}],16:[function(t,e,i){var n={withTimeout:function(t,e){var i=!1;return setTimeout(t,e||2e3),function(){i||(i=!0,t())}},defaults:function(t,e){var i={};"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});for(var n in e)e.hasOwnProperty(n)&&(i[n]=t.hasOwnProperty(n)?t[n]:e[n]);return i},isObject:function(t){return"object"==typeof t&&null!==t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},toArray:function(t){return n.isArray(t)?t:[t]}};e.exports=n},{}],17:[function(t,e,i){var n=t("matches-selector");e.exports=function(t,e,i){for(var r=i?t:t.parentNode;r&&r!==document;){if(n(r,e))return r;r=r.parentNode}}},{"matches-selector":21}],18:[function(t,e,i){var n=t("date-now");e.exports=function(t,e,i){function r(){var d=n()-c;e>d&&d>0?a=setTimeout(r,e-d):(a=null,i||(u=t.apply(s,o),a||(s=o=null)))}var a,o,s,c,u;return null==e&&(e=100),function(){s=this,o=arguments,c=n();var d=i&&!a;return a||(a=setTimeout(r,e)),d&&(u=t.apply(s,o),s=o=null),u}}},{"date-now":19}],19:[function(t,e,i){function n(){return(new Date).getTime()}e.exports=Date.now||n},{}],20:[function(t,e,i){function n(t,e,i,n,a){var o=r.apply(this,arguments);return t.addEventListener(i,o,a),{destroy:function(){t.removeEventListener(i,o,a)}}}function r(t,e,i,n){return function(i){i.delegateTarget=a(i.target,e,!0),i.delegateTarget&&n.call(t,i)}}var a=t("closest");e.exports=n},{closest:17}],21:[function(t,e,i){function n(t,e){if(a)return a.call(t,e);for(var i=t.parentNode.querySelectorAll(e),n=0;n<i.length;++n)if(i[n]==t)return!0;return!1}var r=Element.prototype,a=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=n},{}]},{},[7]);
//# sourceMappingURL=main.js.map
