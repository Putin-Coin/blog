{"version":3,"sources":["assets/javascript/node_modules/browser-pack/_prelude.js","assets/javascript/main.js","assets/javascript/assets/javascript/add-listener.js","assets/javascript/assets/javascript/analytics.js","assets/javascript/assets/javascript/content-loader.js","assets/javascript/assets/javascript/drawer.js","assets/javascript/assets/javascript/history2.js","assets/javascript/assets/javascript/link-clicked.js","assets/javascript/assets/javascript/main.js","assets/javascript/assets/javascript/parse-url.js","assets/javascript/node_modules/autotrack/lib/constants.js","assets/javascript/node_modules/autotrack/lib/plugins/media-query-tracker.js","assets/javascript/node_modules/autotrack/lib/plugins/outbound-link-tracker.js","assets/javascript/node_modules/autotrack/lib/plugins/session-duration-tracker.js","assets/javascript/node_modules/autotrack/lib/plugins/social-tracker.js","assets/javascript/node_modules/autotrack/lib/plugins/url-change-tracker.js","assets/javascript/node_modules/autotrack/lib/provide.js","assets/javascript/node_modules/autotrack/lib/utilities.js","assets/javascript/node_modules/closest/index.js","assets/javascript/node_modules/debounce/index.js","assets/javascript/node_modules/debounce/node_modules/date-now/index.js","assets/javascript/node_modules/delegate/src/delegate.js","assets/javascript/node_modules/matches-selector/index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","element","event","fn","addEventListener","attachEvent",2,"autotrack/lib/plugins/media-query-tracker","autotrack/lib/plugins/outbound-link-tracker","autotrack/lib/plugins/session-duration-tracker","autotrack/lib/plugins/social-tracker","autotrack/lib/plugins/url-change-tracker",3,"getTitle","title","innerText","loadPageContent","done","path","this","nextPage","pageCache","basename","url","test","replace","xhr","XMLHttpRequest","open","onload","status","responseText","response","onerror","send","showPageContent","content","container","innerHTML","closeDrawer","drawer","close","setScroll","hash","target","document","getElementById","slice","scrollPos","offsetTop","window","scrollTo","trackError","error","ga","exDescription","stack","message","linkClicked","History2","parseUrl","init","history","pushState","querySelector","location","pathname","history2","use","metaKey","ctrlKey","which","page","href","link","preventDefault","origin","add","./drawer","./history2","./link-clicked","./parse-url",4,"addClass","className","cls","indexOf","removeClass","prevClasses","split","newClasses","len","push","join","removeAttribute","handleDrawerToggleClick","isOpen","handleClickOutsideDrawerContainer","closest","documentElement","drawerToggle",5,"currentPage","replaceState","_queue","self","state","prototype","_processQueue","plugin","onError","_onError","console","_onComplete","type","next","isSync","apply",6,"isLink","el","nodeName","toLowerCase","getLinkAncestor","parentNode","nodeType","addListener","srcElement","./add-listener",7,"contentLoader","./analytics","./content-loader",8,"createElement","cache","httpPort","httpsPort","protocol","port","host","charAt","hostname","search",9,"DEV_ID",10,"MediaQueryTracker","tracker","opts","gaplugins","matchMedia","defaults","mediaQueryDefinitions","mediaQueryChangeTemplate","changeTemplate","mediaQueryChangeTimeout","isObject","toArray","timeouts","processMediaQueries","getMediaListener","media","mediaMap","debounce","provide","NULL_DIMENSION","forEach","dimension","dimensionIndex","name","getMatchName","set","addChangeListeners","bind","match","items","item","matches","mql","handleChanges","newValue","oldValue","get","../provide","../utilities",11,"OutboundLinkTracker","delegate","handleLinkClicks","delegateTarget","navigator","sendBeacon","transport",12,"SessionDurationTracker","handleWindowUnload","fieldsObj","nonInteraction","performance","timing","eventValue","Date","navigationStart",13,"SocialTracker","attributePrefix","prefix","selector","handleSocialClicks","detectLibraryLoad","addFacebookEventHandlers","addTwitterEventHandlers","socialNetwork","getAttribute","socialAction","socialTarget","namespace","domId","script","twttr","ready","events","region","data","screenName","screen_name","err","FB","Event","subscribe",14,"UrlChangeTracker","shouldTrackUrlChange","getPath","originalPushState","updateTrackerData","originalReplaceState","shouldSendPageview","setTimeout","oldPath","newPath",15,"constants","gaDevIds","pluginName","pluginConstructor","GoogleAnalyticsObject","./constants",16,"utilities","withTimeout","callback","wait","called","overrides","result","key","hasOwnProperty","obj","isArray","Array","arr","Object","toString",17,"checkYoSelf","parent","matches-selector",18,"now","func","immediate","later","last","timestamp","timeout","context","args","arguments","callNow","date-now",19,"getTime",20,"useCapture","listenerFn","listener","destroy","removeEventListener",21,"vendor","nodes","querySelectorAll","proto","Element","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,GCCA,YCDAI,GAAOJ,QAAU,SAASK,EAASC,EAAOC,GACpCF,EAAQG,iBACVH,EAAQG,iBAAiBF,EAAOC,GAAI,GAGpCF,EAAQI,YAAY,KAAOH,EAAOC,SDMhCG,GAAG,SAAShB,EAAQU,EAAOJ,GACjC,YEVAN,GAAQ,6CACRA,EAAQ,+CACRA,EAAQ,kDACRA,EAAQ,wCACRA,EAAQ,8CFgBLiB,4CAA4C,GAAGC,8CAA8C,GAAGC,iDAAiD,GAAGC,uCAAuC,GAAGC,2CAA2C,KAAKC,GAAG,SAAStB,EAAQU,EAAOJ,GAC5Q,YGRA,SAASiB,GAASxB,GAChB,GAAIyB,GAAQzB,EAAEyB,OAASzB,EAAE0B,SACzB,OAAOD,GAAQA,EAAQ,mBAA0B,KAInD,QAASE,GAAgBC,GACvB,GAAIC,GAAOC,KAAKC,SAASF,IAEzB,IAAIG,EAAUH,GAAO,MAAOD,IAE5B,IAAIK,GAAW,eACXC,EAAMD,EAASE,KAAKN,GACpBA,EAAKO,QAAQH,EAAU,YAAcJ,EAAO,cAE5CQ,EAAM,GAAIC,eACdD,GAAIE,KAAK,MAAOL,GAChBG,EAAIG,OAAS,WACPH,EAAII,QAAU,KAAOJ,EAAII,OAAS,KACpCT,EAAUH,GAAQQ,EAAIK,aACtBd,KAGAA,EAAK,GAAIxB,OAAM,IAAMiC,EAAII,OAAS,KAAOJ,EAAIM,YAGjDN,EAAIO,QAAU,WACZhB,EAAK,GAAIxB,OAAM,2BAA6B8B,KAE9CG,EAAIQ,OAIN,QAASC,KACP,GAAIC,GAAUf,EAAUF,KAAKC,SAASF,KACtCmB,GAAUC,UAAYF,EAIxB,QAASG,KACPC,EAAOC,QAIT,QAASC,KACP,GAAIC,GAAOxB,KAAKC,SAASuB,IACzB,IAAIA,EACF,GAAIC,GAASC,SAASC,eAAeH,EAAKI,MAAM,GAElD,IAAIC,GAAYJ,EAASA,EAAOK,UAAY,CAAEC,QAKvCC,SAAS,EAAGH,GAKrB,QAASI,GAAWC,GAClBC,GAAG,OAAQ,aAAcC,cAAeF,EAAMG,OAASH,EAAMI,UAzE/D,GAMIpB,GANAqB,EAAcpE,EAAQ,kBACtBqE,EAAWrE,EAAQ,cACnBkD,EAASlD,EAAQ,YACjBsE,EAAWtE,EAAQ,eAOnB+B,IAmEJrB,GAAOJ,SAELiE,KAAM,WAGJ,GAAMX,OAAOY,SAAWZ,OAAOY,QAAQC,UAAvC,CAA0D1B,EAG9CQ,SAASmB,cAAc,QACnC3C,EAAU4C,SAASC,UAAY7B,EAAUC,SAGzC,IAAI6B,IAAW,GAAIR,IACdS,IAAIpD,GACJoD,IAAIjC,GACJiC,IAAI7B,GACJ6B,IAAI1B,GACJ,SAASU,EAEdM,GAAY,SAASxD,GAGnB,KAAIA,EAAMmE,SAAWnE,EAAMoE,SAAWpE,EAAMqE,MAAQ,GAApD,CAEA,GAAIC,GAAOZ,EAASK,SAASQ,MACzBC,EAAOd,EAASzC,KAAKsD,KAGrBC,GAAKD,MAAQD,EAAKC,MAAMvE,EAAMyE,iBAI9BD,EAAME,QAAUJ,EAAKI,QAAYF,EAAKxD,MAAQsD,EAAKtD,OACrDhB,EAAMyE,iBACNR,EAASU,IAAIH,EAAKD,KAAM5D,EAASM,gBHetC2D,WAAW,EAAEC,aAAa,EAAEC,iBAAiB,EAAEC,cAAc,IAAIC,GAAG,SAAS5F,EAAQU,EAAOJ,GAC/F,YIxHA,SAASuF,GAASlF,EAASmF,GACzB,GAAIC,GAAMpF,EAAQmF,SAClB,OAAKC,QAIIA,EAAIC,QAAQF,GAAa,KAIhCnF,EAAQmF,UAAYC,EAAM,IAAMD,SAPhCnF,EAAQmF,UAAYA,GAYxB,QAASG,GAAYtF,EAASmF,GAC5B,GAAIC,GAAMpF,EAAQmF,SAClB,MAAIC,EAAIC,QAAQF,GAAa,GAA7B,CAIA,IAAK,GAFDI,GAAcH,EAAII,MAAM,MACxBC,KACKnG,EAAI,EAAGoG,EAAMH,EAAY1F,OAAY6F,EAAJpG,EAASA,IAC7C6F,GAAaI,EAAYjG,IAAImG,EAAWE,KAAKJ,EAAYjG,GAG1DmG,GAAW5F,OAIdG,EAAQmF,UAAYM,EAAWG,KAAK,KAHpC5F,EAAQ6F,gBAAgB,UAQ5B,QAASC,GAAwB7F,GAC/BA,EAAMyE,iBACNqB,EAASvD,IAAUb,IAIrB,QAASqE,GAAkC/F,GAErC8F,IAAWE,EAAQhG,EAAM0C,OAAQ,qBAAqB,IAAOH,IAInE,QAASb,KACPoE,GAAS,EACTb,EAAStC,SAASsD,gBAAiB,iBAIrC,QAAS1D,KACPuD,GAAS,EACTT,EAAY1C,SAASsD,gBAAiB,iBA9DxC,GAAID,GAAU5G,EAAQ,WAIlB8G,GADkBvD,SAASC,eAAe,oBAC3BD,SAASC,eAAe,kBACvCkD,GAAS,CA6DbhG,GAAOJ,SACLiE,KAAM,WACJuC,EAAahG,iBAAiB,QAAS2F,GACvCK,EAAahG,iBAAiB,WAAY2F,GAE1ClD,SAASzC,iBAAiB,QAAS6F,GACnCpD,SAASzC,iBAAiB,WAAY6F,IAExCrE,KAAMA,EACNa,MAAOA,KJ0HNyD,QAAU,KAAKG,GAAG,SAAS/G,EAAQU,EAAOJ,GAC7C,YKrMA,SAAS+D,KAGPxC,KAAKmF,YAAc1C,EAASV,OAAOe,SAASQ,MAC5CtD,KAAKmF,YAAYxF,MAAQ+B,SAAS/B,MAAMgD,QAGhCyC,aACJpF,KAAKmF,YACLnF,KAAKmF,YAAYxF,MACjBK,KAAKmF,YAAY7B,MAErBtD,KAAKqF,SAAY,IAGbC,GAAOtF,IACX+B,QAAO9C,iBAAiB,WAAY,SAASF,GAC3C,GAAIwG,GAAQxG,EAAMwG,MACd5F,EAAQ4F,GAASA,EAAM5F,KAC3B2F,GAAK5B,IAAI3B,OAAOe,SAASQ,KAAM3D,EAAO4F,EAAOxG,KArBjD,GAAI0D,GAAWtE,EAAQ,cA0BvBqE,GAASgD,UAAU9B,IAAM,SAAStD,EAAKT,EAAO4F,EAAOxG,GAG/CqB,GAAOJ,KAAKmF,YAAY7B,OAE5BtD,KAAKC,SAAWwC,EAASrC,GACzBJ,KAAKC,SAASN,MAAQA,EACtBK,KAAKC,SAASsF,MAAQA,EAEtBvF,KAAKyF,cAAc1G,KACnByD,EAQOgD,UAAUvC,IAAM,SAASyC,GAGhC,MAFA1F,MAAKqF,OAAOZ,KAAKiB,GAEV1F,MACPwC,EASOgD,UAAU,SAAW,SAASG,GAGrC,MAFA3F,MAAK4F,SAAWD,EAET3F,MAITwC,EAASgD,UAAUI,SAAW,SAAS1D,GAErC2D,QAAQ3D,MAAMA,EAAMG,QAItBG,EAASgD,UAAUM,YAAc,SAAS/G,GAEpCiB,KAAKC,SAASN,QAAO+B,SAAS/B,MAAQK,KAAKC,SAASN,OAIlDZ,GAAuB,YAAdA,EAAMgH,MACnBpD,QAAQC,UACJ5C,KAAKC,SACLD,KAAKC,SAASN,MACdK,KAAKC,SAASqD,MACnBtD,KAGImF,YAAcnF,KAAKC,SACxBD,KAAKC,SAAW,MAIlBuC,EAASgD,UAAUC,cAAgB,SAAS1G,GAC1C,GAAIuG,GAAOtF,KACP5B,EAAI,GAER,QAAU4H,KAKoC,QAGnClG,GAAKoC,GACRA,EACFoD,EAAKM,SAAS1D,GAGd8D,IAXJ,GAAIN,GAASJ,EAAKD,OAAOjH,KACrB6H,EAASP,IAAWA,EAAO/G,MAE/B,KAAK+G,EAAQ,MAAOJ,GAAKQ,YAAY/G,EAYrC,KACE2G,EAAOQ,MAAMZ,EAAMW,MAAenG,IAEpC,MAAMoC,GACJ,MAAOoD,GAAKM,SAAS1D,GAKnB+D,GAAQD,QAMhBnH,EAAOJ,QAAU+D,IL2LdsB,cAAc,IAAIqC,GAAG,SAAShI,EAAQU,EAAOJ,GAChD,YMvTA,SAAS2H,GAAOC,GACd,MAAOA,GAAGC,UAAyC,KAA7BD,EAAGC,SAASC,eAAwBF,EAAG/C,KAG/D,QAASkD,GAAgBH,GACvB,GAAID,EAAOC,GAAK,MAAOA,EACvB,MAAOA,EAAGI,YAAwC,GAA1BJ,EAAGI,WAAWC,UAAe,CACnD,GAAIN,EAAOC,GAAK,MAAOA,EACvBA,GAAKA,EAAGI,YAVZ,GAAIE,GAAcxI,EAAQ,iBAc1BU,GAAOJ,QAAU,SAASO,GACxB2H,EAAYjF,SAAU,QAAS,SAAS3C,GACtC,GAAIpB,GAAIoB,GAASgD,OAAOhD,MACpB0C,EAAS9D,EAAE8D,QAAU9D,EAAEiJ,WACvBrD,EAAOiD,EAAgB/E,EACvB8B,IACFvE,EAAGN,KAAK6E,EAAM5F,QNgUjBkJ,iBAAiB,IAAIC,GAAG,SAAS3I,EAAQU,EAAOJ,GACnD,YOrVAN,GAAQ,cAER,IAAI4I,GAAgB5I,EAAQ,oBACxBkD,EAASlD,EAAQ,WAAY4I,GAGnBrE,OAAOrB,EAGdqB,SPyVJsE,cAAc,EAAEC,mBAAmB,EAAEtD,WAAW,IAAIuD,GAAG,SAAS/I,EAAQU,EAAOJ,GAClF,YQnWA,IAAIP,GAAIwD,SAASyF,cAAc,KAC3BC,IAAWvI,GAQRJ,QAAU,SAAS2B,GAExB,GAAIgH,EAAMhH,GAAM,MAAOgH,GAAMhH,EAE7B,IAAIiH,GAAW,OACXC,EAAY,MAEhBpJ,GAAEoF,KAAOlD,CAAI,IAITmH,GAAYrJ,EAAEqJ,UAAY,KAAOrJ,EAAEqJ,SACfrJ,EAAEqJ,SAAtBzE,SAASyE,SAGTC,EAAkB,MAAXtJ,EAAGsJ,MAA0B,OAAVtJ,EAAEsJ,KAAiB,GAAKtJ,EAAEsJ,KAKpDC,EAAOvJ,EAAEuJ,KAAKnH,QAAoB,SAAZiH,EAAsBF,EAAWC,EAAW,IAGlE7D,EAASvF,EAAEuF,OAASvF,EAAEuF,OAAS8D,EAAW,KAAOE,EAIjD1E,EAAmC,KAAxB7E,EAAE6E,SAAS2E,OAAO,GAAYxJ,EAAE6E,SAAW,IAAM7E,EAAE6E,QAElE,OAAOqE,GAAMhH,IACXoB,KAAMtD,EAAEsD,KACRiG,KAAMA,EACNE,SAAUzJ,EAAEyJ,SACZrE,KAAMpF,EAAEoF,KACRG,OAAQA,EACR1D,KAAMgD,EAAW7E,EAAE0J,OACnB7E,SAAUA,EACVyE,KAAMA,EACND,SAAUA,EACVK,OAAQ1J,EAAE0J,cRwWRC,GAAG,SAAS1J,EAAQU,EAAOJ,GSxZjCI,EAAAJ,SACAqJ,OAAA,eT4ZMC,IAAI,SAAS5J,EAAQU,EAAOJ,GUpYlC,QAAAuJ,GAAAC,EAAAC,GAGAnG,OAAAoG,UAAApG,OAAAoG,cACAA,UAAAH,kBAAAA,EAGAjG,OAAAqG,aAEApI,KAAAkI,KAAAG,EAAAH,GACAI,uBAAA,EACAC,yBAAAvI,KAAAwI,eACAC,wBAAA,MAIAC,EAAA1I,KAAAkI,KAAAI,yBAEAtI,KAAAkI,KAAAI,sBAAAK,EAAA3I,KAAAkI,KAAAI,uBACAtI,KAAAiI,QAAAA,EACAjI,KAAA4I,YAEA5I,KAAA6I,wBAmGA,QAAAC,GAAAC,GAEA,MAAAC,GAAAD,GAAAC,EAAAD,IAEAC,EAAAD,GAAAhH,OAAAqG,WAAAW,GACAC,EAAAD,IAvJA,GAAAE,GAAA9K,EAAA,YACAkK,EAAAlK,EAAA,gBAAAkK,SACAK,EAAAvK,EAAA,gBAAAuK,SACAC,EAAAxK,EAAA,gBAAAwK,QACAO,EAAA/K,EAAA,cAMAgL,EAAA,YAMAH,IAuCAhB,GAAAxC,UAAAqD,oBAAA,WACA7I,KAAAkI,KAAAI,sBAAAc,QAAA,SAAAC,GAEA,IAAAA,EAAAC,eACA,KAAA,IAAAhL,OAAA,4CAGA,KAAA+K,EAAAC,eACA,KAAA,IAAAhL,OAAA,uDAGA,IAAAiL,GAAAvJ,KAAAwJ,aAAAH,EACArJ,MAAAiI,QAAAwB,IAAA,YAAAJ,EAAAC,eAAAC,GAEAvJ,KAAA0J,mBAAAL,IACAM,KAAA3J,QAWAgI,EAAAxC,UAAAgE,aAAA,SAAAH,GACA,GAAAO,EAOA,OALAP,GAAAQ,MAAAT,QAAA,SAAAU,GACAhB,EAAAgB,EAAAf,OAAAgB,UACAH,EAAAE,KAGAF,EAAAA,EAAAL,KAAAJ,GAUAnB,EAAAxC,UAAAkE,mBAAA,SAAAL,GACAA,EAAAQ,MAAAT,QAAA,SAAAU,GACA,GAAAE,GAAAlB,EAAAgB,EAAAf,MACAiB,GAAArD,YAAAsC,EAAA,WACAjJ,KAAAiK,cAAAZ,IACAM,KAAA3J,MAAAA,KAAAkI,KAAAO,2BACAkB,KAAA3J,QAUAgI,EAAAxC,UAAAyE,cAAA,SAAAZ,GACA,GAAAa,GAAAlK,KAAAwJ,aAAAH,GACAc,EAAAnK,KAAAiI,QAAAmC,IAAA,YAAAf,EAAAC,eAEAY,KAAAC,IACAnK,KAAAiI,QAAAwB,IAAA,YAAAJ,EAAAC,eAAAY,GACAlK,KAAAiI,QAAAlH,KAAA,QAAAsI,EAAAE,KAAA,SACAvJ,KAAAkI,KAAAK,yBAAA4B,EAAAD,MAYAlC,EAAAxC,UAAAgD,eAAA,SAAA2B,EAAAD,GACA,MAAAC,GAAA,OAAAD,GAoBAhB,EAAA,oBAAAlB,KVgaGqC,aAAa,GAAGC,eAAe,GAAGrB,SAAW,KAAKsB,IAAI,SAASpM,EAAQU,EAAOJ,GWhjBjF,QAAA+L,GAAAvC,EAAAC,GAGAnG,OAAAoG,UAAApG,OAAAoG,cACAA,UAAAqC,oBAAAA,EAGAzI,OAAA9C,mBAEAe,KAAAkI,KAAAG,EAAAH,GACAlI,KAAAiI,QAAAA,EAEAwC,EAAA/I,SAAA,IAAA,QAAA1B,KAAA0K,iBAAAf,KAAA3J,QAvBA,GAAAqI,GAAAlK,EAAA,gBAAAkK,SACAoC,EAAAtM,EAAA,YACA+K,EAAA/K,EAAA,aAgCAqM,GAAAhF,UAAAkF,iBAAA,SAAA3L,GAIA,GAAAwE,GAAAxE,EAAA4L,cACApH,GAAAoE,UAAA7E,SAAA6E,WAGAiD,UAAAC,aACAtH,EAAA9B,OAAA,UAEAzB,KAAAiI,QAAAlH,KAAA,QAAA,gBAAA,QAAAwC,EAAAD,MACAwH,UAAA,aAMA5B,EAAA,sBAAAsB,KX8jBGH,aAAa,GAAGC,eAAe,GAAGG,SAAW,KAAKM,IAAI,SAAS5M,EAAQU,EAAOJ,GYxmBjF,QAAAuM,GAAA/C,EAAAC,GAGAnG,OAAAoG,UAAApG,OAAAoG,cACAA,UAAA6C,uBAAAA,EAGAjJ,OAAA9C,mBAEAe,KAAAkI,KAAAG,EAAAH,GACAlI,KAAAiI,QAAAA,EAEAlG,OAAA9C,iBAAA,SAAAe,KAAAiL,mBAAAtB,KAAA3J,QAtBA,GAAAqI,GAAAlK,EAAA,gBAAAkK,SACAa,EAAA/K,EAAA,aA4BA6M,GAAAxF,UAAAyF,mBAAA,WACA,GAAAC,IACAC,gBAAA,EACAL,UAAA,SAIA/I,QAAAqJ,aAAAA,YAAAC,SACAH,EAAAI,YAAA,GAAAC,MAAAH,YAAAC,OAAAG,iBAKAxL,KAAAiI,QAAAlH,KAAA,QAAA,SAAA,SAAAmK,IAIAhC,EAAA,yBAAA8B,KZqnBGX,aAAa,GAAGC,eAAe,KAAKmB,IAAI,SAAStN,EAAQU,EAAOJ,GatpBnE,QAAAiN,GAAAzD,EAAAC,GAOA,GAJAnG,OAAAoG,UAAApG,OAAAoG,cACAA,UAAAuD,cAAAA,EAGA3J,OAAA9C,iBAAA,CAEAe,KAAAkI,KAAAG,EAAAH,GACAyD,gBAAA,UAGA3L,KAAAiI,QAAAA,CAEA,IAAA2D,GAAA5L,KAAAkI,KAAAyD,gBACAE,EAAA,IAAAD,EAAA,mBACAA,EAAA,kBACAA,EAAA,gBAEAnB,GAAA/I,SAAAmK,EAAA,QAAA7L,KAAA8L,mBAAAnC,KAAA3J,OAEAA,KAAA+L,kBAAA,KAAA,iBACA/L,KAAAgM,yBAAArC,KAAA3J,OAEAA,KAAA+L,kBAAA,QAAA,cACA/L,KAAAiM,wBAAAtC,KAAA3J,QAvCA,GAAAqI,GAAAlK,EAAA,gBAAAkK,SACAoC,EAAAtM,EAAA,YACA+K,EAAA/K,EAAA,aA6CAuN,GAAAlG,UAAAsG,mBAAA,SAAA/M,GAEA,GAAAwE,GAAAxE,EAAA4L,eACAiB,EAAA5L,KAAAkI,KAAAyD,eAEA3L,MAAAiI,QAAAlH,KAAA,UACAmL,cAAA3I,EAAA4I,aAAAP,EAAA,kBACAQ,aAAA7I,EAAA4I,aAAAP,EAAA,iBACAS,aAAA9I,EAAA4I,aAAAP,EAAA,oBAWAF,EAAAlG,UAAAuG,kBAAA,SAAAO,EAAAC,EAAAzM,GACA,GAAAiC,OAAAuK,GACAxM,QAEA,CACA,GAAA0M,GAAA9K,SAAAC,eAAA4K,EACAC,KACAA,EAAA9L,OAAAZ,KAWA4L,EAAAlG,UAAAyG,wBAAA,WACA,IACAQ,MAAAC,MAAA,WAEAD,MAAAE,OAAAhD,KAAA,QAAA,SAAA5K,GAEA,GAAA,SAAAA,EAAA6N,OAAA,CAEA,GAAAxM,GAAArB,EAAA8N,KAAAzM,KAAArB,EAAA0C,OAAA0K,aAAA,aACArJ,SAAAQ,IAEAtD,MAAAiI,QAAAlH,KAAA,SAAA,UAAA,QAAAX,KACAuJ,KAAA3J,OAEAyM,MAAAE,OAAAhD,KAAA,SAAA,SAAA5K,GAEA,GAAA,UAAAA,EAAA6N,OAAA,CAEA,GAAAE,GAAA/N,EAAA8N,KAAAE,aACAhO,EAAA0C,OAAA0K,aAAA,mBAEAnM,MAAAiI,QAAAlH,KAAA,SAAA,UAAA,SAAA+L,KACAnD,KAAA3J,QACA2J,KAAA3J,OACA,MAAAgN,MAQAtB,EAAAlG,UAAAwG,yBAAA,WACA,IACAiB,GAAAC,MAAAC,UAAA,cAAA,SAAA/M,GACAJ,KAAAiI,QAAAlH,KAAA,SAAA,WAAA,OAAAX,IACAuJ,KAAA3J,OAEAiN,GAAAC,MAAAC,UAAA,cAAA,SAAA/M,GACAJ,KAAAiI,QAAAlH,KAAA,SAAA,WAAA,SAAAX,IACAuJ,KAAA3J,OACA,MAAAgN,MAIA9D,EAAA,gBAAAwC,KbsqBGrB,aAAa,GAAGC,eAAe,GAAGG,SAAW,KAAK2C,IAAI,SAASjP,EAAQU,EAAOJ,Gc5xBjF,QAAA4O,GAAApF,EAAAC,GAOA,GAJAnG,OAAAoG,UAAApG,OAAAoG,cACAA,UAAAkF,iBAAAA,EAGA1K,QAAAC,WAAAb,OAAA9C,iBAAA,CAEAe,KAAAkI,KAAAG,EAAAH,GACAoF,qBAAAtN,KAAAsN,uBAGAtN,KAAAiI,QAAAA,EAKAjI,KAAAD,KAAAwN,GAGA,IAAAC,GAAA7K,QAAAC,SACAD,SAAAC,UAAA,SAAA2C,EAAA5F,EAAAS,GAIAsI,EAAAnD,IAAA5F,IAAA4F,EAAA5F,MAAAA,GAEA6N,EAAA9O,KAAAiE,QAAA4C,EAAA5F,EAAAS,GACAJ,KAAAyN,qBACA9D,KAAA3J,KAGA,IAAA0N,GAAA/K,QAAAyC,YACAzC,SAAAyC,aAAA,SAAAG,EAAA5F,EAAAS,GAIAsI,EAAAnD,IAAA5F,IAAA4F,EAAA5F,MAAAA,GAEA+N,EAAAhP,KAAAiE,QAAA4C,EAAA5F,EAAAS,GACAJ,KAAAyN,mBAAA,IACA9D,KAAA3J,MAGA+B,OAAA9C,iBAAA,WAAAe,KAAAyN,kBAAA9D,KAAA3J,QAmDA,QAAAuN,KACA,MAAAzK,UAAAC,SAAAD,SAAA8E,OA5GA,GAAAS,GAAAlK,EAAA,gBAAAkK,SACAK,EAAAvK,EAAA,gBAAAuK,SACAQ,EAAA/K,EAAA,aA8DAkP,GAAA7H,UAAAiI,kBAAA,SAAAE,GAGAA,EAAAA,KAAA,GAAA,GAAA,EAIAC,WAAA,WAEA,GAAAC,GAAA7N,KAAAD,KACA+N,EAAAP,GAEAM,IAAAC,GACA9N,KAAAkI,KAAAoF,qBAAA5O,KAAAsB,KAAA8N,EAAAD,KAEA7N,KAAAD,KAAA+N,EACA9N,KAAAiI,QAAAwB,KACApG,KAAAyK,EACAnO,MAAA+I,EAAA/F,QAAA4C,QAAA5C,QAAA4C,MAAA5F,OAAA+B,SAAA/B,QAGAgO,GAAA3N,KAAAiI,QAAAlH,KAAA,cAEA4I,KAAA3J,MAAA,IAWAqN,EAAA7H,UAAA8H,qBAAA,SAAAQ,EAAAD,GACA,OAAA,GAaA3E,EAAA,mBAAAmE,Kd0yBGhD,aAAa,GAAGC,eAAe,KAAKyD,IAAI,SAAS5P,EAAQU,EAAOJ,Ge15BnE,GAAAuP,GAAA7P,EAAA,gBAIA4D,OAAAkM,SAAAlM,OAAAkM,cAAAxJ,KAAAuJ,EAAAlG,QASAjJ,EAAAJ,QAAA,SAAAyP,EAAAC,GACA,GAAAhM,GAAAJ,OAAAA,OAAAqM,uBAAA,KACA,mBAAAjM,IACAA,EAAA,UAAA+L,EAAAC,Mf+5BGE,cAAc,IAAIC,IAAI,SAASnQ,EAAQU,EAAOJ,GgB/6BjD,GAAA8P,IAWAC,YAAA,SAAAC,EAAAC,GACA,GAAAC,IAAA,CAEA,OADAf,YAAAa,EAAAC,GAAA,KACA,WACAC,IACAA,GAAA,EACAF,OAaApG,SAAA,SAAAuG,EAAAvG,GACA,GAAAwG,KAEA,iBAAAD,KACAA,MAGA,gBAAAvG,KACAA,KAGA,KAAA,GAAAyG,KAAAzG,GACAA,EAAA0G,eAAAD,KACAD,EAAAC,GAAAF,EAAAG,eAAAD,GACAF,EAAAE,GAAAzG,EAAAyG,GAGA,OAAAD,IAIAnG,SAAA,SAAAsG,GACA,MAAA,gBAAAA,IAAA,OAAAA,GAIAC,QAAAC,MAAAD,SAAA,SAAAE,GACA,MAAA,mBAAAC,OAAA5J,UAAA6J,SAAA3Q,KAAAyQ,IAIAxG,QAAA,SAAAqG,GACA,MAAAT,GAAAU,QAAAD,GAAAA,GAAAA,IAIAnQ,GAAAJ,QAAA8P,OhBk7BMe,IAAI,SAASnR,EAAQU,EAAOJ,GiBp/BlC,GAAAsL,GAAA5L,EAAA,mBAEAU,GAAAJ,QAAA,SAAAK,EAAA+M,EAAA0D,GAGA,IAFA,GAAAC,GAAAD,EAAAzQ,EAAAA,EAAA2H,WAEA+I,GAAAA,IAAA9N,UAAA,CACA,GAAAqI,EAAAyF,EAAA3D,GAAA,MAAA2D,EACAA,GAAAA,EAAA/I,ejBy/BGgJ,mBAAmB,KAAKC,IAAI,SAASvR,EAAQU,EAAOJ,GkB3/BvD,GAAAkR,GAAAxR,EAAA,WAgBAU,GAAAJ,QAAA,SAAAmR,EAAAlB,EAAAmB,GAIA,QAAAC,KACA,GAAAC,GAAAJ,IAAAK,CAEAtB,GAAAqB,GAAAA,EAAA,EACAE,EAAArC,WAAAkC,EAAApB,EAAAqB,IAEAE,EAAA,KACAJ,IACAhB,EAAAe,EAAA1J,MAAAgK,EAAAC,GACAF,IAAAC,EAAAC,EAAA,QAZA,GAAAF,GAAAE,EAAAD,EAAAF,EAAAnB,CAiBA,OAhBA,OAAAH,IAAAA,EAAA,KAgBA,WACAwB,EAAAlQ,KACAmQ,EAAAC,UACAJ,EAAAL,GACA,IAAAU,GAAAR,IAAAI,CAOA,OANAA,KAAAA,EAAArC,WAAAkC,EAAApB,IACA2B,IACAxB,EAAAe,EAAA1J,MAAAgK,EAAAC,GACAD,EAAAC,EAAA,MAGAtB,MlBqgCGyB,WAAW,KAAKC,IAAI,SAASpS,EAAQU,EAAOJ,GmBrjC/C,QAAAkR,KACA,OAAA,GAAApE,OAAAiF,UAHA3R,EAAAJ,QAAA8M,KAAAoE,KAAAA,OnB8jCMc,IAAI,SAAStS,EAAQU,EAAOJ,GoBljClC,QAAAgM,GAAA3L,EAAA+M,EAAA9F,EAAA0I,EAAAiC,GACA,GAAAC,GAAAC,EAAA1K,MAAAlG,KAAAoQ,UAIA,OAFAtR,GAAAG,iBAAA8G,EAAA4K,EAAAD,IAGAG,QAAA,WACA/R,EAAAgS,oBAAA/K,EAAA4K,EAAAD,KAcA,QAAAE,GAAA9R,EAAA+M,EAAA9F,EAAA0I,GACA,MAAA,UAAA9Q,GACAA,EAAAgN,eAAA5F,EAAApH,EAAA8D,OAAAoK,GAAA,GAEAlO,EAAAgN,gBACA8D,EAAA/P,KAAAI,EAAAnB,IAtCA,GAAAoH,GAAA5G,EAAA,UA2CAU,GAAAJ,QAAAgM,IpBikCG1F,QAAU,KAAKgM,IAAI,SAAS5S,EAAQU,EAAOJ,GqB5kC9C,QAAAmL,GAAAvD,EAAAwF,GACA,GAAAmF,EAAA,MAAAA,GAAAtS,KAAA2H,EAAAwF,EAEA,KAAA,GADAoF,GAAA5K,EAAAI,WAAAyK,iBAAArF,GACAzN,EAAA,EAAAA,EAAA6S,EAAAtS,SAAAP,EACA,GAAA6S,EAAA7S,IAAAiI,EAAA,OAAA,CAEA,QAAA,EAjCA,GAAA8K,GAAAC,QAAA5L,UAMAwL,EAAAG,EAAAE,iBACAF,EAAAG,uBACAH,EAAAI,oBACAJ,EAAAK,mBACAL,EAAAM,gBAMA5S,GAAAJ,QAAAmL,YrBgoCW","file":"assets/javascript/main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function (element, event, fn) {\n  if (element.addEventListener) {\n    element.addEventListener(event, fn, false);\n  } else {\n    element.attachEvent('on' + event, fn);\n  }\n};\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\n// Requires the individual autotrack plugins that are used in\n// templates/_analytics.html\nrequire('autotrack/lib/plugins/media-query-tracker');\nrequire('autotrack/lib/plugins/outbound-link-tracker');\nrequire('autotrack/lib/plugins/session-duration-tracker');\nrequire('autotrack/lib/plugins/social-tracker');\nrequire('autotrack/lib/plugins/url-change-tracker');\n\n},{\"autotrack/lib/plugins/media-query-tracker\":10,\"autotrack/lib/plugins/outbound-link-tracker\":11,\"autotrack/lib/plugins/session-duration-tracker\":12,\"autotrack/lib/plugins/social-tracker\":13,\"autotrack/lib/plugins/url-change-tracker\":14}],3:[function(require,module,exports){\n'use strict';\n\n/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar History2 = require('./history2');\nvar drawer = require('./drawer');\nvar parseUrl = require('./parse-url');\n\n// Cache the container element to avoid multiple lookups.\nvar container;\n\n// Store the result of page content requests to avoid multiple\n// lookups when navigation to a previously seen page.\nvar pageCache = {};\n\nfunction getTitle(a) {\n  var title = a.title || a.innerText;\n  return title ? title + ' â€” Philip Walton' : null;\n}\n\nfunction loadPageContent(done) {\n  var path = this.nextPage.path;\n\n  if (pageCache[path]) return done();\n\n  var basename = /(\\w+)\\.html$/;\n  var url = basename.test(path) ? path.replace(basename, '_$1.html') : path + '_index.html';\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.onload = function () {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      pageCache[path] = xhr.responseText;\n      done();\n    } else {\n      done(new Error('(' + xhr.status + ') ' + xhr.response));\n    }\n  };\n  xhr.onerror = function () {\n    done(new Error('Error making request to:' + url));\n  };\n  xhr.send();\n}\n\nfunction showPageContent() {\n  var content = pageCache[this.nextPage.path];\n  container.innerHTML = content;\n}\n\nfunction closeDrawer() {\n  drawer.close();\n}\n\nfunction setScroll() {\n  var hash = this.nextPage.hash;\n  if (hash) {\n    var target = document.getElementById(hash.slice(1));\n  }\n  var scrollPos = target ? target.offsetTop : 0;\n\n  // TODO: There's a weird chrome bug were sometime this function\n  // doesn't do anything if Chrome has already visited this page and\n  // thinks it has a scroll position in mind. Just chrome, weird...\n  window.scrollTo(0, scrollPos);\n}\n\nfunction trackError(error) {\n  ga('send', 'exception', { exDescription: error.stack || error.message });\n}\n\nmodule.exports = {\n\n  init: function init() {\n\n    // Only load external content via AJAX if the browser support pushState.\n    if (!(window.history && window.history.pushState)) return;\n\n    // Add the current page to the cache.\n    container = document.querySelector('main');\n    pageCache[location.pathname] = container.innerHTML;\n\n    var history2 = new History2().use(loadPageContent).use(showPageContent).use(closeDrawer).use(setScroll)['catch'](trackError);\n\n    linkClicked(function (event) {\n\n      // Don't attempt to load content if the user is trying to open a new tab.\n      if (event.metaKey || event.ctrlKey || event.which > 1) return;\n\n      var page = parseUrl(location.href);\n      var link = parseUrl(this.href);\n\n      // Don't do anything when clicking on links to the current URL.\n      if (link.href == page.href) event.preventDefault();\n\n      // If the clicked link is on the same site but has a different path,\n      // prevent the browser from navigating there and load the page via ajax.\n      if (link.origin == page.origin && link.path != page.path) {\n        event.preventDefault();\n        history2.add(link.href, getTitle(this));\n      }\n    });\n  }\n};\n\n},{\"./drawer\":4,\"./history2\":5,\"./link-clicked\":6,\"./parse-url\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar closest = require('closest');\n\nvar drawerContainer = document.getElementById('drawer-container');\nvar drawerToggle = document.getElementById('drawer-toggle');\nvar isOpen = false;\n\nfunction addClass(element, className) {\n  var cls = element.className;\n  if (!cls) {\n    element.className = className;\n    return;\n  } else if (cls.indexOf(className) > -1) {\n    return;\n  } else {\n    element.className = cls + ' ' + className;\n  }\n}\n\nfunction removeClass(element, className) {\n  var cls = element.className;\n  if (cls.indexOf(className) < 0) return;\n\n  var prevClasses = cls.split(/\\s/);\n  var newClasses = [];\n  for (var i = 0, len = prevClasses.length; i < len; i++) {\n    if (className != prevClasses[i]) newClasses.push(prevClasses[i]);\n  }\n\n  if (!newClasses.length) {\n    element.removeAttribute('class');\n  } else {\n    element.className = newClasses.join(' ');\n  }\n}\n\nfunction handleDrawerToggleClick(event) {\n  event.preventDefault();\n  isOpen ? close() : open();\n}\n\nfunction handleClickOutsideDrawerContainer(event) {\n  // Closes an open menu if the user clicked outside of the nav element.\n  if (isOpen && !closest(event.target, '#drawer-container', true)) close();\n}\n\nfunction open() {\n  isOpen = true;\n  addClass(document.documentElement, 'is-drawerOpen');\n}\n\nfunction close() {\n  isOpen = false;\n  removeClass(document.documentElement, 'is-drawerOpen');\n}\n\nmodule.exports = {\n  init: function init() {\n    drawerToggle.addEventListener('click', handleDrawerToggleClick);\n    drawerToggle.addEventListener('touchend', handleDrawerToggleClick);\n\n    document.addEventListener('click', handleClickOutsideDrawerContainer);\n    document.addEventListener('touchend', handleClickOutsideDrawerContainer);\n  },\n  open: open,\n  close: close\n};\n\n},{\"closest\":17}],5:[function(require,module,exports){\n'use strict';\n\nvar parseUrl = require('./parse-url');\n\nfunction History2() {\n\n  // Store the current url information.\n  this.currentPage = parseUrl(window.location.href);\n  this.currentPage.title = document.title;\n\n  // Add history state initially so the first `popstate` event contains data.\n  history.replaceState(this.currentPage, this.currentPage.title, this.currentPage.href);\n\n  this._queue = [];\n\n  // Listen for popstate changes and log them.\n  var self = this;\n  window.addEventListener('popstate', function (event) {\n    var state = event.state;\n    var title = state && state.title;\n    self.add(window.location.href, title, state, event);\n  });\n}\n\nHistory2.prototype.add = function (url, title, state, event) {\n\n  // Ignore urls pointing to the current address\n  if (url == this.currentPage.href) return;\n\n  this.nextPage = parseUrl(url);\n  this.nextPage.title = title;\n  this.nextPage.state = state;\n\n  this._processQueue(event);\n};\n\n/**\n * Register a plugin with the History2 instance.\n * @param {Function(History2, done)} - A plugin that runs some task and\n *     informs the next plugin in the queue when it's done.\n */\nHistory2.prototype.use = function (plugin) {\n  this._queue.push(plugin);\n\n  return this;\n};\n\n/**\n * Register a handler to catch any errors.\n * Note: In ES3 reserved words like \"catch\" couldn't be used as property names:\n * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names\n * @param {Function(Error)} - The function to handle the error.\n */\nHistory2.prototype['catch'] = function (onError) {\n  this._onError = onError;\n\n  return this;\n};\n\nHistory2.prototype._onError = function (error) {\n  // Left blank so calling `_onError` never fails.\n  console.error(error.stack);\n};\n\nHistory2.prototype._onComplete = function (event) {\n\n  if (this.nextPage.title) document.title = this.nextPage.title;\n\n  // Popstate triggered navigation is already handled by the browser,\n  // so we only add to the history in non-popstate cases.\n  if (!(event && event.type == 'popstate')) {\n    history.pushState(this.nextPage, this.nextPage.title, this.nextPage.href);\n  }\n\n  // Update the last url to the current url\n  this.currentPage = this.nextPage;\n  this.nextPage = null;\n};\n\nHistory2.prototype._processQueue = function (event) {\n  var self = this;\n  var i = 0;\n\n  (function next() {\n\n    var plugin = self._queue[i++];\n    var isSync = plugin && !plugin.length;\n\n    if (!plugin) return self._onComplete(event);\n\n    // The callback for async plugins.\n    function done(error) {\n      if (error) {\n        self._onError(error);\n      } else {\n        next();\n      }\n    }\n\n    try {\n      plugin.apply(self, isSync ? [] : [done]);\n    } catch (error) {\n      return self._onError(error);\n    }\n\n    // Sync plugins are done by now and can immediately process\n    // the next item in the queue.\n    if (isSync) next();\n  })();\n};\n\nmodule.exports = History2;\n\n},{\"./parse-url\":8}],6:[function(require,module,exports){\n'use strict';\n\nvar addListener = require('./add-listener');\n\nfunction isLink(el) {\n  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;\n}\n\nfunction getLinkAncestor(el) {\n  if (isLink(el)) return el;\n  while (el.parentNode && el.parentNode.nodeType == 1) {\n    if (isLink(el)) return el;\n    el = el.parentNode;\n  }\n}\n\nmodule.exports = function (fn) {\n  addListener(document, 'click', function (event) {\n    var e = event || window.event;\n    var target = e.target || e.srcElement;\n    var link = getLinkAncestor(target);\n    if (link) {\n      fn.call(link, e);\n    }\n  });\n};\n\n},{\"./add-listener\":1}],7:[function(require,module,exports){\n'use strict';\n\nrequire('./analytics');\n\nvar contentLoader = require('./content-loader');\nvar drawer = require('./drawer');\n\n// Loads link via AJAX instead of full page loads in browsers with pushState.\ncontentLoader.init();\n\n// Turns on the collapsable drawer.\ndrawer.init();\n\n},{\"./analytics\":2,\"./content-loader\":3,\"./drawer\":4}],8:[function(require,module,exports){\n'use strict';\n\nvar a = document.createElement('a');\nvar cache = {};\n\n/**\n * Parse the given url and return the properties returned\n * by the `Location` object.\n * @param {string} url - The url to parse.\n * @return {Object} An object with the same keys as `window.location`.\n */\nmodule.exports = function (url) {\n\n  if (cache[url]) return cache[url];\n\n  var httpPort = /:80$/;\n  var httpsPort = /:443/;\n\n  a.href = url;\n\n  // Sometimes IE will return no port or just a colon, especially for things\n  // like relative port URLs (e.g. \"//google.com\").\n  var protocol = !a.protocol || ':' == a.protocol ? location.protocol : a.protocol;\n\n  // Don't include default ports.\n  var port = a.port == '80' || a.port == '443' ? '' : a.port;\n\n  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even\n  // when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    path: pathname + a.search,\n    pathname: pathname,\n    port: port,\n    protocol: protocol,\n    search: a.search\n  };\n};\n\n},{}],9:[function(require,module,exports){\nmodule.exports = {\n  DEV_ID: 'i5iSjo'\n};\n\n},{}],10:[function(require,module,exports){\nvar debounce = require('debounce');\nvar defaults = require('../utilities').defaults;\nvar isObject = require('../utilities').isObject;\nvar toArray = require('../utilities').toArray;\nvar provide = require('../provide');\n\n\n/**\n * Sets the string to use when no custom dimension value is available.\n */\nvar NULL_DIMENSION = '(not set)';\n\n\n/**\n * Declares the MediaQueryListener instance cache.\n */\nvar mediaMap = {};\n\n\n/**\n * Registers media query tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction MediaQueryTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.MediaQueryTracker = MediaQueryTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.matchMedia) return;\n\n  this.opts = defaults(opts, {\n    mediaQueryDefinitions: false,\n    mediaQueryChangeTemplate: this.changeTemplate,\n    mediaQueryChangeTimeout: 1000\n  });\n\n  // Exits early if media query data doesn't exist.\n  if (!isObject(this.opts.mediaQueryDefinitions)) return;\n\n  this.opts.mediaQueryDefinitions = toArray(this.opts.mediaQueryDefinitions);\n  this.tracker = tracker;\n  this.timeouts = {};\n\n  this.processMediaQueries();\n}\n\n\n/**\n * Loops through each media query definition, sets the custom dimenion data,\n * and adds the change listeners.\n */\nMediaQueryTracker.prototype.processMediaQueries = function() {\n  this.opts.mediaQueryDefinitions.forEach(function(dimension) {\n\n    if (!dimension.dimensionIndex) {\n      throw new Error('Media query definitions must have a name.');\n    }\n\n    if (!dimension.dimensionIndex) {\n      throw new Error('Media query definitions must have a dimension index.');\n    }\n\n    var name = this.getMatchName(dimension);\n    this.tracker.set('dimension' + dimension.dimensionIndex, name);\n\n    this.addChangeListeners(dimension);\n  }.bind(this));\n};\n\n\n/**\n * Takes a dimension object and return the name of the matching media item.\n * If no match is found, the NULL_DIMENSION value is returned.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension.\n * @return {string} The name of the matched media or NULL_DIMENSION.\n */\nMediaQueryTracker.prototype.getMatchName = function(dimension) {\n  var match;\n\n  dimension.items.forEach(function(item) {\n    if (getMediaListener(item.media).matches) {\n      match = item;\n    }\n  });\n  return match ? match.name : NULL_DIMENSION;\n};\n\n\n/**\n * Adds change listeners to each media query in the dimension list.\n * Debounces the changes to prevent unnecessary hits from being sent.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.addChangeListeners = function(dimension) {\n  dimension.items.forEach(function(item) {\n    var mql = getMediaListener(item.media);\n    mql.addListener(debounce(function() {\n      this.handleChanges(dimension);\n    }.bind(this), this.opts.mediaQueryChangeTimeout));\n  }.bind(this));\n};\n\n\n/**\n * Handles changes to the matched media. When the new value differs from\n * the old value, a change event is sent.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.handleChanges = function(dimension) {\n  var newValue = this.getMatchName(dimension);\n  var oldValue = this.tracker.get('dimension' + dimension.dimensionIndex);\n\n  if (newValue !== oldValue) {\n    this.tracker.set('dimension' + dimension.dimensionIndex, newValue);\n    this.tracker.send('event', dimension.name, 'change',\n        this.opts.mediaQueryChangeTemplate(oldValue, newValue));\n  }\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `mediaQueryChangeTemplate` option.\n * @param {string} oldValue\n * @param {string} newValue\n * @return {string} The formatted event label.\n */\nMediaQueryTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n\n/**\n * Accepts a media query and returns a MediaQueryListener object.\n * Caches the values to avoid multiple unnecessary instances.\n * @param {string} media A media query value.\n * @return {MediaQueryListener}\n */\nfunction getMediaListener(media) {\n  // Returns early if the media is cached.\n  if (mediaMap[media]) return mediaMap[media];\n\n  mediaMap[media] = window.matchMedia(media);\n  return mediaMap[media];\n}\n\n\nprovide('mediaQueryTracker', MediaQueryTracker);\n\n},{\"../provide\":15,\"../utilities\":16,\"debounce\":18}],11:[function(require,module,exports){\nvar defaults = require('../utilities').defaults;\nvar delegate = require('delegate');\nvar provide = require('../provide');\n\n\n/**\n * Registers outbound link tracking on a tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction OutboundLinkTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.OutboundLinkTracker = OutboundLinkTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts);\n  this.tracker = tracker;\n\n  delegate(document, 'a', 'click', this.handleLinkClicks.bind(this));\n}\n\n\n/**\n * Handles all clicks on link elements. A link is considered an outbound link\n * its hostname property does not match location.hostname. When the beacon\n * transport method is not available, the links target is set to \"_blank\" to\n * ensure the hit can be sent.\n * @param {Event} event The DOM click event.\n */\nOutboundLinkTracker.prototype.handleLinkClicks = function(event) {\n\n  // TODO(philipwalton): ignore outbound links with data attributes.\n\n  var link = event.delegateTarget;\n  if (link.hostname != location.hostname) {\n    // Open outbound links in a new tab if the browser doesn't support\n    // the beacon transport method.\n    if (!navigator.sendBeacon) {\n      link.target = '_blank';\n    }\n    this.tracker.send('event', 'Outbound Link', 'click', link.href, {\n      transport: 'beacon'\n    });\n  }\n};\n\n\nprovide('outboundLinkTracker', OutboundLinkTracker);\n\n},{\"../provide\":15,\"../utilities\":16,\"delegate\":20}],12:[function(require,module,exports){\nvar defaults = require('../utilities').defaults;\nvar provide = require('../provide');\n\n\n/**\n * Registers outbound link tracking on tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SessionDurationTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.SessionDurationTracker = SessionDurationTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts);\n  this.tracker = tracker;\n\n  window.addEventListener('unload', this.handleWindowUnload.bind(this));\n}\n\n\n/**\n * Handles the window unload event.\n */\nSessionDurationTracker.prototype.handleWindowUnload = function() {\n  var fieldsObj = {\n    nonInteraction: true,\n    transport: 'beacon'\n  };\n\n  // Adds time since navigation start if supported.\n  if (window.performance && performance.timing) {\n    fieldsObj.eventValue = +new Date - performance.timing.navigationStart;\n  }\n\n  // Note: This will fail in many cases when Beacon isn't supported,\n  // but at least it's better than nothing.\n  this.tracker.send('event', 'Window', 'unload', fieldsObj);\n};\n\n\nprovide('sessionDurationTracker', SessionDurationTracker);\n\n},{\"../provide\":15,\"../utilities\":16}],13:[function(require,module,exports){\nvar defaults = require('../utilities').defaults;\nvar delegate = require('delegate');\nvar provide = require('../provide');\n\n\n/**\n * Registers social tracking on tracker object.\n * Supports both declarative social tracking via HTML attributes as well as\n * tracking for social events when using official Twitter or Facebook widgets.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SocialTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.SocialTracker = SocialTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts, {\n    attributePrefix: 'data-'\n  });\n\n  this.tracker = tracker;\n\n  var prefix = this.opts.attributePrefix;\n  var selector = '[' + prefix + 'social-network]' +\n                 '[' + prefix + 'social-action]' +\n                 '[' + prefix + 'social-target]';\n\n  delegate(document, selector, 'click', this.handleSocialClicks.bind(this));\n\n  this.detectLibraryLoad('FB', 'facebook-jssdk',\n      this.addFacebookEventHandlers.bind(this));\n\n  this.detectLibraryLoad('twttr', 'twitter-wjs',\n      this.addTwitterEventHandlers.bind(this));\n}\n\n\n/**\n * Handles all clicks on elements with social tracking attributes.\n * @param {Event} event The DOM click event.\n */\nSocialTracker.prototype.handleSocialClicks = function(event) {\n\n  var link = event.delegateTarget;\n  var prefix = this.opts.attributePrefix;\n\n  this.tracker.send('social', {\n    socialNetwork: link.getAttribute(prefix + 'social-network'),\n    socialAction: link.getAttribute(prefix + 'social-action'),\n    socialTarget: link.getAttribute(prefix + 'social-target')\n  });\n};\n\n\n/**\n * A utility method that determines when a social library is finished loading.\n * @param {string} namespace The global property name added to window.\n * @param {string} domId The ID of a script element in the DOM.\n * @param {Function} done A callback to be invoked when done.\n */\nSocialTracker.prototype.detectLibraryLoad = function(namespace, domId, done) {\n  if (window[namespace]) {\n    done();\n  }\n  else {\n    var script = document.getElementById(domId);\n    if (script) {\n      script.onload = done;\n    }\n  }\n};\n\n\n/**\n * Adds event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons. Note: this does not capture tweet or\n * follow events emitted by other Twitter widgets (tweet, timeline, etc.).\n */\nSocialTracker.prototype.addTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n\n      twttr.events.bind('tweet', function(event) {\n        // Ignore tweets from widgets that aren't the tweet button.\n        if (event.region != 'tweet') return;\n\n        var url = event.data.url || event.target.getAttribute('data-url') ||\n            location.href;\n\n        this.tracker.send('social', 'Twitter', 'tweet', url);\n      }.bind(this));\n\n      twttr.events.bind('follow', function(event) {\n        // Ignore follows from widgets that aren't the follow button.\n        if (event.region != 'follow') return;\n\n        var screenName = event.data.screen_name ||\n            event.target.getAttribute('data-screen-name');\n\n        this.tracker.send('social', 'Twitter', 'follow', screenName);\n      }.bind(this));\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Adds event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialTracker.prototype.addFacebookEventHandlers = function() {\n  try {\n    FB.Event.subscribe('edge.create', function(url) {\n      this.tracker.send('social', 'Facebook', 'like', url);\n    }.bind(this));\n\n    FB.Event.subscribe('edge.remove', function(url) {\n      this.tracker.send('social', 'Facebook', 'unlike', url);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\nprovide('socialTracker', SocialTracker);\n\n},{\"../provide\":15,\"../utilities\":16,\"delegate\":20}],14:[function(require,module,exports){\nvar defaults = require('../utilities').defaults;\nvar isObject = require('../utilities').isObject;\nvar provide = require('../provide');\n\n\n/**\n * Adds handler for the history API methods\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction UrlChangeTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.UrlChangeTracker = UrlChangeTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n    if (!history.pushState || !window.addEventListener) return;\n\n  this.opts = defaults(opts, {\n    shouldTrackUrlChange: this.shouldTrackUrlChange\n  });\n\n  this.tracker = tracker;\n\n  // Sets the initial page field.\n  // Don't set this on the tracker yet so campaign data can be retreived\n  // from the location field.\n  this.path = getPath();\n\n  // Overrides history.pushState.\n  var originalPushState = history.pushState;\n  history.pushState = function(state, title, url) {\n    // Sets the document title for reference later.\n    // TODO(philipwalton): consider using WeakMap for this to not conflict\n    // with any user-defined property also called \"title\".\n    if (isObject(state) && title) state.title = title;\n\n    originalPushState.call(history, state, title, url);\n    this.updateTrackerData();\n  }.bind(this);\n\n  // Overrides history.repaceState.\n  var originalReplaceState = history.replaceState;\n  history.replaceState = function(state, title, url) {\n    // Sets the document title for reference later.\n    // TODO(philipwalton): consider using WeakMap for this to not conflict\n    // with any user-defined property also called \"title\".\n    if (isObject(state) && title) state.title = title;\n\n    originalReplaceState.call(history, state, title, url);\n    this.updateTrackerData(false);\n  }.bind(this);\n\n  // Handles URL changes via user interaction.\n  window.addEventListener('popstate', this.updateTrackerData.bind(this));\n}\n\n\n/**\n * Updates the page and title fields on the tracker if necessary and\n * optionally sends a pageview.\n */\nUrlChangeTracker.prototype.updateTrackerData = function(shouldSendPageview) {\n\n  // Sets the default.\n  shouldSendPageview = shouldSendPageview === false ? false : true;\n\n  // Calls the update logic asychronously to help ensure user callbacks\n  // happen first.\n  setTimeout(function() {\n\n    var oldPath = this.path;\n    var newPath = getPath();\n\n    if (oldPath != newPath &&\n        this.opts.shouldTrackUrlChange.call(this, newPath, oldPath)) {\n\n      this.path = newPath;\n      this.tracker.set({\n        page: newPath,\n        title: isObject(history.state) && history.state.title || document.title\n      });\n\n      if (shouldSendPageview) this.tracker.send('pageview');\n    }\n  }.bind(this), 0);\n};\n\n\n/**\n * Determines whether or not the tracker should send a hit with the new page\n * data. This default implementation can be overrided in the config options.\n * @param {string} newPath\n * @param {string} oldPath\n * @return {boolean}\n */\nUrlChangeTracker.prototype.shouldTrackUrlChange = function(newPath, oldPath) {\n  return true;\n};\n\n\n/**\n * Returns the path value of the current URL.\n * @return {string}\n */\nfunction getPath() {\n  return location.pathname + location.search;\n}\n\n\nprovide('urlChangeTracker', UrlChangeTracker);\n\n},{\"../provide\":15,\"../utilities\":16}],15:[function(require,module,exports){\nvar constants = require('./constants');\n\n\n// Adds the dev ID to the list of dev IDs if any plugin is used.\n(window.gaDevIds = window.gaDevIds || []).push(constants.DEV_ID);\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nmodule.exports = function providePlugin(pluginName, pluginConstructor) {\n  var ga = window[window.GoogleAnalyticsObject || 'ga'];\n  if (typeof ga == 'function') {\n    ga('provide', pluginName, pluginConstructor);\n  }\n};\n\n},{\"./constants\":9}],16:[function(require,module,exports){\nvar utilities = {\n\n  /**\n   * Accepts a function and returns a wrapped version of the function that is\n   * expected to be called elsewhere in the system. If it's not called\n   * elsewhere after the timeout period, it's called regardless. The wrapper\n   * function also prevents the callback from being called more than once.\n   * @param {Function} callback The function to call.\n   * @param {number} wait How many milliseconds to wait before invoking\n   *     the callback.\n   */\n  withTimeout: function(callback, wait) {\n    var called = false;\n    setTimeout(callback, wait || 2000);\n    return function() {\n      if (!called) {\n        called = true;\n        callback();\n      }\n    };\n  },\n\n\n  /**\n   * Accepts an object of overrides and defaults and returns a new object\n   * with the values merged. For each key in defaults, if there's a\n   * corresponding value in overrides, it gets used.\n   * @param {Object} overrides.\n   * @param {?Object} defaults.\n   */\n  defaults: function(overrides, defaults) {\n    var result = {};\n\n    if (typeof overrides != 'object') {\n      overrides = {};\n    }\n\n    if (typeof defaults != 'object') {\n      defaults = {};\n    }\n\n    for (var key in defaults) {\n      if (defaults.hasOwnProperty(key)) {\n        result[key] = overrides.hasOwnProperty(key) ?\n            overrides[key] : defaults[key];\n      }\n    }\n    return result;\n  },\n\n\n  isObject: function(obj) {\n    return typeof obj == 'object' && obj !== null;\n  },\n\n\n  isArray: Array.isArray || function(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  },\n\n\n  toArray: function(obj) {\n    return utilities.isArray(obj) ? obj : [obj];\n  }\n};\n\nmodule.exports = utilities;\n\n},{}],17:[function(require,module,exports){\nvar matches = require('matches-selector')\r\n\r\nmodule.exports = function (element, selector, checkYoSelf) {\r\n  var parent = checkYoSelf ? element : element.parentNode\r\n\r\n  while (parent && parent !== document) {\r\n    if (matches(parent, selector)) return parent;\r\n    parent = parent.parentNode\r\n  }\r\n}\r\n\n},{\"matches-selector\":21}],18:[function(require,module,exports){\n\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n\n},{\"date-now\":19}],19:[function(require,module,exports){\nmodule.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n\n},{}],20:[function(require,module,exports){\nvar closest = require('closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector, true);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n},{\"closest\":17}],21:[function(require,module,exports){\n\r\n/**\r\n * Element prototype.\r\n */\r\n\r\nvar proto = Element.prototype;\r\n\r\n/**\r\n * Vendor function.\r\n */\r\n\r\nvar vendor = proto.matchesSelector\r\n  || proto.webkitMatchesSelector\r\n  || proto.mozMatchesSelector\r\n  || proto.msMatchesSelector\r\n  || proto.oMatchesSelector;\r\n\r\n/**\r\n * Expose `match()`.\r\n */\r\n\r\nmodule.exports = match;\r\n\r\n/**\r\n * Match `el` to `selector`.\r\n *\r\n * @param {Element} el\r\n * @param {String} selector\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nfunction match(el, selector) {\r\n  if (vendor) return vendor.call(el, selector);\r\n  var nodes = el.parentNode.querySelectorAll(selector);\r\n  for (var i = 0; i < nodes.length; ++i) {\r\n    if (nodes[i] == el) return true;\r\n  }\r\n  return false;\r\n}\n},{}]},{},[7])\n\n","module.exports = function(element, event, fn) {\n  if (element.addEventListener) {\n    element.addEventListener(event, fn, false);\n  }\n  else {\n    element.attachEvent('on' + event, fn);\n  }\n};\n","// Requires the individual autotrack plugins that are used in\n// templates/_analytics.html\nrequire('autotrack/lib/plugins/media-query-tracker');\nrequire('autotrack/lib/plugins/outbound-link-tracker');\nrequire('autotrack/lib/plugins/session-duration-tracker');\nrequire('autotrack/lib/plugins/social-tracker');\nrequire('autotrack/lib/plugins/url-change-tracker');\n","/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar History2 = require('./history2');\nvar drawer = require('./drawer');\nvar parseUrl = require('./parse-url');\n\n// Cache the container element to avoid multiple lookups.\nvar container;\n\n// Store the result of page content requests to avoid multiple\n// lookups when navigation to a previously seen page.\nvar pageCache = {};\n\n\nfunction getTitle(a) {\n  var title = a.title || a.innerText;\n  return title ? title + ' \\u2014 Philip Walton' : null;\n}\n\n\nfunction loadPageContent(done) {\n  var path = this.nextPage.path;\n\n  if (pageCache[path]) return done();\n\n  var basename = /(\\w+)\\.html$/;\n  var url = basename.test(path) ?\n      path.replace(basename, '_$1.html') : path + '_index.html';\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.onload = function() {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      pageCache[path] = xhr.responseText;\n      done();\n    }\n    else {\n      done(new Error('(' + xhr.status + ') ' + xhr.response));\n    }\n  };\n  xhr.onerror = function() {\n    done(new Error('Error making request to:' + url));\n  };\n  xhr.send();\n}\n\n\nfunction showPageContent() {\n  var content = pageCache[this.nextPage.path];\n  container.innerHTML = content;\n}\n\n\nfunction closeDrawer() {\n  drawer.close();\n}\n\n\nfunction setScroll() {\n  var hash = this.nextPage.hash;\n  if (hash) {\n    var target = document.getElementById(hash.slice(1));\n  }\n  var scrollPos = target ? target.offsetTop : 0;\n\n  // TODO: There's a weird chrome bug were sometime this function\n  // doesn't do anything if Chrome has already visited this page and\n  // thinks it has a scroll position in mind. Just chrome, weird...\n  window.scrollTo(0, scrollPos);\n}\n\n\n\nfunction trackError(error) {\n  ga('send', 'exception', {exDescription: error.stack || error.message});\n}\n\n\nmodule.exports = {\n\n  init: function() {\n\n    // Only load external content via AJAX if the browser support pushState.\n    if (!(window.history && window.history.pushState)) return;\n\n    // Add the current page to the cache.\n    container = document.querySelector('main');\n    pageCache[location.pathname] = container.innerHTML;\n\n\n    var history2 = new History2()\n        .use(loadPageContent)\n        .use(showPageContent)\n        .use(closeDrawer)\n        .use(setScroll)\n        ['catch'](trackError);\n\n    linkClicked(function(event) {\n\n      // Don't attempt to load content if the user is trying to open a new tab.\n      if (event.metaKey || event.ctrlKey || event.which > 1) return;\n\n      var page = parseUrl(location.href);\n      var link = parseUrl(this.href);\n\n      // Don't do anything when clicking on links to the current URL.\n      if (link.href == page.href) event.preventDefault();\n\n      // If the clicked link is on the same site but has a different path,\n      // prevent the browser from navigating there and load the page via ajax.\n      if ((link.origin == page.origin) && (link.path != page.path)) {\n        event.preventDefault();\n        history2.add(link.href, getTitle(this));\n      }\n    });\n  }\n};\n","\nvar closest = require('closest');\n\n\nvar drawerContainer = document.getElementById('drawer-container');\nvar drawerToggle = document.getElementById('drawer-toggle');\nvar isOpen = false;\n\n\nfunction addClass(element, className) {\n  var cls = element.className;\n  if (!cls) {\n    element.className = className;\n    return;\n  }\n  else if (cls.indexOf(className) > -1) {\n    return;\n  }\n  else {\n    element.className = cls + ' ' + className;\n  }\n}\n\n\nfunction removeClass(element, className) {\n  var cls = element.className;\n  if (cls.indexOf(className) < 0) return;\n\n  var prevClasses = cls.split(/\\s/);\n  var newClasses = [];\n  for (var i = 0, len = prevClasses.length; i < len; i++) {\n    if (className != prevClasses[i]) newClasses.push(prevClasses[i]);\n  }\n\n  if (!newClasses.length) {\n    element.removeAttribute('class');\n  }\n  else {\n    element.className = newClasses.join(' ');\n  }\n}\n\n\nfunction handleDrawerToggleClick(event) {\n  event.preventDefault();\n  isOpen ? close() : open();\n}\n\n\nfunction handleClickOutsideDrawerContainer(event) {\n  // Closes an open menu if the user clicked outside of the nav element.\n  if (isOpen && !closest(event.target, '#drawer-container', true)) close();\n}\n\n\nfunction open() {\n  isOpen = true;\n  addClass(document.documentElement, 'is-drawerOpen');\n}\n\n\nfunction close() {\n  isOpen = false;\n  removeClass(document.documentElement, 'is-drawerOpen');\n}\n\n\nmodule.exports = {\n  init: function() {\n    drawerToggle.addEventListener('click', handleDrawerToggleClick);\n    drawerToggle.addEventListener('touchend', handleDrawerToggleClick);\n\n    document.addEventListener('click', handleClickOutsideDrawerContainer);\n    document.addEventListener('touchend', handleClickOutsideDrawerContainer);\n  },\n  open: open,\n  close: close\n}\n","var parseUrl = require('./parse-url');\n\nfunction History2() {\n\n  // Store the current url information.\n  this.currentPage = parseUrl(window.location.href);\n  this.currentPage.title = document.title;\n\n  // Add history state initially so the first `popstate` event contains data.\n  history.replaceState(\n      this.currentPage,\n      this.currentPage.title,\n      this.currentPage.href);\n\n  this._queue = [];\n\n  // Listen for popstate changes and log them.\n  var self = this;\n  window.addEventListener('popstate', function(event) {\n    var state = event.state;\n    var title = state && state.title;\n    self.add(window.location.href, title, state, event);\n  });\n}\n\n\nHistory2.prototype.add = function(url, title, state, event) {\n\n  // Ignore urls pointing to the current address\n  if (url == this.currentPage.href) return;\n\n  this.nextPage = parseUrl(url);\n  this.nextPage.title = title;\n  this.nextPage.state = state;\n\n  this._processQueue(event);\n};\n\n\n/**\n * Register a plugin with the History2 instance.\n * @param {Function(History2, done)} - A plugin that runs some task and\n *     informs the next plugin in the queue when it's done.\n */\nHistory2.prototype.use = function(plugin) {\n  this._queue.push(plugin);\n\n  return this;\n};\n\n\n/**\n * Register a handler to catch any errors.\n * Note: In ES3 reserved words like \"catch\" couldn't be used as property names:\n * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names\n * @param {Function(Error)} - The function to handle the error.\n */\nHistory2.prototype['catch'] = function(onError) {\n  this._onError = onError;\n\n  return this;\n};\n\n\nHistory2.prototype._onError = function(error) {\n  // Left blank so calling `_onError` never fails.\n  console.error(error.stack);\n};\n\n\nHistory2.prototype._onComplete = function(event) {\n\n  if (this.nextPage.title) document.title = this.nextPage.title;\n\n  // Popstate triggered navigation is already handled by the browser,\n  // so we only add to the history in non-popstate cases.\n  if (!(event && event.type == 'popstate')) {\n    history.pushState(\n        this.nextPage,\n        this.nextPage.title,\n        this.nextPage.href);\n  }\n\n  // Update the last url to the current url\n  this.currentPage = this.nextPage;\n  this.nextPage = null;\n};\n\n\nHistory2.prototype._processQueue = function(event) {\n  var self = this;\n  var i = 0;\n\n  (function next() {\n\n    var plugin = self._queue[i++];\n    var isSync = plugin && !plugin.length;\n\n    if (!plugin) return self._onComplete(event);\n\n    // The callback for async plugins.\n    function done(error) {\n      if (error) {\n        self._onError(error);\n      }\n      else {\n        next();\n      }\n    }\n\n    try {\n      plugin.apply(self, isSync ? [] : [done]);\n    }\n    catch(error) {\n      return self._onError(error);\n    }\n\n    // Sync plugins are done by now and can immediately process\n    // the next item in the queue.\n    if (isSync) next();\n\n  }());\n};\n\n\nmodule.exports = History2;\n","var addListener = require('./add-listener');\n\nfunction isLink(el) {\n  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;\n}\n\nfunction getLinkAncestor(el) {\n  if (isLink(el)) return el;\n  while (el.parentNode && el.parentNode.nodeType == 1) {\n    if (isLink(el)) return el;\n    el = el.parentNode;\n  }\n}\n\nmodule.exports = function(fn) {\n  addListener(document, 'click', function(event) {\n    var e = event || window.event;\n    var target = e.target || e.srcElement;\n    var link = getLinkAncestor(target);\n    if (link) {\n      fn.call(link, e);\n    }\n  });\n};\n","require('./analytics');\n\nvar contentLoader = require('./content-loader');\nvar drawer = require('./drawer');\n\n// Loads link via AJAX instead of full page loads in browsers with pushState.\ncontentLoader.init();\n\n// Turns on the collapsable drawer.\ndrawer.init();\n","var a = document.createElement('a');\nvar cache = {};\n\n/**\n * Parse the given url and return the properties returned\n * by the `Location` object.\n * @param {string} url - The url to parse.\n * @return {Object} An object with the same keys as `window.location`.\n */\nmodule.exports = function(url) {\n\n  if (cache[url]) return cache[url];\n\n  var httpPort = /:80$/;\n  var httpsPort = /:443/;\n\n  a.href = url;\n\n  // Sometimes IE will return no port or just a colon, especially for things\n  // like relative port URLs (e.g. \"//google.com\").\n  var protocol = !a.protocol || ':' == a.protocol ?\n      location.protocol : a.protocol;\n\n  // Don't include default ports.\n  var port = (a.port == '80' || a.port == '443') ? '' : a.port;\n\n  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even\n  // when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    path: pathname + a.search,\n    pathname: pathname,\n    port: port,\n    protocol: protocol,\n    search: a.search\n  };\n};\n","module.exports = {\n  DEV_ID: 'i5iSjo'\n};\n","var debounce = require('debounce');\nvar defaults = require('../utilities').defaults;\nvar isObject = require('../utilities').isObject;\nvar toArray = require('../utilities').toArray;\nvar provide = require('../provide');\n\n\n/**\n * Sets the string to use when no custom dimension value is available.\n */\nvar NULL_DIMENSION = '(not set)';\n\n\n/**\n * Declares the MediaQueryListener instance cache.\n */\nvar mediaMap = {};\n\n\n/**\n * Registers media query tracking.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction MediaQueryTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.MediaQueryTracker = MediaQueryTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.matchMedia) return;\n\n  this.opts = defaults(opts, {\n    mediaQueryDefinitions: false,\n    mediaQueryChangeTemplate: this.changeTemplate,\n    mediaQueryChangeTimeout: 1000\n  });\n\n  // Exits early if media query data doesn't exist.\n  if (!isObject(this.opts.mediaQueryDefinitions)) return;\n\n  this.opts.mediaQueryDefinitions = toArray(this.opts.mediaQueryDefinitions);\n  this.tracker = tracker;\n  this.timeouts = {};\n\n  this.processMediaQueries();\n}\n\n\n/**\n * Loops through each media query definition, sets the custom dimenion data,\n * and adds the change listeners.\n */\nMediaQueryTracker.prototype.processMediaQueries = function() {\n  this.opts.mediaQueryDefinitions.forEach(function(dimension) {\n\n    if (!dimension.dimensionIndex) {\n      throw new Error('Media query definitions must have a name.');\n    }\n\n    if (!dimension.dimensionIndex) {\n      throw new Error('Media query definitions must have a dimension index.');\n    }\n\n    var name = this.getMatchName(dimension);\n    this.tracker.set('dimension' + dimension.dimensionIndex, name);\n\n    this.addChangeListeners(dimension);\n  }.bind(this));\n};\n\n\n/**\n * Takes a dimension object and return the name of the matching media item.\n * If no match is found, the NULL_DIMENSION value is returned.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension.\n * @return {string} The name of the matched media or NULL_DIMENSION.\n */\nMediaQueryTracker.prototype.getMatchName = function(dimension) {\n  var match;\n\n  dimension.items.forEach(function(item) {\n    if (getMediaListener(item.media).matches) {\n      match = item;\n    }\n  });\n  return match ? match.name : NULL_DIMENSION;\n};\n\n\n/**\n * Adds change listeners to each media query in the dimension list.\n * Debounces the changes to prevent unnecessary hits from being sent.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.addChangeListeners = function(dimension) {\n  dimension.items.forEach(function(item) {\n    var mql = getMediaListener(item.media);\n    mql.addListener(debounce(function() {\n      this.handleChanges(dimension);\n    }.bind(this), this.opts.mediaQueryChangeTimeout));\n  }.bind(this));\n};\n\n\n/**\n * Handles changes to the matched media. When the new value differs from\n * the old value, a change event is sent.\n * @param {Object} dimension A set of named media queries associated\n *     with a single custom dimension\n */\nMediaQueryTracker.prototype.handleChanges = function(dimension) {\n  var newValue = this.getMatchName(dimension);\n  var oldValue = this.tracker.get('dimension' + dimension.dimensionIndex);\n\n  if (newValue !== oldValue) {\n    this.tracker.set('dimension' + dimension.dimensionIndex, newValue);\n    this.tracker.send('event', dimension.name, 'change',\n        this.opts.mediaQueryChangeTemplate(oldValue, newValue));\n  }\n};\n\n\n/**\n * Sets the default formatting of the change event label.\n * This can be overridden by setting the `mediaQueryChangeTemplate` option.\n * @param {string} oldValue\n * @param {string} newValue\n * @return {string} The formatted event label.\n */\nMediaQueryTracker.prototype.changeTemplate = function(oldValue, newValue) {\n  return oldValue + ' => ' + newValue;\n};\n\n\n\n/**\n * Accepts a media query and returns a MediaQueryListener object.\n * Caches the values to avoid multiple unnecessary instances.\n * @param {string} media A media query value.\n * @return {MediaQueryListener}\n */\nfunction getMediaListener(media) {\n  // Returns early if the media is cached.\n  if (mediaMap[media]) return mediaMap[media];\n\n  mediaMap[media] = window.matchMedia(media);\n  return mediaMap[media];\n}\n\n\nprovide('mediaQueryTracker', MediaQueryTracker);\n","var defaults = require('../utilities').defaults;\nvar delegate = require('delegate');\nvar provide = require('../provide');\n\n\n/**\n * Registers outbound link tracking on a tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction OutboundLinkTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.OutboundLinkTracker = OutboundLinkTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts);\n  this.tracker = tracker;\n\n  delegate(document, 'a', 'click', this.handleLinkClicks.bind(this));\n}\n\n\n/**\n * Handles all clicks on link elements. A link is considered an outbound link\n * its hostname property does not match location.hostname. When the beacon\n * transport method is not available, the links target is set to \"_blank\" to\n * ensure the hit can be sent.\n * @param {Event} event The DOM click event.\n */\nOutboundLinkTracker.prototype.handleLinkClicks = function(event) {\n\n  // TODO(philipwalton): ignore outbound links with data attributes.\n\n  var link = event.delegateTarget;\n  if (link.hostname != location.hostname) {\n    // Open outbound links in a new tab if the browser doesn't support\n    // the beacon transport method.\n    if (!navigator.sendBeacon) {\n      link.target = '_blank';\n    }\n    this.tracker.send('event', 'Outbound Link', 'click', link.href, {\n      transport: 'beacon'\n    });\n  }\n};\n\n\nprovide('outboundLinkTracker', OutboundLinkTracker);\n","var defaults = require('../utilities').defaults;\nvar provide = require('../provide');\n\n\n/**\n * Registers outbound link tracking on tracker object.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SessionDurationTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.SessionDurationTracker = SessionDurationTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts);\n  this.tracker = tracker;\n\n  window.addEventListener('unload', this.handleWindowUnload.bind(this));\n}\n\n\n/**\n * Handles the window unload event.\n */\nSessionDurationTracker.prototype.handleWindowUnload = function() {\n  var fieldsObj = {\n    nonInteraction: true,\n    transport: 'beacon'\n  };\n\n  // Adds time since navigation start if supported.\n  if (window.performance && performance.timing) {\n    fieldsObj.eventValue = +new Date - performance.timing.navigationStart;\n  }\n\n  // Note: This will fail in many cases when Beacon isn't supported,\n  // but at least it's better than nothing.\n  this.tracker.send('event', 'Window', 'unload', fieldsObj);\n};\n\n\nprovide('sessionDurationTracker', SessionDurationTracker);\n","var defaults = require('../utilities').defaults;\nvar delegate = require('delegate');\nvar provide = require('../provide');\n\n\n/**\n * Registers social tracking on tracker object.\n * Supports both declarative social tracking via HTML attributes as well as\n * tracking for social events when using official Twitter or Facebook widgets.\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction SocialTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.SocialTracker = SocialTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n  if (!window.addEventListener) return;\n\n  this.opts = defaults(opts, {\n    attributePrefix: 'data-'\n  });\n\n  this.tracker = tracker;\n\n  var prefix = this.opts.attributePrefix;\n  var selector = '[' + prefix + 'social-network]' +\n                 '[' + prefix + 'social-action]' +\n                 '[' + prefix + 'social-target]';\n\n  delegate(document, selector, 'click', this.handleSocialClicks.bind(this));\n\n  this.detectLibraryLoad('FB', 'facebook-jssdk',\n      this.addFacebookEventHandlers.bind(this));\n\n  this.detectLibraryLoad('twttr', 'twitter-wjs',\n      this.addTwitterEventHandlers.bind(this));\n}\n\n\n/**\n * Handles all clicks on elements with social tracking attributes.\n * @param {Event} event The DOM click event.\n */\nSocialTracker.prototype.handleSocialClicks = function(event) {\n\n  var link = event.delegateTarget;\n  var prefix = this.opts.attributePrefix;\n\n  this.tracker.send('social', {\n    socialNetwork: link.getAttribute(prefix + 'social-network'),\n    socialAction: link.getAttribute(prefix + 'social-action'),\n    socialTarget: link.getAttribute(prefix + 'social-target')\n  });\n};\n\n\n/**\n * A utility method that determines when a social library is finished loading.\n * @param {string} namespace The global property name added to window.\n * @param {string} domId The ID of a script element in the DOM.\n * @param {Function} done A callback to be invoked when done.\n */\nSocialTracker.prototype.detectLibraryLoad = function(namespace, domId, done) {\n  if (window[namespace]) {\n    done();\n  }\n  else {\n    var script = document.getElementById(domId);\n    if (script) {\n      script.onload = done;\n    }\n  }\n};\n\n\n/**\n * Adds event handlers for the \"tweet\" and \"follow\" events emitted by the\n * official tweet and follow buttons. Note: this does not capture tweet or\n * follow events emitted by other Twitter widgets (tweet, timeline, etc.).\n */\nSocialTracker.prototype.addTwitterEventHandlers = function() {\n  try {\n    twttr.ready(function() {\n\n      twttr.events.bind('tweet', function(event) {\n        // Ignore tweets from widgets that aren't the tweet button.\n        if (event.region != 'tweet') return;\n\n        var url = event.data.url || event.target.getAttribute('data-url') ||\n            location.href;\n\n        this.tracker.send('social', 'Twitter', 'tweet', url);\n      }.bind(this));\n\n      twttr.events.bind('follow', function(event) {\n        // Ignore follows from widgets that aren't the follow button.\n        if (event.region != 'follow') return;\n\n        var screenName = event.data.screen_name ||\n            event.target.getAttribute('data-screen-name');\n\n        this.tracker.send('social', 'Twitter', 'follow', screenName);\n      }.bind(this));\n    }.bind(this));\n  } catch(err) {}\n};\n\n\n/**\n * Adds event handlers for the \"like\" and \"unlike\" events emitted by the\n * official Facebook like button.\n */\nSocialTracker.prototype.addFacebookEventHandlers = function() {\n  try {\n    FB.Event.subscribe('edge.create', function(url) {\n      this.tracker.send('social', 'Facebook', 'like', url);\n    }.bind(this));\n\n    FB.Event.subscribe('edge.remove', function(url) {\n      this.tracker.send('social', 'Facebook', 'unlike', url);\n    }.bind(this));\n  } catch(err) {}\n};\n\n\nprovide('socialTracker', SocialTracker);\n","var defaults = require('../utilities').defaults;\nvar isObject = require('../utilities').isObject;\nvar provide = require('../provide');\n\n\n/**\n * Adds handler for the history API methods\n * @constructor\n * @param {Object} tracker Passed internally by analytics.js\n * @param {?Object} opts Passed by the require command.\n */\nfunction UrlChangeTracker(tracker, opts) {\n\n  // Registers the plugin on the global gaplugins object.\n  window.gaplugins = window.gaplugins || {};\n  gaplugins.UrlChangeTracker = UrlChangeTracker;\n\n  // Feature detects to prevent errors in unsupporting browsers.\n    if (!history.pushState || !window.addEventListener) return;\n\n  this.opts = defaults(opts, {\n    shouldTrackUrlChange: this.shouldTrackUrlChange\n  });\n\n  this.tracker = tracker;\n\n  // Sets the initial page field.\n  // Don't set this on the tracker yet so campaign data can be retreived\n  // from the location field.\n  this.path = getPath();\n\n  // Overrides history.pushState.\n  var originalPushState = history.pushState;\n  history.pushState = function(state, title, url) {\n    // Sets the document title for reference later.\n    // TODO(philipwalton): consider using WeakMap for this to not conflict\n    // with any user-defined property also called \"title\".\n    if (isObject(state) && title) state.title = title;\n\n    originalPushState.call(history, state, title, url);\n    this.updateTrackerData();\n  }.bind(this);\n\n  // Overrides history.repaceState.\n  var originalReplaceState = history.replaceState;\n  history.replaceState = function(state, title, url) {\n    // Sets the document title for reference later.\n    // TODO(philipwalton): consider using WeakMap for this to not conflict\n    // with any user-defined property also called \"title\".\n    if (isObject(state) && title) state.title = title;\n\n    originalReplaceState.call(history, state, title, url);\n    this.updateTrackerData(false);\n  }.bind(this);\n\n  // Handles URL changes via user interaction.\n  window.addEventListener('popstate', this.updateTrackerData.bind(this));\n}\n\n\n/**\n * Updates the page and title fields on the tracker if necessary and\n * optionally sends a pageview.\n */\nUrlChangeTracker.prototype.updateTrackerData = function(shouldSendPageview) {\n\n  // Sets the default.\n  shouldSendPageview = shouldSendPageview === false ? false : true;\n\n  // Calls the update logic asychronously to help ensure user callbacks\n  // happen first.\n  setTimeout(function() {\n\n    var oldPath = this.path;\n    var newPath = getPath();\n\n    if (oldPath != newPath &&\n        this.opts.shouldTrackUrlChange.call(this, newPath, oldPath)) {\n\n      this.path = newPath;\n      this.tracker.set({\n        page: newPath,\n        title: isObject(history.state) && history.state.title || document.title\n      });\n\n      if (shouldSendPageview) this.tracker.send('pageview');\n    }\n  }.bind(this), 0);\n};\n\n\n/**\n * Determines whether or not the tracker should send a hit with the new page\n * data. This default implementation can be overrided in the config options.\n * @param {string} newPath\n * @param {string} oldPath\n * @return {boolean}\n */\nUrlChangeTracker.prototype.shouldTrackUrlChange = function(newPath, oldPath) {\n  return true;\n};\n\n\n/**\n * Returns the path value of the current URL.\n * @return {string}\n */\nfunction getPath() {\n  return location.pathname + location.search;\n}\n\n\nprovide('urlChangeTracker', UrlChangeTracker);\n","var constants = require('./constants');\n\n\n// Adds the dev ID to the list of dev IDs if any plugin is used.\n(window.gaDevIds = window.gaDevIds || []).push(constants.DEV_ID);\n\n\n/**\n * Provides a plugin for use with analytics.js, accounting for the possibility\n * that the global command queue has been renamed.\n * @param {string} pluginName The plugin name identifier.\n * @param {Function} pluginConstructor The plugin constructor function.\n */\nmodule.exports = function providePlugin(pluginName, pluginConstructor) {\n  var ga = window[window.GoogleAnalyticsObject || 'ga'];\n  if (typeof ga == 'function') {\n    ga('provide', pluginName, pluginConstructor);\n  }\n};\n","var utilities = {\n\n  /**\n   * Accepts a function and returns a wrapped version of the function that is\n   * expected to be called elsewhere in the system. If it's not called\n   * elsewhere after the timeout period, it's called regardless. The wrapper\n   * function also prevents the callback from being called more than once.\n   * @param {Function} callback The function to call.\n   * @param {number} wait How many milliseconds to wait before invoking\n   *     the callback.\n   */\n  withTimeout: function(callback, wait) {\n    var called = false;\n    setTimeout(callback, wait || 2000);\n    return function() {\n      if (!called) {\n        called = true;\n        callback();\n      }\n    };\n  },\n\n\n  /**\n   * Accepts an object of overrides and defaults and returns a new object\n   * with the values merged. For each key in defaults, if there's a\n   * corresponding value in overrides, it gets used.\n   * @param {Object} overrides.\n   * @param {?Object} defaults.\n   */\n  defaults: function(overrides, defaults) {\n    var result = {};\n\n    if (typeof overrides != 'object') {\n      overrides = {};\n    }\n\n    if (typeof defaults != 'object') {\n      defaults = {};\n    }\n\n    for (var key in defaults) {\n      if (defaults.hasOwnProperty(key)) {\n        result[key] = overrides.hasOwnProperty(key) ?\n            overrides[key] : defaults[key];\n      }\n    }\n    return result;\n  },\n\n\n  isObject: function(obj) {\n    return typeof obj == 'object' && obj !== null;\n  },\n\n\n  isArray: Array.isArray || function(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  },\n\n\n  toArray: function(obj) {\n    return utilities.isArray(obj) ? obj : [obj];\n  }\n};\n\nmodule.exports = utilities;\n","var matches = require('matches-selector')\r\n\r\nmodule.exports = function (element, selector, checkYoSelf) {\r\n  var parent = checkYoSelf ? element : element.parentNode\r\n\r\n  while (parent && parent !== document) {\r\n    if (matches(parent, selector)) return parent;\r\n    parent = parent.parentNode\r\n  }\r\n}\r\n","\n/**\n * Module dependencies.\n */\n\nvar now = require('date-now');\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = now() - timestamp;\n\n    if (last < wait && last > 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n};\n","module.exports = Date.now || now\n\nfunction now() {\n    return new Date().getTime()\n}\n","var closest = require('closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector, true);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","\r\n/**\r\n * Element prototype.\r\n */\r\n\r\nvar proto = Element.prototype;\r\n\r\n/**\r\n * Vendor function.\r\n */\r\n\r\nvar vendor = proto.matchesSelector\r\n  || proto.webkitMatchesSelector\r\n  || proto.mozMatchesSelector\r\n  || proto.msMatchesSelector\r\n  || proto.oMatchesSelector;\r\n\r\n/**\r\n * Expose `match()`.\r\n */\r\n\r\nmodule.exports = match;\r\n\r\n/**\r\n * Match `el` to `selector`.\r\n *\r\n * @param {Element} el\r\n * @param {String} selector\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nfunction match(el, selector) {\r\n  if (vendor) return vendor.call(el, selector);\r\n  var nodes = el.parentNode.querySelectorAll(selector);\r\n  for (var i = 0; i < nodes.length; ++i) {\r\n    if (nodes[i] == el) return true;\r\n  }\r\n  return false;\r\n}"],"sourceRoot":"/source/"}