{"version":3,"sources":["assets/javascript/node_modules/browserify/node_modules/browser-pack/_prelude.js","assets/javascript/main.js","assets/javascript/add-listener.js","assets/javascript/analytics.js","assets/javascript/content-loader.js","assets/javascript/history2.js","assets/javascript/link-clicked.js","assets/javascript/parse-url.js","assets/javascript/supports.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","analytics","contentLoader","supports","flexbox","document","documentElement","className","init","track","./analytics","./content-loader","./supports",2,"element","event","fn","addEventListener","attachEvent",3,"trackBreakpoints","window","matchMedia","timeout","Object","keys","breakpoints","forEach","breakpoint","mql","matches","ga","addListener","clearTimeout","setTimeout","trackOutboundLinks","linkClicked","this","getAttribute","isLinkOutbound","target","href","trackSocialInteractions","socialNetwork","socialAction","socialTarget","location","link","url","parseUrl","loc","origin","xs","sm","md","lg","xl","./link-clicked","./parse-url",4,"getTitle","title","innerText","loadPageContent","done","path","nextPage","pageCache","basename","test","replace","xhr","XMLHttpRequest","open","onload","status","responseText","response","onerror","send","showPageContent","content","container","innerHTML","setScroll","hash","getElementById","slice","scrollPos","offsetTop","scrollTo","trackPage","page","pathname","trackError","error","exDescription","stack","message","exFatal","hitCallback","History2","history","pushState","querySelector","history2","use","metaKey","ctrlKey","which","preventDefault","add","./history2",5,"currentPage","replaceState","_queue","state","bind","prototype","_processQueue","plugin","push","onError","_onError","console","_onComplete","type","self","next","isSync","apply",6,"isLink","el","nodeName","toLowerCase","getLinkAncestor","parentNode","nodeType","srcElement","./add-listener",7,"createElement","cache","httpPort","httpsPort","protocol","port","host","charAt","hostname","search",8,"style","body"],"mappings":"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","file":"assets/javascript/main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var analytics = require('./analytics');\nvar contentLoader = require('./content-loader');\nvar supports = require('./supports');\n\n\n// Add an `is-legacy` class on browsers that don't supports flexbox.\nif (!supports.flexbox()) {\n  document.documentElement.className += ' is-legacy';\n}\n\n\n// Load links via AJAX instead of full page loads in browsers with pushState.\ncontentLoader.init();\n\n\n// Track various interations with Google Analytics\nanalytics.track();\n","module.exports = function(element, event, fn) {\n  if (element.addEventListener) {\n    element.addEventListener(event, fn, false);\n  }\n  else {\n    element.attachEvent('on' + event, fn);\n  }\n};\n","/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar parseUrl = require('./parse-url');\n\n\nvar breakpoints = {\n  xs: '(max-width: 419px)',\n  sm: '(min-width: 420px) and (max-width: 569px)',\n  md: '(min-width: 570px) and (max-width: 799px)',\n  lg: '(min-width: 800px) and (max-width: 999px)',\n  xl: '(min-width: 1000px)'\n};\n\n\nfunction trackBreakpoints() {\n  // Do nothing in browsers that don't support `window.matchMedia`.\n  if (!window.matchMedia) return;\n\n  // Prevent rapid breakpoint changes from all firing at once.\n  var timeout;\n\n  Object.keys(breakpoints).forEach(function(breakpoint) {\n    var mql = window.matchMedia(breakpoints[breakpoint]);\n\n    // Set the initial breakpoint on pageload.\n    if (mql.matches) {\n      ga('set', 'dimension1', breakpoint);\n    }\n\n    // Update the breakpoint as the matched media changes, and send an event.\n    mql.addListener(function(mql) {\n      if (mql.matches) {\n        clearTimeout(timeout);\n        timeout = setTimeout(function() {\n          ga('set', 'dimension1', breakpoint);\n          ga('send', 'event', 'Breakpoint', 'change', breakpoint);\n        }, 1000);\n      }\n    });\n  });\n}\n\n\nfunction trackOutboundLinks() {\n  linkClicked(function() {\n    // Ignore outbound links on social buttons.\n    if (this.getAttribute('data-social-network')) return;\n\n    if (isLinkOutbound(this)) {\n      // Opening links in an external tabs allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'event', 'Outbound Link', 'click', this.href);\n    }\n  });\n}\n\n\nfunction trackSocialInteractions() {\n  linkClicked(function() {\n    var socialNetwork = this.getAttribute('data-social-network');\n    if (socialNetwork) {\n      var socialAction = this.getAttribute('data-social-action');\n      var socialTarget = location.href;\n\n      // Opening links in an external tab allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'social', socialNetwork, socialAction, socialTarget);\n    }\n  });\n}\n\n\nfunction isLinkOutbound(link) {\n  var url = parseUrl(link.href);\n  var loc = parseUrl(location.href);\n  return url.origin != loc.origin;\n}\n\n\nmodule.exports = {\n  track: function() {\n\n    ga('set', 'transport', 'beacon');\n\n    trackBreakpoints();\n    trackOutboundLinks();\n    trackSocialInteractions();\n\n    ga('send', 'pageview');\n  }\n};\n","/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar History2 = require('./history2');\nvar parseUrl = require('./parse-url');\n\n// Cache the container element to avoid multiple lookups.\nvar container;\n\n// Store the result of page content requests to avoid multiple\n// lookups when navigation to a previously seen page.\nvar pageCache = {};\n\n\nfunction getTitle(a) {\n  var title = a.title || a.innerText;\n  return title ? title + ' \\u2014 Philip Walton' : null;\n}\n\n\nfunction loadPageContent(done) {\n  var path = this.nextPage.path;\n\n  if (pageCache[path]) return done();\n\n  var basename = /(\\w+)\\.html$/;\n  var url = basename.test(path) ?\n      path.replace(basename, '_$1.html') : path + '_index.html';\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.onload = function() {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      pageCache[path] = xhr.responseText;\n      done();\n    }\n    else {\n      done(new Error('(' + xhr.status + ') ' + xhr.response));\n    }\n  };\n  xhr.onerror = function() {\n    done(new Error('Error making request to:' + url));\n  };\n  xhr.send();\n}\n\n\nfunction showPageContent() {\n  var content = pageCache[this.nextPage.path];\n  container.innerHTML = content;\n}\n\n\nfunction setScroll() {\n  var hash = this.nextPage.hash;\n  if (hash) {\n    var target = document.getElementById(hash.slice(1));\n  }\n  var scrollPos = target ? target.offsetTop : 0;\n\n  // TODO: There's a weird chrome bug were sometime this function\n  // doesn't do anything if Chrome has already visited this page and\n  // thinks it has a scroll position in mind. Just chrome, weird...\n  window.scrollTo(0, scrollPos);\n}\n\n\nfunction trackPage() {\n  ga('set', {\n    page: this.nextPage.pathname,\n    title: this.nextPage.title\n  });\n  ga('send', 'pageview');\n}\n\n\nfunction trackError(error) {\n  var url = this.nextPage.href;\n  ga('send', 'exception', {\n    exDescription: error.stack || error.message,\n    exFatal: false,\n    hitCallback: function() {\n      // If there's an error, attempt to manually navigation to the\n      // page. If that fails Github pages will show the actual 404 page.\n      location.href = url;\n    }\n  });\n}\n\n\nmodule.exports = {\n\n  init: function() {\n\n    // Only load external content via AJAX if the browser support pushState.\n    if (!(window.history && window.history.pushState)) return;\n\n    // Add the current page to the cache.\n    container = document.querySelector('main');\n    pageCache[location.pathname] = container.innerHTML;\n\n\n    var history2 = new History2()\n        .use(loadPageContent)\n        .use(showPageContent)\n        .use(setScroll)\n        .use(trackPage)\n        ['catch'](trackError);\n\n    linkClicked(function(event) {\n\n      // Don't attempt to AJAX in content if the link was clicked to open a new tab.\n      if (event.metaKey || event.ctrlKey || event.which == 2) return;\n\n      var page = parseUrl(location.href);\n      var link = parseUrl(this.href);\n\n      // Don't do anything when clicking on links to the current URL.\n      if (link.href == page.href) event.preventDefault();\n\n      // If the clicked link is on the same site but has a different path,\n      // prevent the browser from navigating there and load the page via ajax.\n      if ((link.origin == page.origin) && (link.path != page.path)) {\n        event.preventDefault();\n        history2.add(link.href, getTitle(this));\n      }\n    });\n  }\n};\n","var parseUrl = require('./parse-url');\n\nfunction History2() {\n\n  // Store the current url information.\n  this.currentPage = parseUrl(window.location.href);\n  this.currentPage.title = document.title;\n\n  // Add history state initially so the first `popstate` event contains data.\n  history.replaceState(\n      this.currentPage,\n      this.currentPage.title,\n      this.currentPage.href);\n\n  this._queue = [];\n\n  // Listen for popstate changes and log them.\n  window.addEventListener('popstate', function(event) {\n    var state = event.state;\n    var title = state && state.title;\n    this.add(window.location.href, title, state, event);\n  }.bind(this));\n}\n\n\nHistory2.prototype.add = function(url, title, state, event) {\n\n  // Ignore urls pointing to the current address\n  if (url == this.currentPage.href) return;\n\n  this.nextPage = parseUrl(url);\n  this.nextPage.title = title;\n  this.nextPage.state = state;\n\n  this._processQueue(event);\n};\n\n\n/**\n * Register a plugin with the History2 instance.\n * @param {Function(History2, done)} - A plugin that runs some task and\n *     informs the next plugin in the queue when it's done.\n */\nHistory2.prototype.use = function(plugin) {\n  this._queue.push(plugin);\n\n  return this;\n};\n\n/**\n * Register a handler to catch any errors.\n * Note: In ES3 reserved words like \"catch\" couldn't be used as property names:\n * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names\n * @param {Function(Error)} - The function to handle the error.\n */\nHistory2.prototype['catch'] = function(onError) {\n  this._onError = onError;\n\n  return this;\n};\n\n\nHistory2.prototype._onError = function(error) {\n  // Left blank so calling `_onError` never fails.\n  console.error(error.stack);\n};\n\n\nHistory2.prototype._onComplete = function(event) {\n\n  // Popstate triggered navigation is already handled by the browser,\n  // so we only add to the history in non-popstate cases.\n  if (!(event && event.type == 'popstate')) {\n    history.pushState(\n        this.nextPage,\n        this.nextPage.title,\n        this.nextPage.href);\n  }\n\n  if (this.nextPage.title) document.title = this.nextPage.title;\n\n  // Update the last url to the current url\n  this.currentPage = this.nextPage;\n  this.nextPage = null;\n};\n\n\nHistory2.prototype._processQueue = function(event) {\n  var self = this;\n  var i = 0;\n\n  (function next() {\n\n    var plugin = self._queue[i++];\n    var isSync = plugin && !plugin.length;\n\n    if (!plugin) return self._onComplete(event);\n\n    // The callback for async plugins.\n    function done(error) {\n      if (error) {\n        self._onError(error);\n      }\n      else {\n        next();\n      }\n    }\n\n    try {\n      plugin.apply(self, isSync ? [] : [done]);\n    }\n    catch(error) {\n      return self._onError(error);\n    }\n\n    // Sync plugins are done by now and can immediately process\n    // the next item in the queue.\n    if (isSync) next();\n\n  }());\n};\n\n\nmodule.exports = History2;\n","var addListener = require('./add-listener');\n\nfunction isLink(el) {\n  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;\n}\n\nfunction getLinkAncestor(el) {\n  if (isLink(el)) return el;\n  while (el.parentNode && el.parentNode.nodeType == 1) {\n    if (isLink(el)) return el;\n    el = el.parentNode;\n  }\n}\n\nmodule.exports = function(fn) {\n  addListener(document, 'click', function(event) {\n    var e = event || window.event;\n    var target = e.target || e.srcElement;\n    var link = getLinkAncestor(target);\n    if (link) {\n      fn.call(link, e);\n    }\n  });\n};\n","var a = document.createElement('a');\nvar cache = {};\n\n/**\n * Parse the given url and return the properties returned\n * by the `Location` object.\n * @param {string} url - The url to parse.\n * @return {Object} An object with the same keys as `window.location`.\n */\nmodule.exports = function(url) {\n\n  if (cache[url]) return cache[url];\n\n  var httpPort = /:80$/;\n  var httpsPort = /:443/;\n\n  a.href = url;\n\n  // Sometimes IE will return no port or just a colon, especially for things\n  // like relative port URLs (e.g. \"//google.com\").\n  var protocol = !a.protocol || ':' == a.protocol ?\n      location.protocol : a.protocol;\n\n  // Don't include default ports.\n  var port = (a.port == '80' || a.port == '443') ? '' : a.port;\n\n  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even\n  // when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    path: pathname + a.search,\n    pathname: pathname,\n    port: port,\n    protocol: protocol,\n    search: a.search\n  };\n};\n","var supports = {};\nvar style = document.body.style;\n\nmodule.exports = {\n  flexbox: function() {\n    return supports.flexbox || (supports.flexbox = ('flexBasis' in style ||\n        'msFlexAlign' in style || 'webkitBoxDirection' in style));\n  }\n};\n"],"sourceRoot":"/source/"}