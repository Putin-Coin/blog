{"version":3,"sources":["assets/javascript/node_modules/browser-pack/_prelude.js","assets/javascript/main.js","assets/javascript/assets/javascript/add-listener.js","assets/javascript/assets/javascript/analytics.js","assets/javascript/assets/javascript/content-loader.js","assets/javascript/assets/javascript/history2.js","assets/javascript/assets/javascript/link-clicked.js","assets/javascript/assets/javascript/main.js","assets/javascript/assets/javascript/parse-url.js","assets/javascript/assets/javascript/supports.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","element","event","fn","addEventListener","attachEvent",2,"trackOutboundLinks","linkClicked","this","getAttribute","isLinkOutbound","target","ga","href","trackSocialInteractions","socialNetwork","socialAction","socialTarget","location","link","url","parseUrl","loc","origin","track","./link-clicked","./parse-url",3,"getTitle","title","innerText","loadPageContent","done","path","nextPage","pageCache","basename","test","replace","xhr","XMLHttpRequest","open","onload","status","responseText","response","onerror","send","showPageContent","content","container","innerHTML","setScroll","hash","document","getElementById","slice","scrollPos","offsetTop","window","scrollTo","trackPage","page","pathname","trackError","error","exDescription","stack","message","History2","init","history","pushState","querySelector","history2","use","metaKey","ctrlKey","which","preventDefault","add","./history2",4,"currentPage","replaceState","_queue","self","state","prototype","_processQueue","plugin","push","onError","_onError","console","_onComplete","type","next","isSync","apply",5,"isLink","el","nodeName","toLowerCase","getLinkAncestor","parentNode","nodeType","addListener","srcElement","./add-listener",6,"analytics","contentLoader","supports","flexbox","documentElement","className","./analytics","./content-loader","./supports",7,"createElement","cache","httpPort","httpsPort","protocol","port","host","charAt","hostname","search",8,"style","body"],"mappings":"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","file":"assets/javascript/main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nmodule.exports = function (element, event, fn) {\n  if (element.addEventListener) {\n    element.addEventListener(event, fn, false);\n  } else {\n    element.attachEvent('on' + event, fn);\n  }\n};\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\n/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar parseUrl = require('./parse-url');\n\nfunction trackOutboundLinks() {\n  linkClicked(function () {\n    // Ignore outbound links on social buttons.\n    if (this.getAttribute('data-social-network')) return;\n\n    if (isLinkOutbound(this)) {\n      // Opening links in an external tabs allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'event', 'Outbound Link', 'click', this.href);\n    }\n  });\n}\n\nfunction trackSocialInteractions() {\n  linkClicked(function () {\n    var socialNetwork = this.getAttribute('data-social-network');\n    if (socialNetwork) {\n      var socialAction = this.getAttribute('data-social-action');\n      var socialTarget = location.href;\n\n      // Opening links in an external tab allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'social', socialNetwork, socialAction, socialTarget);\n    }\n  });\n}\n\nfunction isLinkOutbound(link) {\n  var url = parseUrl(link.href);\n  var loc = parseUrl(location.href);\n  return url.origin != loc.origin;\n}\n\nmodule.exports = {\n  track: function track() {\n    trackOutboundLinks();\n    trackSocialInteractions();\n  }\n};\n\n},{\"./link-clicked\":5,\"./parse-url\":7}],3:[function(require,module,exports){\n'use strict';\n\n/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar History2 = require('./history2');\nvar parseUrl = require('./parse-url');\n\n// Cache the container element to avoid multiple lookups.\nvar container;\n\n// Store the result of page content requests to avoid multiple\n// lookups when navigation to a previously seen page.\nvar pageCache = {};\n\nfunction getTitle(a) {\n  var title = a.title || a.innerText;\n  return title ? title + ' â€” Philip Walton' : null;\n}\n\nfunction loadPageContent(done) {\n  var path = this.nextPage.path;\n\n  if (pageCache[path]) return done();\n\n  var basename = /(\\w+)\\.html$/;\n  var url = basename.test(path) ? path.replace(basename, '_$1.html') : path + '_index.html';\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.onload = function () {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      pageCache[path] = xhr.responseText;\n      done();\n    } else {\n      done(new Error('(' + xhr.status + ') ' + xhr.response));\n    }\n  };\n  xhr.onerror = function () {\n    done(new Error('Error making request to:' + url));\n  };\n  xhr.send();\n}\n\nfunction showPageContent() {\n  var content = pageCache[this.nextPage.path];\n  container.innerHTML = content;\n}\n\nfunction setScroll() {\n  var hash = this.nextPage.hash;\n  if (hash) {\n    var target = document.getElementById(hash.slice(1));\n  }\n  var scrollPos = target ? target.offsetTop : 0;\n\n  // TODO: There's a weird chrome bug were sometime this function\n  // doesn't do anything if Chrome has already visited this page and\n  // thinks it has a scroll position in mind. Just chrome, weird...\n  window.scrollTo(0, scrollPos);\n}\n\nfunction trackPage() {\n  ga('set', {\n    page: this.nextPage.pathname,\n    title: this.nextPage.title\n  });\n  ga('send', 'pageview');\n}\n\nfunction trackError(error) {\n  ga('send', 'exception', { exDescription: error.stack || error.message });\n}\n\nmodule.exports = {\n\n  init: function init() {\n\n    // Only load external content via AJAX if the browser support pushState.\n    if (!(window.history && window.history.pushState)) return;\n\n    // Add the current page to the cache.\n    container = document.querySelector('main');\n    pageCache[location.pathname] = container.innerHTML;\n\n    var history2 = new History2().use(loadPageContent).use(showPageContent).use(setScroll).use(trackPage)['catch'](trackError);\n\n    linkClicked(function (event) {\n\n      // Don't attempt to AJAX in content if the link was clicked to open a new tab.\n      if (event.metaKey || event.ctrlKey || event.which == 2) return;\n\n      var page = parseUrl(location.href);\n      var link = parseUrl(this.href);\n\n      // Don't do anything when clicking on links to the current URL.\n      if (link.href == page.href) event.preventDefault();\n\n      // If the clicked link is on the same site but has a different path,\n      // prevent the browser from navigating there and load the page via ajax.\n      if (link.origin == page.origin && link.path != page.path) {\n        event.preventDefault();\n        history2.add(link.href, getTitle(this));\n      }\n    });\n  }\n};\n\n},{\"./history2\":4,\"./link-clicked\":5,\"./parse-url\":7}],4:[function(require,module,exports){\n'use strict';\n\nvar parseUrl = require('./parse-url');\n\nfunction History2() {\n\n  // Store the current url information.\n  this.currentPage = parseUrl(window.location.href);\n  this.currentPage.title = document.title;\n\n  // Add history state initially so the first `popstate` event contains data.\n  history.replaceState(this.currentPage, this.currentPage.title, this.currentPage.href);\n\n  this._queue = [];\n\n  // Listen for popstate changes and log them.\n  var self = this;\n  window.addEventListener('popstate', function (event) {\n    var state = event.state;\n    var title = state && state.title;\n    self.add(window.location.href, title, state, event);\n  });\n}\n\nHistory2.prototype.add = function (url, title, state, event) {\n\n  // Ignore urls pointing to the current address\n  if (url == this.currentPage.href) return;\n\n  this.nextPage = parseUrl(url);\n  this.nextPage.title = title;\n  this.nextPage.state = state;\n\n  this._processQueue(event);\n};\n\n/**\n * Register a plugin with the History2 instance.\n * @param {Function(History2, done)} - A plugin that runs some task and\n *     informs the next plugin in the queue when it's done.\n */\nHistory2.prototype.use = function (plugin) {\n  this._queue.push(plugin);\n\n  return this;\n};\n\n/**\n * Register a handler to catch any errors.\n * Note: In ES3 reserved words like \"catch\" couldn't be used as property names:\n * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names\n * @param {Function(Error)} - The function to handle the error.\n */\nHistory2.prototype['catch'] = function (onError) {\n  this._onError = onError;\n\n  return this;\n};\n\nHistory2.prototype._onError = function (error) {\n  // Left blank so calling `_onError` never fails.\n  console.error(error.stack);\n};\n\nHistory2.prototype._onComplete = function (event) {\n\n  // Popstate triggered navigation is already handled by the browser,\n  // so we only add to the history in non-popstate cases.\n  if (!(event && event.type == 'popstate')) {\n    history.pushState(this.nextPage, this.nextPage.title, this.nextPage.href);\n  }\n\n  if (this.nextPage.title) document.title = this.nextPage.title;\n\n  // Update the last url to the current url\n  this.currentPage = this.nextPage;\n  this.nextPage = null;\n};\n\nHistory2.prototype._processQueue = function (event) {\n  var self = this;\n  var i = 0;\n\n  (function next() {\n\n    var plugin = self._queue[i++];\n    var isSync = plugin && !plugin.length;\n\n    if (!plugin) return self._onComplete(event);\n\n    // The callback for async plugins.\n    function done(error) {\n      if (error) {\n        self._onError(error);\n      } else {\n        next();\n      }\n    }\n\n    try {\n      plugin.apply(self, isSync ? [] : [done]);\n    } catch (error) {\n      return self._onError(error);\n    }\n\n    // Sync plugins are done by now and can immediately process\n    // the next item in the queue.\n    if (isSync) next();\n  })();\n};\n\nmodule.exports = History2;\n\n},{\"./parse-url\":7}],5:[function(require,module,exports){\n'use strict';\n\nvar addListener = require('./add-listener');\n\nfunction isLink(el) {\n  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;\n}\n\nfunction getLinkAncestor(el) {\n  if (isLink(el)) return el;\n  while (el.parentNode && el.parentNode.nodeType == 1) {\n    if (isLink(el)) return el;\n    el = el.parentNode;\n  }\n}\n\nmodule.exports = function (fn) {\n  addListener(document, 'click', function (event) {\n    var e = event || window.event;\n    var target = e.target || e.srcElement;\n    var link = getLinkAncestor(target);\n    if (link) {\n      fn.call(link, e);\n    }\n  });\n};\n\n},{\"./add-listener\":1}],6:[function(require,module,exports){\n'use strict';\n\nvar analytics = require('./analytics');\nvar contentLoader = require('./content-loader');\nvar supports = require('./supports');\n\n// Add an `is-legacy` class on browsers that don't supports flexbox.\nif (!supports.flexbox()) {\n  document.documentElement.className += ' is-legacy';\n}\n\n// Load links via AJAX instead of full page loads in browsers with pushState.\ncontentLoader.init();\n\n// Track various interations with Google Analytics\nanalytics.track();\n\n},{\"./analytics\":2,\"./content-loader\":3,\"./supports\":8}],7:[function(require,module,exports){\n'use strict';\n\nvar a = document.createElement('a');\nvar cache = {};\n\n/**\n * Parse the given url and return the properties returned\n * by the `Location` object.\n * @param {string} url - The url to parse.\n * @return {Object} An object with the same keys as `window.location`.\n */\nmodule.exports = function (url) {\n\n  if (cache[url]) return cache[url];\n\n  var httpPort = /:80$/;\n  var httpsPort = /:443/;\n\n  a.href = url;\n\n  // Sometimes IE will return no port or just a colon, especially for things\n  // like relative port URLs (e.g. \"//google.com\").\n  var protocol = !a.protocol || ':' == a.protocol ? location.protocol : a.protocol;\n\n  // Don't include default ports.\n  var port = a.port == '80' || a.port == '443' ? '' : a.port;\n\n  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even\n  // when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    path: pathname + a.search,\n    pathname: pathname,\n    port: port,\n    protocol: protocol,\n    search: a.search\n  };\n};\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar supports = {};\nvar style = document.body.style;\n\nmodule.exports = {\n  flexbox: function flexbox() {\n    return supports.flexbox || (supports.flexbox = 'flexBasis' in style || 'msFlexAlign' in style || 'webkitBoxDirection' in style);\n  }\n};\n\n},{}]},{},[6])\n\n","module.exports = function(element, event, fn) {\n  if (element.addEventListener) {\n    element.addEventListener(event, fn, false);\n  }\n  else {\n    element.attachEvent('on' + event, fn);\n  }\n};\n","/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar parseUrl = require('./parse-url');\n\n\nfunction trackOutboundLinks() {\n  linkClicked(function() {\n    // Ignore outbound links on social buttons.\n    if (this.getAttribute('data-social-network')) return;\n\n    if (isLinkOutbound(this)) {\n      // Opening links in an external tabs allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'event', 'Outbound Link', 'click', this.href);\n    }\n  });\n}\n\n\nfunction trackSocialInteractions() {\n  linkClicked(function() {\n    var socialNetwork = this.getAttribute('data-social-network');\n    if (socialNetwork) {\n      var socialAction = this.getAttribute('data-social-action');\n      var socialTarget = location.href;\n\n      // Opening links in an external tab allows the ga beacon to send.\n      // When following links directly, sometimes they don't make it.\n      this.target = '_blank';\n\n      ga('send', 'social', socialNetwork, socialAction, socialTarget);\n    }\n  });\n}\n\n\nfunction isLinkOutbound(link) {\n  var url = parseUrl(link.href);\n  var loc = parseUrl(location.href);\n  return url.origin != loc.origin;\n}\n\n\nmodule.exports = {\n  track: function() {\n    trackOutboundLinks();\n    trackSocialInteractions();\n  }\n};\n","/* global ga */\n\nvar linkClicked = require('./link-clicked');\nvar History2 = require('./history2');\nvar parseUrl = require('./parse-url');\n\n// Cache the container element to avoid multiple lookups.\nvar container;\n\n// Store the result of page content requests to avoid multiple\n// lookups when navigation to a previously seen page.\nvar pageCache = {};\n\n\nfunction getTitle(a) {\n  var title = a.title || a.innerText;\n  return title ? title + ' \\u2014 Philip Walton' : null;\n}\n\n\nfunction loadPageContent(done) {\n  var path = this.nextPage.path;\n\n  if (pageCache[path]) return done();\n\n  var basename = /(\\w+)\\.html$/;\n  var url = basename.test(path) ?\n      path.replace(basename, '_$1.html') : path + '_index.html';\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url);\n  xhr.onload = function() {\n    if (xhr.status >= 200 && xhr.status < 400) {\n      pageCache[path] = xhr.responseText;\n      done();\n    }\n    else {\n      done(new Error('(' + xhr.status + ') ' + xhr.response));\n    }\n  };\n  xhr.onerror = function() {\n    done(new Error('Error making request to:' + url));\n  };\n  xhr.send();\n}\n\n\nfunction showPageContent() {\n  var content = pageCache[this.nextPage.path];\n  container.innerHTML = content;\n}\n\n\nfunction setScroll() {\n  var hash = this.nextPage.hash;\n  if (hash) {\n    var target = document.getElementById(hash.slice(1));\n  }\n  var scrollPos = target ? target.offsetTop : 0;\n\n  // TODO: There's a weird chrome bug were sometime this function\n  // doesn't do anything if Chrome has already visited this page and\n  // thinks it has a scroll position in mind. Just chrome, weird...\n  window.scrollTo(0, scrollPos);\n}\n\n\nfunction trackPage() {\n  ga('set', {\n    page: this.nextPage.pathname,\n    title: this.nextPage.title\n  });\n  ga('send', 'pageview');\n}\n\n\nfunction trackError(error) {\n  ga('send', 'exception', {exDescription: error.stack || error.message});\n}\n\n\nmodule.exports = {\n\n  init: function() {\n\n    // Only load external content via AJAX if the browser support pushState.\n    if (!(window.history && window.history.pushState)) return;\n\n    // Add the current page to the cache.\n    container = document.querySelector('main');\n    pageCache[location.pathname] = container.innerHTML;\n\n\n    var history2 = new History2()\n        .use(loadPageContent)\n        .use(showPageContent)\n        .use(setScroll)\n        .use(trackPage)\n        ['catch'](trackError);\n\n    linkClicked(function(event) {\n\n      // Don't attempt to AJAX in content if the link was clicked to open a new tab.\n      if (event.metaKey || event.ctrlKey || event.which == 2) return;\n\n      var page = parseUrl(location.href);\n      var link = parseUrl(this.href);\n\n      // Don't do anything when clicking on links to the current URL.\n      if (link.href == page.href) event.preventDefault();\n\n      // If the clicked link is on the same site but has a different path,\n      // prevent the browser from navigating there and load the page via ajax.\n      if ((link.origin == page.origin) && (link.path != page.path)) {\n        event.preventDefault();\n        history2.add(link.href, getTitle(this));\n      }\n    });\n  }\n};\n","var parseUrl = require('./parse-url');\n\nfunction History2() {\n\n  // Store the current url information.\n  this.currentPage = parseUrl(window.location.href);\n  this.currentPage.title = document.title;\n\n  // Add history state initially so the first `popstate` event contains data.\n  history.replaceState(\n      this.currentPage,\n      this.currentPage.title,\n      this.currentPage.href);\n\n  this._queue = [];\n\n  // Listen for popstate changes and log them.\n  var self = this;\n  window.addEventListener('popstate', function(event) {\n    var state = event.state;\n    var title = state && state.title;\n    self.add(window.location.href, title, state, event);\n  });\n}\n\n\nHistory2.prototype.add = function(url, title, state, event) {\n\n  // Ignore urls pointing to the current address\n  if (url == this.currentPage.href) return;\n\n  this.nextPage = parseUrl(url);\n  this.nextPage.title = title;\n  this.nextPage.state = state;\n\n  this._processQueue(event);\n};\n\n\n/**\n * Register a plugin with the History2 instance.\n * @param {Function(History2, done)} - A plugin that runs some task and\n *     informs the next plugin in the queue when it's done.\n */\nHistory2.prototype.use = function(plugin) {\n  this._queue.push(plugin);\n\n  return this;\n};\n\n/**\n * Register a handler to catch any errors.\n * Note: In ES3 reserved words like \"catch\" couldn't be used as property names:\n * http://kangax.github.io/compat-table/es5/#Reserved_words_as_property_names\n * @param {Function(Error)} - The function to handle the error.\n */\nHistory2.prototype['catch'] = function(onError) {\n  this._onError = onError;\n\n  return this;\n};\n\n\nHistory2.prototype._onError = function(error) {\n  // Left blank so calling `_onError` never fails.\n  console.error(error.stack);\n};\n\n\nHistory2.prototype._onComplete = function(event) {\n\n  // Popstate triggered navigation is already handled by the browser,\n  // so we only add to the history in non-popstate cases.\n  if (!(event && event.type == 'popstate')) {\n    history.pushState(\n        this.nextPage,\n        this.nextPage.title,\n        this.nextPage.href);\n  }\n\n  if (this.nextPage.title) document.title = this.nextPage.title;\n\n  // Update the last url to the current url\n  this.currentPage = this.nextPage;\n  this.nextPage = null;\n};\n\n\nHistory2.prototype._processQueue = function(event) {\n  var self = this;\n  var i = 0;\n\n  (function next() {\n\n    var plugin = self._queue[i++];\n    var isSync = plugin && !plugin.length;\n\n    if (!plugin) return self._onComplete(event);\n\n    // The callback for async plugins.\n    function done(error) {\n      if (error) {\n        self._onError(error);\n      }\n      else {\n        next();\n      }\n    }\n\n    try {\n      plugin.apply(self, isSync ? [] : [done]);\n    }\n    catch(error) {\n      return self._onError(error);\n    }\n\n    // Sync plugins are done by now and can immediately process\n    // the next item in the queue.\n    if (isSync) next();\n\n  }());\n};\n\n\nmodule.exports = History2;\n","var addListener = require('./add-listener');\n\nfunction isLink(el) {\n  return el.nodeName && el.nodeName.toLowerCase() == 'a' && el.href;\n}\n\nfunction getLinkAncestor(el) {\n  if (isLink(el)) return el;\n  while (el.parentNode && el.parentNode.nodeType == 1) {\n    if (isLink(el)) return el;\n    el = el.parentNode;\n  }\n}\n\nmodule.exports = function(fn) {\n  addListener(document, 'click', function(event) {\n    var e = event || window.event;\n    var target = e.target || e.srcElement;\n    var link = getLinkAncestor(target);\n    if (link) {\n      fn.call(link, e);\n    }\n  });\n};\n","var analytics = require('./analytics');\nvar contentLoader = require('./content-loader');\nvar supports = require('./supports');\n\n\n// Add an `is-legacy` class on browsers that don't supports flexbox.\nif (!supports.flexbox()) {\n  document.documentElement.className += ' is-legacy';\n}\n\n\n// Load links via AJAX instead of full page loads in browsers with pushState.\ncontentLoader.init();\n\n\n// Track various interations with Google Analytics\nanalytics.track();\n","var a = document.createElement('a');\nvar cache = {};\n\n/**\n * Parse the given url and return the properties returned\n * by the `Location` object.\n * @param {string} url - The url to parse.\n * @return {Object} An object with the same keys as `window.location`.\n */\nmodule.exports = function(url) {\n\n  if (cache[url]) return cache[url];\n\n  var httpPort = /:80$/;\n  var httpsPort = /:443/;\n\n  a.href = url;\n\n  // Sometimes IE will return no port or just a colon, especially for things\n  // like relative port URLs (e.g. \"//google.com\").\n  var protocol = !a.protocol || ':' == a.protocol ?\n      location.protocol : a.protocol;\n\n  // Don't include default ports.\n  var port = (a.port == '80' || a.port == '443') ? '' : a.port;\n\n  // Sometimes IE incorrectly includes a port (e.g. `:80` or `:443`)  even\n  // when no port is specified in the URL.\n  // http://bit.ly/1rQNoMg\n  var host = a.host.replace(protocol == 'http:' ? httpPort : httpsPort, '');\n\n  // Not all browser support `origin` so we have to build it.\n  var origin = a.origin ? a.origin : protocol + '//' + host;\n\n  // Sometimes IE doesn't include the leading slash for pathname.\n  // http://bit.ly/1rQNoMg\n  var pathname = a.pathname.charAt(0) == '/' ? a.pathname : '/' + a.pathname;\n\n  return cache[url] = {\n    hash: a.hash,\n    host: host,\n    hostname: a.hostname,\n    href: a.href,\n    origin: origin,\n    path: pathname + a.search,\n    pathname: pathname,\n    port: port,\n    protocol: protocol,\n    search: a.search\n  };\n};\n","var supports = {};\nvar style = document.body.style;\n\nmodule.exports = {\n  flexbox: function() {\n    return supports.flexbox || (supports.flexbox = ('flexBasis' in style ||\n        'msFlexAlign' in style || 'webkitBoxDirection' in style));\n  }\n};\n"],"sourceRoot":"/source/"}